@import url("https://fonts.googleapis.com/css2?family=Spline+Sans:wght@300;400;500;600;700&display=swap");
@import url("https://fonts.googleapis.com/css2?family=Material+Symbols+Rounded:opsz,wght,FILL,GRAD@20..48,200..700,0..1,-50..200");
@import "tailwindcss";
@config "../tailwind.config.cjs";

:root {
  font-family:
    "Spline Sans",
    system-ui,
    -apple-system,
    BlinkMacSystemFont,
    "Segoe UI",
    sans-serif;

  /* App chrome sizing (used for scroll padding / focus visibility). */
  --app-top-chrome: 3.5rem; /* ~56px */
  --app-bottom-nav: 5.5rem; /* ~88px */

  /* Compact density tokens (Instagram-like). */
  --page-pad-x: 0.875rem; /* 14px */
  --page-pad-y: 0.75rem; /* 12px */
  --card-pad: 0.75rem; /* 12px */
  --row-pad-y: 0.625rem; /* 10px */
  --row-pad-x: 0.75rem; /* 12px */
  --section-gap: 0.75rem; /* 12px */

}


html {
  scroll-padding-top: calc(var(--app-top-chrome) + env(safe-area-inset-top));
  scroll-padding-bottom: calc(var(--app-bottom-nav) + env(safe-area-inset-bottom));
}

:focus-visible {
  scroll-margin-top: calc(var(--app-top-chrome) + env(safe-area-inset-top) + 0.5rem);
  scroll-margin-bottom: calc(var(--app-bottom-nav) + env(safe-area-inset-bottom) + 0.5rem);
}

body {
  margin: 0;
  min-height: 100vh;
}

@layer base {
  html {
    font-size: 16px;
    text-rendering: optimizeLegibility;
  }

  body {
    @apply font-body text-base leading-relaxed text-foreground antialiased;
  }

  h1 {
    @apply font-heading text-3xl font-semibold leading-tight tracking-tight;
  }

  h2 {
    @apply font-heading text-2xl font-semibold leading-tight tracking-tight;
  }

  h3 {
    @apply font-heading text-xl font-semibold leading-snug;
  }

  h4 {
    @apply font-heading text-lg font-semibold leading-snug;
  }

  h5 {
    @apply font-heading text-base font-semibold leading-snug;
  }

  h6 {
    @apply font-heading text-sm font-semibold leading-snug;
  }
}

@layer utilities {
  .type-display {
    @apply font-heading text-3xl font-semibold leading-tight tracking-tight;
  }

  .type-title {
    @apply font-heading text-2xl font-semibold leading-tight tracking-tight;
  }

  .type-heading {
    @apply font-heading text-xl font-semibold leading-snug;
  }

  .type-subheading {
    @apply font-heading text-lg font-semibold leading-snug;
  }

  .type-label {
    @apply text-sm font-semibold leading-snug;
  }

  .type-body {
    @apply text-base leading-relaxed;
  }

  .type-caption {
    @apply text-sm leading-snug;
  }

  .type-overline {
    @apply text-xs font-semibold uppercase tracking-[0.18em];
  }


  /* Layout density utilities (Session 4: compact + consistent spacing) */
  .page-pad {
    padding-left: var(--page-pad-x);
    padding-right: var(--page-pad-x);
  }

  .page-pad-y {
    padding-top: var(--page-pad-y);
    padding-bottom: var(--page-pad-y);
  }

  .page-pad-all {
    padding: var(--page-pad-y) var(--page-pad-x);
  }

  .row-pad {
    padding: var(--row-pad-y) var(--row-pad-x);
  }

  .stack-gap {
    gap: var(--section-gap);
  }

  .card-pad {
    padding: var(--card-pad);
  }

  .page-stack {
    padding: var(--page-pad-y) var(--page-pad-x);
    gap: var(--section-gap);
  }


  /* Soft “row cards” (Instagram-style depth) */
  .soft-row-card {
    @apply rounded-2xl border border-border/60 bg-card/60 shadow-sm backdrop-blur transition-colors;
  }

  .soft-row-card:hover {
    @apply bg-card/75;
  }

  /* Subtle “pressed” feedback for touch (keeps density, adds affordance) */
  .soft-row-card-interactive:active {
    @apply bg-card/80;
  }

  .soft-row-card:focus-within {
    @apply ring-2 ring-primary/40 ring-offset-2 ring-offset-background;
  }

  /* For rows that should feel clickable */
  .soft-row-card-interactive {
    @apply cursor-pointer;
  }


  /* Soft popover surface (used for chat message actions, pickers, etc.) */
  .soft-popover {
    @apply rounded-2xl border border-border/70 bg-card/90 shadow-xl backdrop-blur;
  }

  .soft-popover:focus-within {
    @apply ring-2 ring-primary/40 ring-offset-2 ring-offset-background;
  }

  /* Compact pill button used inside popovers */
  .soft-pill-action {
    @apply inline-flex items-center gap-1 rounded-full px-3 py-1.5 text-xs text-muted-foreground transition-colors hover:bg-muted/60 hover:text-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-primary/35 focus-visible:ring-offset-2 focus-visible:ring-offset-background;
  }

  .soft-pill-action-destructive {
    @apply text-destructive hover:bg-destructive/10 hover:text-destructive;
  }


  /* Icon buttons: comfortable hit targets in compact mode */
  .icon-hit {
    @apply inline-flex h-11 w-11 items-center justify-center rounded-full text-muted-foreground transition-colors hover:bg-muted/60 hover:text-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-primary/40 focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:pointer-events-none disabled:opacity-50;
  }

  /* For dark/overlay surfaces (image viewer, hero posters) */
  .icon-hit-dark {
    @apply inline-flex h-11 w-11 items-center justify-center rounded-full text-white transition-colors hover:bg-white/10 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-white/70 focus-visible:ring-offset-2 focus-visible:ring-offset-black;
  }

}

/*
  Tailwind v4 config in this repo doesn't enable @tailwindcss/line-clamp.
  Swipe UI relies heavily on clamping to prevent text overlap.
  Provide lightweight clamp utilities so long copy never collides.
*/
.line-clamp-1,
.line-clamp-2,
.line-clamp-3,
.line-clamp-4,
.line-clamp-5,
.line-clamp-6 {
  display: -webkit-box;
  -webkit-box-orient: vertical;
  overflow: hidden;
}

.line-clamp-1 {
  -webkit-line-clamp: 1;
}

.line-clamp-2 {
  -webkit-line-clamp: 2;
}

.line-clamp-3 {
  -webkit-line-clamp: 3;
}

.line-clamp-4 {
  -webkit-line-clamp: 4;
}

.line-clamp-5 {
  -webkit-line-clamp: 5;
}

.line-clamp-6 {
  -webkit-line-clamp: 6;
}

@media (min-width: 640px) {
  .sm\:line-clamp-1 {
    -webkit-line-clamp: 1;
  }
  .sm\:line-clamp-2 {
    -webkit-line-clamp: 2;
  }
  .sm\:line-clamp-3 {
    -webkit-line-clamp: 3;
  }
  .sm\:line-clamp-4 {
    -webkit-line-clamp: 4;
  }
  .sm\:line-clamp-5 {
    -webkit-line-clamp: 5;
  }
  .sm\:line-clamp-6 {
    -webkit-line-clamp: 6;
  }
}

@media (min-width: 768px) {
  .md\:line-clamp-1 {
    -webkit-line-clamp: 1;
  }
  .md\:line-clamp-2 {
    -webkit-line-clamp: 2;
  }
  .md\:line-clamp-3 {
    -webkit-line-clamp: 3;
  }
  .md\:line-clamp-4 {
    -webkit-line-clamp: 4;
  }
  .md\:line-clamp-5 {
    -webkit-line-clamp: 5;
  }
  .md\:line-clamp-6 {
    -webkit-line-clamp: 6;
  }
}

/* Material Symbols (Swipe v2) */
.material-symbols-rounded {
  font-variation-settings: "FILL" 0, "wght" 520, "GRAD" 0, "opsz" 24;
  line-height: 1;
  display: inline-block;
}

.material-symbols-rounded.is-filled {
  font-variation-settings: "FILL" 1, "wght" 520, "GRAD" 0, "opsz" 24;
}

/* Hide scrollbars for chat panes and horizontal scrollers */
.scrollbar-hide::-webkit-scrollbar {
  display: none;
}

.scrollbar-hide {
  -ms-overflow-style: none;
  scrollbar-width: none;
}

/* Fix chat layout issues with the Virtuoso viewport being absolutely positioned */
.conversation-page [data-viewport-type="element"] {
  position: relative !important;
  top: auto !important;
}

/* Ensure the message list starts at the top when aligned to the bottom */
.conversation-page [data-viewport-type="element"] [data-testid="virtuoso-item-list"] {
  margin-top: 0 !important;
}

/* Hide scrollbars for horizontal scrollers (Home v2). */
.no-scrollbar::-webkit-scrollbar {
  display: none;
}

.no-scrollbar {
  -ms-overflow-style: none;
  scrollbar-width: none;
}


@layer utilities {
  /* Full-bleed utility: span the full viewport width from within a centered container. */
  .full-bleed {
    width: 100vw;
    margin-left: calc(50% - 50vw);
    margin-right: calc(50% - 50vw);
  }
}
