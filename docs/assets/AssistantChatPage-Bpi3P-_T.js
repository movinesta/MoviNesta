import{u as o,b as c,r as l,n as d,ap as i,aL as p,j as g,A as v}from"./index-BhYCkKJ1.js";function m(){const a=o(),{user:r}=c();return l.useEffect(()=>{if(!r)return;let e=!0;return(async()=>{let n;try{n=await d("assistant-get-conversation",{},{requireAuth:!0})}catch(u){if(!e)return;console.error("assistant-get-conversation",u),i.show("Couldn't open the assistant chat. Please try again.",{title:"Assistant",variant:"error"}),a("/messages",{replace:!0});return}if(!e)return;const s=n?.conversationId,t=n?.assistant;if(s&&t?.id&&p({conversationId:s,assistant:{id:String(t.id),username:t.username??null,display_name:t.display_name??null,avatar_url:t.avatar_url??null},updatedAt:Date.now()}),!s){i.show("Assistant chat couldn't be created (missing conversationId).",{title:"Assistant",variant:"error"}),a("/messages",{replace:!0});return}a(`/messages/${s}`,{replace:!0})})(),()=>{e=!1}},[a,r]),g.jsx(v,{})}export{m as default};
