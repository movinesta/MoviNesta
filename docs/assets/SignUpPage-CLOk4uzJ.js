import{r as d,u as M,j as e,L as q,s as P}from"./index-DHFRnTo7.js";import{u as G}from"./useDocumentTitle-Dz03-BE4.js";import{M as c}from"./material-icon-CCSOLX5B.js";const H=/^[^\s@]+@[^\s@]+\.[^\s@]+$/,_=8,R=/^[a-z0-9_]{3,30}$/;function x(l,f,o,w,i){const h=i.trim().replace(/^@+/,"").toLowerCase(),s={};return w.trim()||(s.fullName="Full name is required."),h?R.test(h)||(s.username="Usernames must be 3-30 characters and only include lowercase letters, numbers, or underscores."):s.username="Username is required.",l?H.test(l)||(s.email="Please enter a valid email address."):s.email="Email is required.",f?f.length<_&&(s.password=`Password must be at least ${_} characters.`):s.password="Password is required.",o?f!==o&&(s.confirm="Passwords do not match."):s.confirm="Please confirm your password.",s}const D=()=>{G("Create account");const[l,f]=d.useState(""),[o,w]=d.useState(""),[i,h]=d.useState(""),[s,U]=d.useState(""),[m,A]=d.useState(""),[p,B]=d.useState(!1),[u,v]=d.useState(!1),[r,n]=d.useState({}),[k,b]=d.useState(null),[y,j]=d.useState(null),C=M(),z=!!l.trim()&&!!o.trim()&&!!i&&!!s&&!!m&&Object.keys(x(i,s,m,l,o)).length===0,F=async a=>{a.preventDefault();const t=x(i,s,m,l,o);if(Object.keys(t).length>0){n(t),b(null),j(null);return}try{v(!0),b(null),j(null),n({});const g=o.trim().replace(/^@+/,"").toLowerCase(),S=l.trim(),{data:N,error:L}=await P.auth.signUp({email:i,password:s,options:{data:{display_name:S,username:g}}});if(L){b(L.message||"Sign-up failed. Please check your details and try again.");return}if(!N.session){j("Almost there! Check your email inbox for a confirmation link to activate your account.");return}if(N.user?.id){const{error:E}=await P.from("profiles").update({display_name:S,username:g}).eq("id",N.user.id);E&&console.warn("[SignUpPage] Failed to update profile details",E)}C("/onboarding",{replace:!0})}catch(g){console.error(g),b("Something went wrong while creating your account.")}finally{v(!1)}};return e.jsx("div",{className:"min-h-screen bg-background-light text-slate-900 dark:bg-background-dark dark:text-white",children:e.jsxs("div",{className:"relative mx-auto flex min-h-screen w-full max-w-md flex-col",children:[e.jsxs("div",{className:"sticky top-0 z-10 flex items-center justify-between bg-background-light/80 px-4 pb-2 pt-4 backdrop-blur-md dark:bg-background-dark/80",children:[e.jsx("button",{type:"button",onClick:()=>C(-1),className:"flex h-12 w-12 items-center justify-center rounded-full text-slate-900 transition-colors hover:bg-slate-200 dark:text-white dark:hover:bg-white/10","aria-label":"Go back",children:e.jsx(c,{name:"arrow_back",className:"text-[24px]",ariaLabel:"Back"})}),e.jsx("div",{className:"text-sm font-medium opacity-0",children:"Sign Up"}),e.jsx("div",{className:"h-12 w-12"})]}),e.jsxs("div",{className:"flex flex-1 flex-col px-6 pb-8",children:[e.jsx("h1",{className:"pb-2 pt-2 text-center text-[32px] font-bold leading-tight tracking-tight text-slate-900 dark:text-white",children:"Join the Fan Hub"}),e.jsx("p",{className:"pb-6 text-center text-sm font-normal leading-normal text-[#ad92c9]",children:"Connect with fellow movie enthusiasts and share your passion."}),k&&e.jsx("div",{role:"alert",className:"mb-4 rounded-2xl border border-red-400/30 bg-red-500/10 px-3 py-2 text-xs text-red-200",children:k}),y&&e.jsx("div",{role:"status",className:"mb-4 rounded-2xl border border-emerald-400/40 bg-emerald-400/10 px-3 py-2 text-xs text-emerald-100",children:y}),e.jsxs("form",{onSubmit:F,className:"flex flex-col gap-2",noValidate:!0,children:[e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsxs("div",{className:"flex flex-col items-center justify-center pt-2",children:[e.jsxs("div",{className:"group relative cursor-pointer",children:[e.jsx("div",{className:"flex h-24 w-24 items-center justify-center rounded-full border-2 border-dashed border-[#ad92c9]/50 bg-[#362348] transition-all group-hover:border-primary group-hover:bg-primary/5",children:e.jsx(c,{name:"add_a_photo",className:"text-[32px] text-[#ad92c9] group-hover:text-primary"})}),e.jsx("div",{className:"absolute bottom-0 right-0 flex items-center justify-center rounded-full border-2 border-background-light bg-primary p-1 text-white shadow-lg dark:border-background-dark",children:e.jsx(c,{name:"add",className:"text-[16px]"})})]}),e.jsx("p",{className:"mt-1 text-xs font-medium text-[#ad92c9]",children:"Profile Pic"})]}),e.jsxs("div",{className:"flex flex-1 flex-col gap-2",children:[e.jsxs("label",{className:"relative flex items-center",children:[e.jsx(c,{name:"person",className:"absolute left-5 z-10 text-[#ad92c9]"}),e.jsx("input",{className:"h-12 w-full rounded-full border-none bg-white pl-14 pr-4 text-base font-normal leading-normal text-slate-900 placeholder:text-[#ad92c9] shadow-sm transition-all focus:bg-white focus:ring-2 focus:ring-primary dark:bg-[#362348] dark:text-white dark:focus:bg-[#432c5a]",placeholder:"Full Name",type:"text",value:l,onChange:a=>{f(a.target.value),r.fullName&&n(t=>({...t,fullName:void 0}))},onBlur:()=>{const a=x(i,s,m,l,o);a.fullName&&n(t=>({...t,fullName:a.fullName}))},disabled:u})]}),r.fullName&&e.jsx("p",{className:"text-xs text-red-300",children:r.fullName}),e.jsxs("label",{className:"relative flex items-center",children:[e.jsx(c,{name:"alternate_email",className:"absolute left-5 z-10 text-[#ad92c9]"}),e.jsx("input",{className:"h-12 w-full rounded-full border-none bg-white pl-14 pr-4 text-base font-normal leading-normal text-slate-900 placeholder:text-[#ad92c9] shadow-sm transition-all focus:bg-white focus:ring-2 focus:ring-primary dark:bg-[#362348] dark:text-white dark:focus:bg-[#432c5a]",placeholder:"Username",type:"text",value:o,onChange:a=>{w(a.target.value),r.username&&n(t=>({...t,username:void 0}))},onBlur:()=>{const a=x(i,s,m,l,o);a.username&&n(t=>({...t,username:a.username}))},disabled:u})]}),r.username&&e.jsx("p",{className:"text-xs text-red-300",children:r.username})]})]}),e.jsxs("label",{className:"relative flex items-center",children:[e.jsx(c,{name:"mail",className:"absolute left-5 z-10 text-[#ad92c9]"}),e.jsx("input",{className:"h-12 w-full rounded-full border-none bg-white pl-14 pr-4 text-base font-normal leading-normal text-slate-900 placeholder:text-[#ad92c9] shadow-sm transition-all focus:bg-white focus:ring-2 focus:ring-primary dark:bg-[#362348] dark:text-white dark:focus:bg-[#432c5a]",placeholder:"Email Address",type:"email",autoComplete:"email",value:i,onChange:a=>{h(a.target.value),r.email&&n(t=>({...t,email:void 0}))},onBlur:()=>{const a=x(i,s,m,l,o);a.email&&n(t=>({...t,email:a.email}))},disabled:u})]}),r.email&&e.jsx("p",{className:"text-xs text-red-300",children:r.email}),e.jsxs("label",{className:"relative flex items-center",children:[e.jsx(c,{name:"lock",className:"absolute left-5 z-10 text-[#ad92c9]"}),e.jsx("input",{className:"h-12 w-full rounded-full border-none bg-white pl-14 pr-12 text-base font-normal leading-normal text-slate-900 placeholder:text-[#ad92c9] shadow-sm transition-all focus:bg-white focus:ring-2 focus:ring-primary dark:bg-[#362348] dark:text-white dark:focus:bg-[#432c5a]",placeholder:"Password",type:p?"text":"password",autoComplete:"new-password",value:s,onChange:a=>{U(a.target.value),r.password&&n(t=>({...t,password:void 0}))},onBlur:()=>{const a=x(i,s,m,l,o);a.password&&n(t=>({...t,password:a.password}))},disabled:u}),e.jsx("button",{type:"button",onClick:()=>B(a=>!a),className:"absolute right-4 z-10 text-[#ad92c9] transition-colors hover:text-white","aria-label":p?"Hide password":"Show password",children:e.jsx(c,{name:p?"visibility":"visibility_off"})})]}),r.password&&e.jsx("p",{className:"text-xs text-red-300",children:r.password}),e.jsxs("label",{className:"relative flex items-center",children:[e.jsx(c,{name:"lock",className:"absolute left-5 z-10 text-[#ad92c9]"}),e.jsx("input",{className:"h-12 w-full rounded-full border-none bg-white pl-14 pr-4 text-base font-normal leading-normal text-slate-900 placeholder:text-[#ad92c9] shadow-sm transition-all focus:bg-white focus:ring-2 focus:ring-primary dark:bg-[#362348] dark:text-white dark:focus:bg-[#432c5a]",placeholder:"Confirm Password",type:p?"text":"password",autoComplete:"new-password",value:m,onChange:a=>{A(a.target.value),r.confirm&&n(t=>({...t,confirm:void 0}))},onBlur:()=>{const a=x(i,s,m,l,o);a.confirm&&n(t=>({...t,confirm:a.confirm}))},disabled:u})]}),r.confirm&&e.jsx("p",{className:"text-xs text-red-300",children:r.confirm}),e.jsxs("button",{type:"submit",disabled:u||!z,className:"mt-8 flex h-14 w-full items-center justify-center gap-2 rounded-full bg-primary font-bold text-white shadow-[0_0_20px_rgba(127,19,236,0.3)] transition-all hover:bg-primary/90 disabled:cursor-not-allowed disabled:opacity-70",children:[u?"Creating accountâ€¦":"Create Account",e.jsx(c,{name:"arrow_forward",className:"text-[20px]",ariaLabel:"Submit"})]})]}),e.jsxs("div",{className:"relative flex items-center py-6",children:[e.jsx("div",{className:"flex-grow border-t border-slate-300 dark:border-[#362348]"}),e.jsx("span",{className:"mx-4 flex-shrink text-xs font-medium uppercase tracking-wider text-[#ad92c9]",children:"Or join with"}),e.jsx("div",{className:"flex-grow border-t border-slate-300 dark:border-[#362348]"})]}),e.jsxs("div",{className:"flex justify-center gap-4",children:[e.jsx("button",{type:"button",className:"relative flex h-14 w-14 items-center justify-center rounded-full border border-slate-200 bg-white shadow-sm transition-colors hover:bg-slate-50 dark:border-transparent dark:bg-[#362348] dark:hover:bg-[#432c5a]","aria-label":"Sign up with Google",children:e.jsxs("svg",{className:"h-7 w-7",fill:"none",viewBox:"0 0 48 48",xmlns:"http://www.w3.org/2000/svg",children:[e.jsx("path",{d:"M43.6191 20.0076H24.2862V27.9174H35.4984C34.4601 30.7303 32.7099 32.9691 30.229 34.4055L30.1983 34.619L36.313 39.4623L36.6568 39.4996C40.6622 35.8459 43.1558 30.6713 43.6191 20.0076Z",fill:"#4285F4"}),e.jsx("path",{d:"M24.2862 44C30.4079 44 35.6322 41.9368 39.6738 38.3075L30.229 34.4055C27.6047 36.1423 24.3297 37.218 24.2862 37.218C18.4552 37.218 13.4357 33.3283 11.5976 28.187L11.2372 28.211L4.85695 33.197L4.74751 33.3136C8.80775 41.6508 15.9324 44 24.2862 44Z",fill:"#34A853"}),e.jsx("path",{d:"M11.5975 28.187C11.1394 26.8532 10.899 25.4379 10.899 24C10.899 22.5621 11.1394 21.1468 11.5975 19.813L11.5833 19.664L4.90823 14.733L4.7475 14.808C3.1207 18.0674 2.22754 21.9079 2.22754 26C2.22754 30.0921 3.1207 33.9326 4.7475 37.192L11.5975 28.187Z",fill:"#FBBC04"}),e.jsx("path",{d:"M24.2862 10.7788C27.5684 10.7788 29.8706 12.0006 31.4392 13.4795L39.8662 5.617C35.6111 2.05942 30.4079 0 24.2862 0C15.9324 0 8.80775 2.34919 4.74751 10.6864L11.5975 19.664C13.4357 14.5227 18.4552 10.7788 24.2862 10.7788Z",fill:"#EA4335"})]})}),e.jsx("button",{type:"button",className:"flex h-14 w-14 items-center justify-center rounded-full border border-slate-200 bg-white shadow-sm transition-colors hover:bg-slate-50 dark:border-transparent dark:bg-[#362348] dark:hover:bg-[#432c5a]","aria-label":"Sign up with Apple",children:e.jsx("svg",{className:"h-8 w-8 text-white",fill:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"})})]}),e.jsx("div",{className:"mt-auto flex flex-col items-center gap-4 pt-8",children:e.jsxs("p",{className:"text-sm font-medium text-[#ad92c9]",children:["Already have an account?"," ",e.jsx(q,{to:"/auth/signin",className:"font-semibold text-primary hover:underline",children:"Sign in"})]})})]})]})})};export{D as default};
