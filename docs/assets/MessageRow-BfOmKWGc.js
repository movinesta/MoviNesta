import{C as D,s as U,r as d,R as O,j as e,i as we,aq as je,ai as Z,az as ye,E as Ne}from"./index-DHFRnTo7.js";import{g as ke,h as ve,j as J,k as Ce,l as _,o as K,T as $e}from"./scroll-area-WFgP_c77.js";import{D as Ee,a as Ie}from"./dialog-Bg-HG0JV.js";import{P as Re}from"./plus-C3tuX2q7.js";import{X as De}from"./x--91eKTks.js";import{C as Ae}from"./copy-jck8F9gH.js";import{C as Ue}from"./circle-alert-C1loB_9g.js";import{C as Me}from"./check-37UNc4XQ.js";const Te=[["path",{d:"M18 6 7 17l-5-5",key:"116fxf"}],["path",{d:"m22 10-7.5 7.5L13 16",key:"ke71qq"}]],Q=D("check-check",Te);const Pe=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]],_e=D("external-link",Pe);const Se=[["path",{d:"M5 12h14",key:"1ays0h"}]],Fe=D("minus",Se);const Le=[["path",{d:"M13 21h8",key:"1jsn5i"}],["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],Oe=D("pen-line",Le);const Ge=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],He=D("rotate-ccw",Ge),C="chat-media",F=new Map,re=()=>Date.now(),ne=r=>{if(!r)return null;const t=F.get(r);return t?t.expiresAt<=re()?(F.delete(r),null):t.url:null},ze=(r,t,n)=>{if(!r||!t)return;const s=Math.max(0,n*1e3-6e4);F.set(r,{url:t,expiresAt:re()+s})},G=3600,R=r=>/^https?:\/\//i.test(r),se=(r,t)=>t&&U.storage.from(r).getPublicUrl(t).data.publicUrl||null,ae=async(r,t,n=G)=>{if(!t)return null;const{data:l,error:s}=await U.storage.from(r).createSignedUrl(t,n);return s||!l?.signedUrl?null:(ze(`${r}:${t}`,l.signedUrl,n),l.signedUrl)};async function ee(r,t,n){if(!t)return null;if(R(t))return n?.allowHttp?t:null;const l=n?.ttlSeconds??G,s=n?.allowPublicFallback??!1;if(!(n?.forceRefresh??!1)){const o=ne(`${r}:${t}`);if(o)return o}try{const o=await ae(r,t,l);if(o)return o}catch{}if(!s)return null;try{return se(r,t)}catch{return null}}async function Be(r,t,n=G){if(t&&!R(t)&&!ne(`${r}:${t}`))try{await ae(r,t,n)}catch{}}const te=async r=>{if(!r||R(r))return;const{error:t}=await U.storage.from(C).remove([r]);if(t)throw t},Ye=10*1024*1024,L={"image/jpg":"jpg","image/jpeg":"jpg","image/pjpeg":"jpg","image/png":"png","image/webp":"webp","image/gif":"gif","image/avif":"avif","image/heic":"heic","image/heif":"heif"},qe=new Set(Object.keys(L)),le=r=>{if(r.type&&L[r.type])return L[r.type];const t=r.name.split(".").pop()?.toLowerCase()??null;return t?t==="jpeg"?"jpg":["jpg","png","webp","gif","avif","heic","heif"].includes(t)?t:null:null},We=r=>{if(r.type){if(!r.type.startsWith("image/"))return{ok:!1,error:"Please choose an image file."};if(!qe.has(r.type))return{ok:!1,error:"Unsupported image format. Please choose a JPG, PNG, WebP, GIF, HEIC/HEIF, or AVIF image."}}else if(!le(r))return{ok:!1,error:"Unsupported image format. Please choose a JPG, PNG, WebP, GIF, HEIC/HEIF, or AVIF image."};return r.size>Ye?{ok:!1,error:"That image is too large (max 10MB). Try a smaller file."}:{ok:!0}},Xe=(r,t,n)=>{const l=ke(()=>String(Date.now()));return`message_attachments/${r}/${t}/${Date.now()}-${l}.${n}`};function ht(r){const{conversationId:t,userId:n,isBlocked:l,blockedYou:s,attemptSend:u}=r,[o,a]=d.useState(null),[c,x]=d.useState(!1),f=d.useRef(0),h=d.useRef(null),g=d.useCallback(()=>a(null),[]),i=d.useCallback(()=>{f.current+=1,x(!1)},[]),p=d.useCallback(()=>{!t||!n||l||s||h.current?.click()},[s,t,l,n]),b=d.useCallback(async j=>{if(!t||!n||l||s)return;a(null);const y=We(j);if(!y.ok){a(y.error);return}const $=f.current+=1;x(!0);const A=le(j);if(!A){a("Unsupported image format."),x(!1);return}const N=Xe(t,n,A);try{const{error:k}=await U.storage.from(C).upload(N,j,{cacheControl:"3600",upsert:!1});if($!==f.current){try{await te(N)}catch{}return}if(k){console.error("[useAttachmentUpload] image upload error",k),a("Upload failed. Please try another image.");return}if(Be(C,N),$!==f.current){try{await te(N)}catch{}return}u({text:"",attachmentPath:N})}catch(k){console.error("[useAttachmentUpload] sendImageFile failed",k),a("Something went wrong while sending your image.")}finally{$===f.current&&x(!1)}},[u,s,t,l,n]),M=d.useCallback(async j=>{const y=j.target.files?.[0];j.target.value="",!(!y||!t||!n)&&(c||l||s||await b(y))},[s,t,l,c,b,n]);return{fileInputRef:h,openFilePicker:p,handleImageSelected:M,sendImageFile:b,isUploadingImage:c,uploadError:o,clearUploadError:g,cancelImageUpload:i}}async function Ve(r){if(!r)return!1;try{if(typeof navigator<"u"&&navigator.clipboard?.writeText)return await navigator.clipboard.writeText(r),!0}catch{}try{if(typeof document>"u")return!1;const t=document.createElement("textarea");t.value=r,t.setAttribute("readonly",""),t.style.position="fixed",t.style.top="-9999px",t.style.left="-9999px",document.body.appendChild(t),t.select(),t.setSelectionRange(0,t.value.length);const n=document.execCommand("copy");return document.body.removeChild(t),n}catch{return!1}}const Ze=O.memo(function({isSelf:t,isDeleted:n,children:l,className:s="",role:u,tabIndex:o,...a}){const{bubbleColors:c,bubbleShape:x}=ve({isSelf:t,isDeleted:n});return e.jsx("div",{role:u??"button",tabIndex:o??0,className:we("inline-flex max-w-[85%] px-5 py-3 text-[15px] leading-relaxed transition-transform duration-150 ease-out focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring",x,c,s),...a,children:e.jsx("div",{className:"flex flex-col gap-1 text-left leading-relaxed",children:l})})}),Je=/((?:https?:\/\/|www\.)[^\s<]+[^<.,:;"')\]\s])/gi,Ke=/([A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,})/gi,Qe=/(\+?\d[\d\s().-]{7,}\d)/g,et=r=>/^https?:\/\//i.test(r)?r:/^www\./i.test(r)?`https://${r}`:r,ie=r=>r.replace(/\D/g,""),tt=r=>{const t=r.trim(),n=t.startsWith("+"),l=ie(t);return`${n?"+":""}${l}`};function rt(r,t){const n=t.trim();if(!n)return[{text:r,match:!1}];const l=r.toLowerCase(),s=n.toLowerCase(),u=[];let o=0;for(;o<r.length;){const a=l.indexOf(s,o);if(a<0){u.push({text:r.slice(o),match:!1});break}a>o&&u.push({text:r.slice(o,a),match:!1}),u.push({text:r.slice(a,a+n.length),match:!0}),o=a+n.length}return u.length?u:[{text:r,match:!1}]}function I(r,t){const n=(t??"").trim();return n?rt(r,n).map((l,s)=>l.match?e.jsx("mark",{className:"rounded bg-primary/20 px-0.5 text-foreground",children:l.text},`${s}-${l.text}`):e.jsx(O.Fragment,{children:l.text},`${s}-${l.text}`)):r}const nt=({text:r,highlight:t})=>{const n=a=>{a.stopPropagation()},l=[],s=(a,c)=>{const x=new RegExp(a);let f;for(;(f=x.exec(r))!==null;)l.push({start:f.index,end:f.index+f[0].length,kind:c,raw:f[0]})};s(Je,"url"),s(Ke,"email"),s(Qe,"phone"),l.sort((a,c)=>a.start-c.start||c.end-a.end);const u=[];let o=0;for(const a of l)if(!(a.start<o)&&!(a.kind==="phone"&&ie(a.raw).length<10)){if(a.start>o){const c=r.slice(o,a.start);u.push(I(c,t))}if(a.kind==="url"){const c=et(a.raw);u.push(e.jsx("a",{href:c,target:"_blank",rel:"noreferrer noopener",className:"underline underline-offset-2",onMouseDown:n,onClick:n,onTouchStart:n,children:I(a.raw,t)},`${a.start}-${a.raw}`))}else if(a.kind==="email")u.push(e.jsx("a",{href:`mailto:${a.raw}`,className:"underline underline-offset-2",onMouseDown:n,onClick:n,onTouchStart:n,children:I(a.raw,t)},`${a.start}-${a.raw}`));else{const c=tt(a.raw);u.push(e.jsx("a",{href:`tel:${c}`,className:"underline underline-offset-2",onMouseDown:n,onClick:n,onTouchStart:n,children:I(a.raw,t)},`${a.start}-${a.raw}`))}o=a.end}return o<r.length&&u.push(I(r.slice(o),t)),e.jsx(e.Fragment,{children:u})},st=({path:r})=>{const[t,n]=d.useState(null),[l,s]=d.useState(!1),[u,o]=d.useState(!1),a=d.useRef(!0),c=d.useRef(null),x=d.useRef(!1),f=d.useRef(null),h=d.useRef(!1),g=d.useMemo(()=>!!r,[r]);return d.useEffect(()=>()=>{a.current=!1},[]),d.useEffect(()=>{let i=!1;return c.current=r||null,x.current=!1,n(null),s(!1),r?R(r)?(n(r),()=>{i=!0}):((async()=>{try{const p=await ee(C,r,{allowPublicFallback:!0,forceRefresh:!1,allowHttp:!0});if(i||c.current!==r||!a.current)return;if(!p){s(!0);return}n(p)}catch{!i&&a.current&&c.current===r&&s(!0)}})(),()=>{i=!0}):(s(!0),()=>{i=!0})},[r]),l?e.jsx("div",{className:"mt-1 text-xs text-muted-foreground",children:"Image unavailable."}):t?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"mt-1 overflow-hidden rounded-xl border border-border bg-background/80",role:g?"button":void 0,tabIndex:g?0:void 0,onTouchStart:()=>{f.current=Date.now(),h.current=!1},onTouchEnd:()=>{if(f.current==null)return;const i=Date.now()-f.current;h.current=i>=450,f.current=null},onTouchCancel:()=>{f.current=null,h.current=!1},onClick:i=>{i.stopPropagation(),g&&(h.current||o(!0))},onKeyDown:i=>{g&&(i.key==="Enter"||i.key===" ")&&(i.preventDefault(),i.stopPropagation(),o(!0))},onContextMenu:i=>{i.stopPropagation()},"aria-label":"Open image",children:e.jsx("img",{src:t,alt:"Attachment",className:"max-h-64 w-full cursor-zoom-in object-cover",loading:"lazy",onError:async()=>{if(!(!a.current||c.current!==r)){if(R(r)){s(!0);return}try{const i=se(C,r);if(i&&t===i){s(!0);return}if(x.current){s(!0);return}x.current=!0;const p=await ee(C,r,{allowPublicFallback:!0,forceRefresh:!0,allowHttp:!0});if(!p||p===t){s(!0);return}if(!a.current||c.current!==r)return;n(p)}catch{a.current&&c.current===r&&s(!0)}}}})}),e.jsx(at,{open:u,onOpenChange:o,url:t})]}):e.jsx("div",{className:"mt-1 h-32 w-40 animate-pulse rounded-xl bg-border/40"})},S=(r,t,n)=>Math.max(t,Math.min(n,r));function at({open:r,onOpenChange:t,url:n}){const[l,s]=d.useState(1),[u,o]=d.useState({x:0,y:0}),[a,c]=d.useState(!1),x=d.useRef(!1),f=d.useRef({x:0,y:0}),h=d.useRef({x:0,y:0}),g=()=>{s(1),o({x:0,y:0})};return d.useEffect(()=>{r||g()},[r]),e.jsx(Ee,{open:r,onOpenChange:t,children:e.jsx(Ie,{className:"max-w-none w-[calc(100%-1rem)] h-[calc(100%-1rem)] max-h-none p-0 overflow-hidden bg-black border-border/30","aria-label":"Image viewer",children:e.jsxs("div",{className:"relative h-full w-full",children:[e.jsxs("div",{className:"absolute left-0 top-0 z-10 flex w-full items-center justify-between gap-2 p-3",children:[e.jsxs("div",{className:"inline-flex items-center gap-2 rounded-full bg-black/40 px-3 py-1 text-xs text-white",children:[e.jsx("span",{className:"font-medium",children:"Image"}),e.jsx("span",{className:"opacity-75",children:"Â·"}),e.jsx("span",{className:"opacity-75",children:"Scroll to zoom"})]}),e.jsxs("div",{className:"inline-flex items-center gap-2",children:[e.jsxs("button",{type:"button",className:"inline-flex h-10 items-center gap-2 rounded-full bg-black/40 px-3 text-sm text-white hover:bg-black/55",onClick:()=>{try{window.open(n,"_blank","noopener,noreferrer")}catch{}},"aria-label":"Open image in new tab",children:[e.jsx(_e,{className:"h-4 w-4","aria-hidden":!0}),e.jsx("span",{className:"hidden sm:inline",children:"Open"})]}),e.jsxs("div",{className:"inline-flex items-center gap-1 rounded-full bg-black/40 p-1 text-white",children:[e.jsx("button",{type:"button",className:"inline-flex h-9 w-9 items-center justify-center rounded-full hover:bg-white/10",onClick:()=>s(i=>S(Number((i-.25).toFixed(2)),1,4)),"aria-label":"Zoom out",children:e.jsx(Fe,{className:"h-4 w-4","aria-hidden":!0})}),e.jsx("button",{type:"button",className:"inline-flex h-9 w-9 items-center justify-center rounded-full hover:bg-white/10",onClick:()=>s(i=>S(Number((i+.25).toFixed(2)),1,4)),"aria-label":"Zoom in",children:e.jsx(Re,{className:"h-4 w-4","aria-hidden":!0})}),e.jsx("button",{type:"button",className:"inline-flex h-9 w-9 items-center justify-center rounded-full hover:bg-white/10",onClick:g,"aria-label":"Reset view",children:e.jsx(He,{className:"h-4 w-4","aria-hidden":!0})})]}),e.jsx("button",{type:"button",className:"inline-flex h-10 w-10 items-center justify-center rounded-full bg-black/40 text-white hover:bg-black/55",onClick:()=>t(!1),"aria-label":"Close",children:e.jsx(De,{className:"h-5 w-5","aria-hidden":!0})})]})]}),e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",onWheel:i=>{if(l<=1)return;i.preventDefault();const p=-i.deltaY,b=S(Number((l+p*.002).toFixed(2)),1,4);s(b)},onDoubleClick:()=>{s(i=>i===1?2:1),o({x:0,y:0})},onPointerDown:i=>{l<=1||(x.current=!0,c(!0),f.current={x:i.clientX,y:i.clientY},h.current=u,i.currentTarget.setPointerCapture?.(i.pointerId))},onPointerMove:i=>{if(!x.current)return;const p=i.clientX-f.current.x,b=i.clientY-f.current.y;o({x:h.current.x+p,y:h.current.y+b})},onPointerUp:()=>{x.current=!1,c(!1)},onPointerCancel:()=>{x.current=!1,c(!1)},children:e.jsx("img",{src:n,alt:"Attachment",className:"max-h-full max-w-full select-none object-contain",draggable:!1,style:{transform:`translate3d(${u.x}px, ${u.y}px, 0) scale(${l})`,transformOrigin:"center",transition:a?"none":"transform 120ms ease-out",cursor:l>1?"grab":"zoom-in"}})})]})})})}const lt=["ðŸ‘","â¤ï¸","ðŸ˜‚","ðŸ˜®","ðŸ˜¢","ðŸ™","ðŸ”¥","ðŸ˜"],pt=O.memo(function({message:t,meta:n,sender:l,isSelf:s,deliveryStatus:u,showDeliveryStatus:o,reactions:a,index:c,previousMessage:x,nextMessage:f,firstUnreadIndex:h,activeActionMessageId:g,longPressTriggeredRef:i,onOpenMessageActions:p,onCloseMessageActions:b,onOpenEditDialog:M,onOpenDeleteDialog:j,onToggleReaction:y,onRetryMessage:$,onDiscardFailedMessage:A,onBubbleTouchStart:N,onBubbleTouchEndOrCancel:k,searchQuery:oe,isSearchMatch:H,isActiveSearchMatch:ce}){const z=x!=null&&x.senderId===t.senderId,B=f!=null&&f.senderId===t.senderId,ue=z&&J(x.createdAt,t.createdAt),de=B&&J(t.createdAt,f.createdAt),Y=!(z&&ue),fe=!(B&&de),me=h!=null&&c===h,q=c===0||x!=null&&!Ce(new Date(x.createdAt),new Date(t.createdAt)),xe=c===0||q?"mt-0":Y?"mt-3":"mt-1.5",w=n.deleted===!0,W=n.editedAt,X=n.deletedAt,T=_(t.createdAt),E=l?.displayName??(s?"You":"Someone"),v=je(t.body),V=(oe??"").trim(),he=!!(V&&H&&!w),pe=(()=>{const m=s?"You":E;return w?`${m} deleted a message`:v?`${m} said: ${v}`:t.attachmentUrl?`${m} sent an attachment`:`${m} sent a message`})(),ge=!s&&fe,P=()=>{if(i.current){i.current=!1;return}g===t.id?b():p(t)};return e.jsxs("div",{className:"px-0",children:[q&&e.jsx("div",{className:"my-4 flex items-center justify-center",children:e.jsxs("div",{className:"inline-flex items-center gap-3 text-xs text-muted-foreground",children:[e.jsx("span",{className:"h-px w-12 bg-border","aria-hidden":"true"}),e.jsx("span",{className:"rounded-full bg-muted px-3 py-0.5 text-xs font-medium text-muted-foreground",children:K(t.createdAt)}),e.jsx("span",{className:"h-px w-12 bg-border","aria-hidden":"true"})]})}),me&&e.jsx("div",{className:"my-4 flex items-center justify-center",role:"separator","aria-label":"New messages",children:e.jsxs("div",{className:"inline-flex items-center gap-3 text-xs text-primary",children:[e.jsx("span",{className:"h-px w-12 bg-border","aria-hidden":"true"}),e.jsx("span",{className:"rounded-full bg-primary/10 px-3 py-0.5 text-xs font-semibold text-primary",children:"New messages"}),e.jsx("span",{className:"h-px w-12 bg-border","aria-hidden":"true"})]})}),Y&&e.jsx("div",{className:`mb-1 flex ${s?"justify-end pr-1":"justify-start pl-9"}`,children:e.jsxs("div",{className:"inline-flex max-w-full items-center gap-2 rounded-full border border-border bg-muted/80 px-2.5 py-1 text-[11px] text-muted-foreground shadow-sm","aria-label":`Start of new message from ${s?"You":E} at ${T}`,title:`${s?"You":E} Â· ${K(t.createdAt)} ${T}`,children:[e.jsx("span",{className:"max-w-[10rem] truncate text-foreground",children:s?"You":E}),e.jsx("span",{className:"h-1 w-1 rounded-full bg-border","aria-hidden":!0}),e.jsx("span",{children:T})]})}),e.jsxs("div",{className:`flex w-full flex-col gap-0.5 ${xe}`,children:[e.jsxs("div",{className:`flex w-full items-end gap-2 ${s?"justify-end":"justify-start"}`,children:[!s&&e.jsx(e.Fragment,{children:ge?e.jsx("div",{className:"mt-auto h-7 w-7 flex-shrink-0 overflow-hidden rounded-full bg-muted",children:l?.avatarUrl?e.jsx("img",{src:l.avatarUrl,alt:l.displayName??void 0,className:"h-full w-full object-cover",loading:"lazy"}):e.jsx("div",{className:"flex h-full w-full items-center justify-center text-xs font-medium text-muted-foreground",children:E.slice(0,2).toUpperCase()})}):e.jsx("div",{className:"mt-auto h-7 w-7 flex-shrink-0"})}),e.jsxs(Ze,{isSelf:s,isDeleted:w,"data-message-action-scope":t.id,className:w?"":ce?"ring-2 ring-primary/60":H?"ring-2 ring-primary/25":"",onClick:P,onContextMenu:m=>{m.preventDefault(),P()},onKeyDown:m=>{(m.key==="Enter"||m.key===" ")&&(m.preventDefault(),P())},onTouchStart:()=>N(t),onTouchEnd:k,onTouchCancel:k,"aria-label":pe,children:[v&&e.jsx("p",{className:"whitespace-pre-wrap break-words [overflow-wrap:anywhere] text-sm leading-snug",children:e.jsx(nt,{text:v,highlight:he?V:void 0})}),!w&&t.attachmentUrl&&e.jsx(st,{path:t.attachmentUrl})]})]}),a.length>0&&e.jsx("div",{className:`mt-0.5 flex w-full ${s?"justify-end pr-6":"justify-start pl-6"}`,children:e.jsx("div",{className:"inline-flex flex-wrap items-center gap-1 rounded-full bg-muted px-1.5 py-0.5 text-xs text-foreground",children:a.map(m=>e.jsxs("button",{type:"button",onClick:()=>y(t.id,m.emoji),className:`inline-flex items-center gap-1 rounded-full px-1.5 py-0.5 transition hover:bg-background ${m.reactedBySelf?"bg-primary/10":""}`,children:[e.jsx("span",{className:"text-[17px]",children:m.emoji}),m.count>1&&e.jsx("span",{className:"text-xs text-muted-foreground",children:m.count})]},m.emoji))})}),g===t.id&&!w&&e.jsx("div",{className:`mt-1 flex w-full ${s?"justify-end pr-6":"justify-start pl-6"}`,children:e.jsxs("div",{className:"inline-flex flex-col items-stretch gap-1 rounded-2xl bg-muted px-2.5 py-1.5 text-xs text-foreground select-none","data-message-action-scope":t.id,children:[e.jsx("div",{className:"flex items-center justify-center gap-1",children:lt.map(m=>e.jsx("button",{type:"button",onClick:()=>{y(t.id,m),b()},className:"flex h-7 w-7 items-center justify-center rounded-full transition hover:bg-background",children:e.jsx("span",{className:"text-[17px]",children:m})},m))}),e.jsxs("div",{className:`mt-1 flex flex-wrap items-center gap-2 ${s?"justify-end":"justify-start"}`,children:[v?e.jsxs("button",{type:"button",onClick:async()=>{await Ve(v)?Z.show("Copied to clipboard."):Z.error("Couldn't copy to clipboard."),b()},className:"inline-flex items-center gap-1 rounded-full px-2.5 py-1 text-xs text-muted-foreground hover:bg-background",children:[e.jsx(Ae,{className:"h-3.5 w-3.5","aria-hidden":!0}),e.jsx("span",{children:"Copy"})]}):null,s?(()=>{if(t.attachmentUrl||w)return null;const m=ye(t.body);return m!=="text"&&m!=="unknown"?null:e.jsxs("button",{type:"button",onClick:be=>M(t,be.currentTarget),className:"inline-flex items-center gap-1 rounded-full px-2.5 py-1 text-xs text-muted-foreground hover:bg-background",children:[e.jsx(Oe,{className:"h-3.5 w-3.5","aria-hidden":!0}),e.jsx("span",{children:"Edit"})]})})():null,s?e.jsxs("button",{type:"button",onClick:()=>j(t),className:"inline-flex items-center gap-1 rounded-full px-2.5 py-1 text-xs text-destructive hover:bg-destructive/10",children:[e.jsx($e,{className:"h-3.5 w-3.5","aria-hidden":!0}),e.jsx("span",{children:"Delete"})]}):null]})]})}),o&&u&&e.jsx("div",{className:`flex items-center gap-1 text-xs text-muted-foreground ${s?"justify-end pr-1":"justify-start pl-7"}`,children:u.status==="failed"?e.jsxs(e.Fragment,{children:[e.jsx(Ue,{className:"h-3 w-3 text-destructive","aria-hidden":!0}),e.jsx("span",{children:"Failed to send."}),e.jsx("button",{type:"button",className:"text-destructive underline",onClick:()=>$(t),children:"Retry"}),e.jsx("span",{"aria-hidden":"true",children:"Â·"}),e.jsx("button",{type:"button",className:"text-destructive underline",onClick:()=>A(t),children:"Discard"})]}):u.status==="sending"?e.jsxs(e.Fragment,{children:[e.jsx(Ne,{className:"h-3 w-3 animate-spin","aria-hidden":!0}),e.jsx("span",{children:"Sendingâ€¦"})]}):u.status==="sent"?e.jsxs(e.Fragment,{children:[e.jsx(Me,{className:"h-3 w-3","aria-hidden":!0}),e.jsx("span",{children:"Sent"})]}):u.status==="delivered"?e.jsxs(e.Fragment,{children:[e.jsx(Q,{className:"h-3 w-3","aria-hidden":!0}),e.jsx("span",{children:"Delivered"})]}):e.jsxs(e.Fragment,{children:[e.jsx(Q,{className:"h-3 w-3","aria-hidden":!0}),e.jsx("span",{children:"Seen"})]})}),w&&X&&e.jsxs("p",{className:`text-xs text-muted-foreground ${s?"text-right pr-1":"text-left pl-7"}`,children:["Deleted ",_(X)]}),!w&&W&&e.jsxs("p",{className:`text-xs text-muted-foreground ${s?"text-right pr-1":"text-left pl-7"}`,children:["Edited ",_(W)]})]})]},t.id)});export{C,pt as M,Ve as c,R as i,te as r,ht as u};
