import{c as N,j as e,aa as R,R as v,r as C}from"./index-DyWq_Gt8.js";import{C as w}from"./Chip-bJF3TJYc.js";import{Y as L}from"./index-LadubUCe.js";import{S as y}from"./sparkles-Bx_Gyw2G.js";import{B as k}from"./bookmark-plus-BktNhIJb.js";import{S as p}from"./star-DjoVrBLJ.js";import"./index-vAwoU-j0.js";const M=[["path",{d:"m19 21-7-4-7 4V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v16z",key:"1fy3hk"}],["line",{x1:"15",x2:"9",y1:"10",y2:"10",key:"1gty7f"}]],I=N("bookmark-minus",M);const E=[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}]],b=N("message-square",E),U={teal:"bg-primary/25 text-primary",violet:"bg-primary/25 text-primary",orange:"bg-primary/20 text-primary"},c=({children:s})=>e.jsx(w,{className:"gap-1 px-2 py-0.5 text-xs shadow-md",children:s}),d=({title:s})=>e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"h-12 w-8 overflow-hidden rounded-lg bg-muted shadow-lg",children:s.posterUrl?e.jsx("img",{src:s.posterUrl,alt:s.name,className:"h-full w-full object-cover"}):e.jsx("div",{className:"h-full w-full bg-gradient-to-br from-primary/45 via-background/40 to-primary/75"})}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("p",{className:"truncate text-[12px] font-medium text-foreground",children:s.name}),e.jsx("p",{className:"text-xs text-muted-foreground",children:s.mediaType??"title"})]})]}),n=({item:s})=>{const r=s.user;return e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`grid h-9 w-9 place-items-center overflow-hidden rounded-full ${U[r.avatarColor]}`,children:r.avatarUrl?e.jsx("img",{src:r.avatarUrl,alt:r.displayName,className:"h-full w-full object-cover"}):e.jsx("span",{className:"text-xs font-semibold",children:r.displayName.slice(0,2).toUpperCase()})}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("p",{className:"truncate text-sm font-medium text-foreground",children:r.displayName}),e.jsx("p",{className:"text-xs text-muted-foreground",children:s.relativeTime})]})]})},i=({children:s})=>e.jsx("div",{className:"rounded-2xl border border-border/50 bg-card/60 p-4 shadow-md backdrop-blur",children:e.jsx("div",{className:"flex flex-col gap-3",children:s})}),_=({item:s})=>{switch(s.kind){case"friend-rating":return e.jsxs(i,{children:[e.jsx(n,{item:s}),e.jsx(d,{title:s.title}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsxs(c,{children:[e.jsx(p,{className:"h-3 w-3","aria-hidden":!0}),e.jsx("span",{className:"font-medium",children:s.rating})]}),s.emoji&&e.jsx(c,{children:s.emoji})]}),s.reviewSnippet&&e.jsxs("p",{className:"text-xs text-muted-foreground",children:["“",s.reviewSnippet,"”"]})]});case"friend-review":return e.jsxs(i,{children:[e.jsx(n,{item:s}),e.jsx(d,{title:s.title}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[typeof s.rating=="number"&&e.jsxs(c,{children:[e.jsx(p,{className:"h-3 w-3","aria-hidden":!0}),e.jsx("span",{className:"font-medium",children:s.rating})]}),s.emoji&&e.jsx(c,{children:s.emoji})]}),s.reviewSnippet&&e.jsxs("p",{className:"text-xs text-muted-foreground",children:["“",s.reviewSnippet,"”"]})]});case"watchlist-add":return e.jsxs(i,{children:[e.jsx(n,{item:s}),e.jsx(d,{title:s.title}),e.jsxs("div",{className:"inline-flex items-center gap-1 text-xs text-muted-foreground",children:[e.jsx(k,{className:"h-3 w-3","aria-hidden":!0}),"Added to watchlist"]}),s.note&&e.jsx("p",{className:"text-xs text-muted-foreground",children:s.note})]});case"watchlist-remove":return e.jsxs(i,{children:[e.jsx(n,{item:s}),e.jsx(d,{title:s.title}),e.jsxs("div",{className:"inline-flex items-center gap-1 text-xs text-muted-foreground",children:[e.jsx(I,{className:"h-3 w-3","aria-hidden":!0}),"Removed from watchlist"]})]});case"recommendation":return e.jsxs(i,{children:[e.jsx(n,{item:s}),e.jsx(d,{title:s.title}),e.jsxs("div",{className:"inline-flex items-center gap-1 text-xs text-muted-foreground",children:[e.jsx(y,{className:"h-3 w-3","aria-hidden":!0}),"Recommended for you"]}),s.reason&&e.jsx("p",{className:"text-xs text-muted-foreground",children:s.reason})]});default:return null}},A=[{key:"all",label:"All",icon:b},{key:"ratings",label:"Ratings",icon:p},{key:"reviews",label:"Reviews",icon:b},{key:"watchlist",label:"Watchlist",icon:k},{key:"recommendations",label:"Recs",icon:y}],T=(s,r,l)=>(()=>{switch(r){case"ratings":return s.kind==="friend-rating";case"reviews":return s.kind==="friend-review";case"watchlist":return s.kind==="watchlist-add";case"recommendations":return s.kind==="recommendation";case"all":default:return!0}})()?l==="reviews"?s.kind==="friend-review":l==="follows"?s.kind==="friend-rating"||s.kind==="friend-review"||s.kind==="watchlist-add":!0:!1,h=()=>e.jsx("div",{className:"space-y-2",children:[0,1,2].map(s=>e.jsxs("div",{className:"space-y-2 rounded-2xl border border-border bg-card/70 p-3 text-xs shadow-lg",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"h-8 w-8 animate-pulse rounded-full bg-border/60"}),e.jsxs("div",{className:"flex-1 space-y-1",children:[e.jsx("div",{className:"h-3 w-24 animate-pulse rounded bg-border/60"}),e.jsx("div",{className:"h-2.5 w-16 animate-pulse rounded bg-border/50"})]})]}),e.jsx("div",{className:"h-12 w-20 animate-pulse rounded bg-border/60"}),e.jsx("div",{className:"h-3 w-full animate-pulse rounded bg-border/40"})]},`feed-skeleton-${s}`))}),B=()=>e.jsx("div",{className:"rounded-2xl border border-dashed border-border bg-card/60 p-4 text-center text-xs text-muted-foreground",children:"Your friends’ activity will show up here once they start rating and reviewing titles."}),K=({quickFilter:s})=>{const{items:r,isLoading:l,hasMore:o,isLoadingMore:x,loadMore:S,error:f}=R(),[m,F]=v.useState("all"),j=C.useMemo(()=>r.filter(a=>T(a,m,s)),[r,m,s]),g=()=>{o&&!x&&S()};return e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:"flex flex-wrap items-center gap-2",children:A.map(a=>{const t=m===a.key,u=a.icon;return e.jsx("button",{type:"button",onClick:()=>F(a.key),"aria-pressed":t,className:"focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-primary/60 focus-visible:ring-offset-2 focus-visible:ring-offset-background",children:e.jsxs(w,{variant:t?"accent":"outline",className:"flex items-center gap-1",children:[e.jsx(u,{className:"h-3.5 w-3.5","aria-hidden":"true"}),e.jsx("span",{children:a.label})]})},a.key)})}),f&&e.jsx("div",{role:"alert",className:"rounded-2xl border border-destructive/50 bg-destructive/10 px-3 py-2 text-xs text-destructive",children:f}),l?e.jsxs("div",{className:"space-y-2",children:[e.jsx(h,{}),e.jsx(h,{}),e.jsx(h,{})]}):j.length===0?e.jsx(B,{}):e.jsx(L,{style:{height:"70vh"},data:j,computeItemKey:(a,t)=>t.id,endReached:g,components:{List:v.forwardRef(function(t,u){return e.jsx("div",{ref:u,className:"space-y-3",...t})}),Footer:()=>e.jsx("div",{className:"pt-1",children:o?e.jsx("button",{type:"button",onClick:g,disabled:x,className:"mx-auto flex items-center justify-center rounded-full border border-border bg-card px-3 py-1.5 text-xs text-muted-foreground shadow-md disabled:opacity-60",children:x?"Loading more...":"Load more"}):e.jsx("p",{className:"py-2 text-center text-xs text-muted-foreground",children:"You're all caught up."})})},itemContent:(a,t)=>e.jsx("div",{className:"pb-1",children:e.jsx(_,{item:t})})})]})};export{h as FeedSkeleton,K as default};
