import{c as f,k as y,u as N,R as r,j as e,s as w}from"./index-DyWq_Gt8.js";import{T as v}from"./TopBar-Cwkp26YK.js";import{a as k}from"./format-DMUSBM01.js";import{M as S}from"./mail-qOURQGbS.js";import{C as M}from"./circle-alert-CuBiG10P.js";const C=[["path",{d:"M2.586 17.414A2 2 0 0 0 2 18.828V21a1 1 0 0 0 1 1h3a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h1a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h.172a2 2 0 0 0 1.414-.586l.814-.814a6.5 6.5 0 1 0-4-4z",key:"1s6t7t"}],["circle",{cx:"16.5",cy:"7.5",r:".5",fill:"currentColor",key:"w0ekpg"}]],g=f("key-round",C);const P=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],R=f("log-out",P),D=()=>{const{user:s,signOut:p}=y(),i=N(),[a,d]=r.useState(!1),[l,t]=r.useState(null),[n,c]=r.useState(!1),[u,x]=r.useState(null),m=s?.created_at?new Date(s.created_at):null,b=async()=>{if(!a){d(!0),t(null);try{await p(),i("/auth/signin")}catch(o){t(o.message??"Something went wrong while signing out."),d(!1)}}},j=async()=>{if(!s?.email||n)return;x(null),t(null),c(!0);const o=`${window.location.origin}/auth/reset-password`,{error:h}=await w.auth.resetPasswordForEmail(s.email,{redirectTo:o});h?t(h.message??"Unable to send reset email right now."):x("Check your inbox for a password reset link. It may take a minute to arrive."),c(!1)};return s?e.jsxs("div",{className:"flex flex-1 flex-col gap-4 pb-2 pt-1",children:[e.jsx(v,{title:"Account",subtitle:"Manage the account you use to sign in to MoviNesta."}),e.jsxs("section",{className:"space-y-4 px-4 pb-24",children:[e.jsxs("div",{className:"space-y-3 rounded-2xl border border-border bg-card/80 p-4 shadow-lg",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("span",{className:"inline-flex h-8 w-8 items-center justify-center rounded-full bg-border/50",children:e.jsx(S,{className:"h-4 w-4 text-muted-foreground","aria-hidden":"true"})}),e.jsxs("div",{className:"space-y-0.5",children:[e.jsx("h2",{className:"text-sm font-heading font-semibold text-foreground",children:"Email"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"This is the email you use to sign in."})]})]}),e.jsxs("div",{className:"rounded-md border border-dashed border-border bg-background/40 px-3 py-2 text-xs text-muted-foreground",children:[e.jsxs("div",{className:"flex items-center justify-between gap-3",children:[e.jsx("span",{className:"font-mono text-xs text-foreground",children:s.email??"No email on file"}),e.jsx("span",{className:"rounded-full bg-background px-2 py-0.5 text-xs uppercase tracking-[0.18em] text-muted-foreground",children:"Primary"})]}),m&&e.jsxs("p",{className:"mt-1 text-xs text-muted-foreground",children:["Joined on"," ",k(m,{year:"numeric",month:"short",day:"2-digit"})]})]})]}),e.jsxs("div",{className:"space-y-3 rounded-2xl border border-border bg-card/80 p-4 shadow-lg",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("span",{className:"inline-flex h-8 w-8 items-center justify-center rounded-full bg-border/50",children:e.jsx(g,{className:"h-4 w-4 text-muted-foreground","aria-hidden":"true"})}),e.jsxs("div",{className:"space-y-0.5",children:[e.jsx("h2",{className:"text-sm font-heading font-semibold text-foreground",children:"Password & security"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Send yourself a reset link to change your MoviNesta password."})]})]}),e.jsxs("div",{className:"flex flex-col gap-2 rounded-md border border-border bg-background/60 px-3 py-2",children:[e.jsxs("p",{className:"text-xs text-muted-foreground",children:["We'll email a secure link to ",e.jsx("span",{className:"font-mono",children:s.email}),e.jsx("br",{}),"so you can choose a new password."]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsxs("button",{type:"button",onClick:j,disabled:n,className:"inline-flex items-center gap-1.5 rounded-full bg-primary/10 px-3 py-1.5 text-xs font-semibold text-primary-foreground transition hover:bg-primary/90 focus:outline-none focus:ring-2 focus:ring-primary/30 disabled:opacity-70",children:[e.jsx(g,{className:"h-3.5 w-3.5","aria-hidden":"true"}),e.jsx("span",{children:n?"Sending link…":"Send reset link"})]}),e.jsx("button",{type:"button",onClick:()=>i("/auth/forgot-password",{state:{email:s.email}}),className:"text-xs font-medium text-muted-foreground underline-offset-4 transition hover:text-foreground hover:underline focus:outline-none focus:ring-2 focus:ring-primary/30",children:"Open reset page"})]}),u&&e.jsxs("p",{className:"flex items-center gap-1.5 text-xs text-emerald-400",children:[e.jsx("span",{"aria-hidden":"true",children:"•"}),e.jsx("span",{children:u})]})]})]}),e.jsxs("div",{className:"space-y-2 rounded-2xl border border-border bg-card/80 p-4 shadow-lg",children:[e.jsxs("div",{className:"flex items-center justify-between gap-3",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx("h2",{className:"text-sm font-heading font-semibold text-foreground",children:"Sign out"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"You'll need to sign in again to use MoviNesta on this device."})]}),e.jsxs("button",{type:"button",onClick:b,disabled:a,className:"inline-flex items-center gap-1.5 rounded-full border border-border px-3 py-1.5 text-xs font-medium text-muted-foreground transition hover:border-destructive/70 hover:bg-destructive/10 hover:text-destructive disabled:opacity-70",children:[e.jsx(R,{className:"h-3.5 w-3.5","aria-hidden":"true"}),e.jsx("span",{children:a?"Signing out…":"Sign out"})]})]}),l&&e.jsxs("p",{className:"mt-1 flex items-center gap-1.5 text-xs text-destructive",children:[e.jsx(M,{className:"h-3.5 w-3.5","aria-hidden":"true"}),e.jsx("span",{children:l})]})]})]})]}):e.jsx("div",{className:"flex flex-1 flex-col items-center justify-center px-4",children:e.jsxs("div",{className:"max-w-md rounded-2xl border border-border bg-card/80 px-4 py-6 text-center text-sm text-foreground shadow-lg",children:[e.jsx("h1",{className:"text-base font-heading font-semibold",children:"You're signed out"}),e.jsx("p",{className:"mt-2 text-xs text-muted-foreground",children:"Sign in to view and manage your account."})]})})};export{D as default};
