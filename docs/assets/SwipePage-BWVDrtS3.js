import{s as Ft,n as Xe,o as It,e as vr,r as i,v as ar,h as bs,k as ws,l as gs,w as ys,x as jr,q as dt,y as vs,t as lr,j as e,B as js,u as Nr,R as or,b as kr,c as hn,z as Ns,A as ks}from"./index-n01z0Q-I.js";import{M as _}from"./material-icon-ik9c9RPC.js";import{b as _s}from"./useDiaryLibrary-CAOnuwIC.js";import{u as Ms}from"./scroll-area-C4ZR_b2m.js";import"./textarea-YFcVWJTl.js";import{D as _r,a as Mr,b as Sr,c as Rr,d as Ss}from"./dialog-xEYVlW9E.js";import{a as Rs}from"./appUrl-BIFKGN0O.js";import{F as cr}from"./FriendAvatarStack-aEVtr7sl.js";import{V as Cs}from"./VerifiedBadge-BK7Fjn_d.js";import"./conversationsCache-D_XJbltN.js";import"./format-BXv9LLlt.js";import"./external-link-CU7gT4Sf.js";import"./plus-BLvVO9lE.js";import"./x-CfKoriA-.js";import"./copy-gGjX7HRl.js";import"./circle-alert-CmdS_X1p.js";import"./index-DNnSGIb8.js";const Cr="mn_rec_experiment_assignments_v1";function Is(){if(typeof window>"u")return null;try{const n=window.localStorage.getItem(Cr);if(!n)return null;const s=JSON.parse(n);return s?.v!==1||typeof s.ts!="number"||typeof s.assignments!="object"?null:s}catch{return null}}function Ts(n){if(!(typeof window>"u"))try{const s={v:1,ts:Date.now(),assignments:n};window.localStorage.setItem(Cr,JSON.stringify(s))}catch{}}async function Fs(n,s){const c=s?.ttlMs,x=[...new Set((n??[]).map(O=>String(O).trim()).filter(Boolean))].slice(0,20);if(!x.length)return{};const I=Is();if(I&&Date.now()-I.ts<c){const O={};for(const W of x)I.assignments?.[W]&&(O[W]=I.assignments[W]);if(Object.keys(O).length===x.length)return O}const w=await Ft.functions.invoke("experiment-assign",{body:{keys:x}});if(w.error)throw w.error;const M=w.data?.assignments??{};if(M&&typeof M=="object"){const O={...I?.assignments??{},...M};Ts(O)}return M}const yn="movi_swipe_event_queue_v1";function Es(n){if(!n)return[];try{const s=JSON.parse(n);return Array.isArray(s)?s.filter(Boolean):[]}catch{return[]}}function vn(){return Es(It(yn))}function St(n){const s=vn();s.push({...n,queuedAt:Date.now()});const c=s.slice(-200);Xe(yn,JSON.stringify(c))}function As(n){if(!n.length)return;const s=new Set(n),c=vn().filter(x=>!x.clientEventId||!s.has(x.clientEventId));Xe(yn,JSON.stringify(c))}function Ps(n){return"combined"}function Ls(n){if(!n)return null;const s=n.replace("-","_");return s==="for_you"?"for-you":s==="friends"?"from-friends":s==="trending"?"trending":s==="popular"?"popular":s==="explore"?"explore":s==="combined"?"combined":null}function dr(n){return n==="like"?"like":n==="dislike"?"dislike":"skip"}function Le(){return typeof crypto<"u"&&"randomUUID"in crypto?crypto.randomUUID():vs()}function Ds(n){const s=typeof n.posterUrl=="string"?n.posterUrl.trim():"",c=(s&&s.toLowerCase()!=="n/a"?s:"")||(n.tmdbPosterPath?lr(n.tmdbPosterPath,"w500")??"":"")||(n.tmdbBackdropPath?lr(n.tmdbBackdropPath,"w780")??"":"");if(!c)return null;const x=(n.title??"").trim()||"Untitled";return{...n,posterUrl:c,title:x}}function Os(n,s){if(typeof window>"u"||s<=0||navigator.connection?.saveData)return;const I=window.requestIdleCallback??(N=>window.setTimeout(N,300)),w=n.slice(0,s);I(()=>{for(const N of w){if(!N.posterUrl)continue;const M=new Image;M.decoding="async",M.loading="lazy",M.src=N.posterUrl}})}function $s(n,s){const c=s?.limit??60,x=s?.prefetchImages??6,I=s?.dwellThresholdMs??1200,w=s?.dwellDebounceMs??8e3,N=s?.invalidateHomeQueries??!1,M=vr(),O=i.useRef([]),W=i.useRef(null),$=i.useRef(new Map);i.useEffect(()=>{let o=!1;const d=async()=>{if(o)return;const y=vn();if(!y.length)return;const E=[],k=25;for(let Y=0;Y<y.length;Y+=k){if(o)return;const ce=y.slice(Y,Y+k);try{const Qe=ce.map(z=>({sessionId:z.sessionId,deckId:z.deckId??null,recRequestId:z.recRequestId??null,position:z.position??null,mediaItemId:z.mediaItemId,source:z.source??null,events:[{eventType:z.eventType,dwellMs:z.dwellMs??null,rating0_10:z.rating0_10??null,inWatchlist:z.inWatchlist??null,clientEventId:z.clientEventId??null,payload:z.payload??null}]}));if((await ar(Qe)).ok)for(const z of ce)z.clientEventId&&E.push(z.clientEventId);else break}catch{break}}E.length&&As(E)};d();const v=()=>{d()};return window.addEventListener("online",v),()=>{o=!0,window.removeEventListener("online",v)}},[]);const g=i.useRef({}),X=i.useCallback(async o=>{const d=O.current;if(!d.length)return;const y=o?d.splice(0,d.length):d.splice(0,Math.min(25,d.length));for(const k of y)k.clientEventId||(k.clientEventId=Le()),$.current.set(k.clientEventId,k);const E=y.map(k=>({sessionId:k.sessionId,deckId:k.deckId??null,recRequestId:k.recRequestId??null,position:k.position??null,mediaItemId:k.mediaItemId,source:k.source??null,events:[{eventType:k.eventType,dwellMs:k.dwellMs??null,rating0_10:k.rating0_10??null,inWatchlist:k.inWatchlist??null,clientEventId:k.clientEventId??null,payload:k.payload??null}]}));try{if(!(await ar(E)).ok)for(const Y of y)St(Y);for(const Y of y)Y.clientEventId&&$.current.delete(Y.clientEventId)}catch{for(const k of y)St(k);for(const k of y)k.clientEventId&&$.current.delete(k.clientEventId)}},[]),je=i.useCallback(o=>{if(o.clientEventId||(o.clientEventId=Le()),O.current.push(o),O.current.length>=25){X();return}W.current==null&&(W.current=window.setTimeout(()=>{W.current=null,X()},1e3))},[X]),Ne=i.useCallback(()=>{W.current!=null&&(window.clearTimeout(W.current),W.current=null);const o=O.current;if(o.length){const v=o.splice(0,o.length);for(const y of v)St(y)}const d=$.current;if(d.size){for(const v of d.values())St(v);d.clear()}},[]);i.useEffect(()=>{const o=()=>Ne(),d=()=>Ne();return window.addEventListener("pagehide",o),window.addEventListener("beforeunload",d),()=>{window.removeEventListener("pagehide",o),window.removeEventListener("beforeunload",d),Ne()}},[Ne]),i.useEffect(()=>{const o=()=>{document.visibilityState==="hidden"&&X(!0)};return document.addEventListener("visibilitychange",o),()=>document.removeEventListener("visibilitychange",o)},[X]);const S=i.useMemo(()=>bs(),[]),te=i.useMemo(()=>Ps(),[n]);i.useEffect(()=>{let o=!1;return(async()=>{try{const d=await Fs(["swipe_pipeline_v1","swipe_rerank_v1","swipe_diversity_v1","swipe_mix_v1","swipe_cf_v1","swipe_blend_v1"],{ttlMs:216e5});o||(g.current=d)}catch{}})(),()=>{o=!0}},[]);const ut=i.useRef(new Set),we=i.useRef(!1),Oe=i.useRef(0),Et=i.useRef(null),He=i.useRef(new Set),Ke=i.useRef(new Map),[ke,mt]=i.useState({status:"idle",cards:[],errorMessage:null}),[Ge,q]=i.useState(null),Z=i.useCallback(o=>{mt(d=>typeof o=="function"?o(d):o)},[]),$e=i.useCallback(o=>{if(!o.length)return 0;const d=ut.current,v=[];for(const y of o){if(d.has(y.id))continue;const E=Ds(y);d.add(y.id),E&&v.push(E)}return v.length?(Z(y=>{const E={...y,status:"ready",cards:[...y.cards,...v],errorMessage:null};return Os(v,x),E}),v.length):0},[x,Z]),H=i.useCallback(async(o=c)=>{if(!we.current){we.current=!0,Z(d=>({...d,status:d.cards.length?"ready":"loading",errorMessage:null}));try{const d=s?.kindFilter??null,v=s?.seed??ws(S,te,d);Et.current!==v&&(Et.current=v,Oe.current=0);const y=3;let E=0,k=0;for(;E<y&&k===0;){const Y=`${v}:${Oe.current}`;Oe.current+=1;const ce=await gs({sessionId:S,mode:te,kindFilter:d??void 0,limit:o,seed:Y,minImdbRating:s?.minImdbRating??null,genresAny:s?.genresAny??null,experiments:Object.keys(g.current??{}).length?g.current:null},{timeoutMs:25e3}),Qe=ce.deckId,ye=ce.recRequestId??null,z=(ce.cards??[]).map((de,Ze)=>({...de,id:de.mediaItemId,deckId:Qe,recRequestId:ye,position:Ze,source:Ls(de.source??n)}));if(!z.length){Z(de=>({...de,status:de.cards.length?"ready":"exhausted",errorMessage:null}));return}if(k=$e(z),k>0)break;E+=1,console.warn("[useMediaSwipeDeck] filtered out all cards (missing OMDb poster?). Retrying...",{attempt:E,mode:te,kind:n,batchSize:o})}k===0&&Z(Y=>({...Y,status:Y.cards.length?"ready":"exhausted",errorMessage:null}))}catch(d){const v=d instanceof Error?d.message:typeof d=="string"?d:"We couldn't load swipe cards.";Z(y=>({...y,status:"error",errorMessage:v}))}finally{we.current=!1}}},[$e,c,te,s?.kindFilter,s?.minImdbRating,JSON.stringify(s?.genresAny??[]),s?.seed,S,Z]);i.useEffect(()=>{ut.current=new Set,He.current=new Set,Ke.current=new Map,we.current=!1,Z({status:"loading",cards:[],errorMessage:null}),H(c)},[H,n,c,s?.kindFilter,s?.minImdbRating,JSON.stringify(s?.genresAny??[]),Z]);const Te=i.useCallback(()=>{s?.seed==null&&ys(S,te,s?.kindFilter??null),Oe.current=0,ut.current=new Set,He.current=new Set,Ke.current=new Map,we.current=!1,Z({status:"loading",cards:[],errorMessage:null}),H(c)},[H,c,te,s?.kindFilter,s?.minImdbRating,JSON.stringify(s?.genresAny??[]),s?.seed,S,Z]),B=i.useCallback(o=>{o<=0||Z(d=>({...d,cards:d.cards.slice(Math.min(o,d.cards.length))}))},[Z]),a=jr({mutationFn:async o=>(je(o),{ok:!0}),onError:(o,d)=>{const v=o instanceof Error?o.message:typeof o=="string"?o:"We couldn't save that action.";St(d),q({payload:d,message:v})},onSuccess:()=>{q(null),N&&(M.invalidateQueries({queryKey:dt.homeFeed(null)}),M.invalidateQueries({queryKey:dt.homeForYou(null)}))}}),oe=i.useCallback((o,d)=>{if(!o)return;const v=`${o.deckId}:${o.id}`;He.current.has(v)||(He.current.add(v),a.mutate({sessionId:S,deckId:o.deckId,recRequestId:o.recRequestId??null,position:d??o.position,mediaItemId:o.id,eventType:"impression",source:o.source??null,clientEventId:Le(),payload:(()=>{const y={};Object.keys(g.current).length&&(y.experiments=g.current);const E=typeof o.why=="string"?o.why.trim():"";return E&&(y.why=E),Object.keys(y).length?y:null})()}))},[a,S]),At=i.useCallback((o,d,v)=>{if(!o||!Number.isFinite(d)||d<I)return;const y=`${o.deckId}:${o.id}`,E=Date.now(),k=Ke.current.get(y)??0;E-k<w||(Ke.current.set(y,E),a.mutate({sessionId:S,deckId:o.deckId,recRequestId:o.recRequestId??null,position:v??o.position,mediaItemId:o.id,eventType:"dwell",dwellMs:Math.round(d),source:o.source??null,clientEventId:Le(),payload:(()=>{const Y={};Object.keys(g.current).length&&(Y.experiments=g.current);const ce=typeof o.why=="string"?o.why.trim():"";return ce&&(Y.why=ce),Object.keys(Y).length?Y:null})()}))},[w,I,a,S]),ge=i.useCallback(o=>{const d=o.card,v=o.action??null,y={};v&&(y.action=v),a.mutate({sessionId:S,deckId:d.deckId,recRequestId:d.recRequestId??null,position:d.position,mediaItemId:d.id,eventType:dr(o.direction),source:d.source??null,clientEventId:Le(),payload:Object.keys(g.current).length||Object.keys(y).length?{...y,...Object.keys(g.current).length?{experiments:g.current}:{}}:null})},[a,S]),Qt=i.useCallback(async o=>{const d=o.card,v=o.action??null,y={};return v&&(y.action=v),a.mutateAsync({sessionId:S,deckId:d.deckId,recRequestId:d.recRequestId??null,position:d.position,mediaItemId:d.id,eventType:dr(o.direction),source:d.source??null,clientEventId:Le(),payload:Object.keys(g.current).length||Object.keys(y).length?{...y,...Object.keys(g.current).length?{experiments:g.current}:{}}:null})},[a,S]),Ve=i.useCallback(o=>{const d={...o,sessionId:o.sessionId??S,clientEventId:o.clientEventId??Le()},v=Object.keys(g.current).length?{...d,payload:{...typeof d.payload=="object"&&d.payload?d.payload:{},experiments:g.current}}:d;a.mutate(v)},[a,S]),Pt=i.useCallback(async o=>{const d={...o,sessionId:o.sessionId??S,clientEventId:o.clientEventId??Le()},v=Object.keys(g.current).length?{...d,payload:{...typeof d.payload=="object"&&d.payload?d.payload:{},experiments:g.current}}:d;try{await a.mutateAsync(v)}catch{}},[a,S]);return{sessionId:S,mode:te,cards:ke.cards,status:ke.status,isLoading:ke.status==="loading",isError:ke.status==="error",isExhausted:ke.status==="exhausted",deckError:ke.errorMessage??null,fetchMore:H,refresh:Te,trimConsumed:B,trackImpression:oe,trackDwell:At,sendEvent:Ve,sendEventAsync:Pt,swipe:ge,swipeAsync:Qt,swipeSyncError:Ge?.message??null,retryFailedSwipe:()=>{Ge&&a.mutate(Ge.payload)},isRetryingSwipe:a.isPending&&!!Ge}}const p=(n,s,c)=>Math.min(c,Math.max(s,n)),se=n=>{if(!n)return null;const s=n.trim();return!s||s.toUpperCase()==="N/A"?null:s},ur=n=>{if(!n||n<=0)return null;const s=Math.floor(n/60),c=n%60;return s===0?`${c}m`:c===0?`${s}h`:`${s}h ${c}m`},Bs=n=>{const s=se(n);if(!s)return null;const c=s.toLowerCase();return c==="united states"||c==="united states of america"?"US":c==="united kingdom"||c==="great britain"?"UK":c==="canada"?"CA":c==="australia"?"AU":c==="germany"?"DE":c==="france"?"FR":c==="spain"?"ES":c==="italy"?"IT":c==="japan"?"JP":c==="south korea"||c==="republic of korea"?"KR":s.length<=3?s.toUpperCase():s},ee=n=>{if(n==null)return null;if(typeof n=="number")return Number.isNaN(n)?null:n;const s=parseFloat(n);return Number.isNaN(s)?null:s},mr=n=>{const s=ee(n);return s==null?null:Math.round(s).toLocaleString()},Vt=n=>{if(!n)return;const s=[];n.year&&s.push(String(n.year));const c=[];typeof n.imdbRating=="number"&&!Number.isNaN(n.imdbRating)&&c.push(`IMDb ${n.imdbRating.toFixed(1)}`),typeof n.rtTomatoMeter=="number"&&!Number.isNaN(n.rtTomatoMeter)&&c.push(`${n.rtTomatoMeter}% Rotten Tomatoes`);const x=[...s,...c].filter(Boolean).join(" · ");return x?`${n.title} (${x})`:n.title},qs=({message:n,onRetry:s,isRetrying:c})=>n?e.jsx("div",{className:"mx-3 mb-3 rounded-md border border-amber-500/60 bg-amber-500/10 px-3 py-2 text-xs text-amber-50",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(_,{name:"error",className:"mt-0.5 text-[18px]",ariaLabel:"Error"}),e.jsxs("div",{className:"flex flex-1 flex-col gap-1",children:[e.jsx("p",{className:"leading-snug",children:n}),e.jsxs(js,{type:"button",variant:"outline",size:"sm",onClick:s,disabled:c,children:[e.jsx(_,{name:"refresh",className:"text-[18px]",ariaLabel:"Retry"}),c?"Retrying…":"Retry"]})]})]})}):null,bn=({title:n})=>e.jsx("div",{className:"flex h-full w-full items-center justify-center bg-gradient-to-br from-background via-card to-background text-center",children:e.jsxs("div",{className:"flex flex-col items-center gap-2 text-muted-foreground",children:[e.jsx("div",{className:"flex h-12 w-12 items-center justify-center rounded-2xl bg-card/70 shadow-md",children:e.jsx(_,{name:"image_not_supported",className:"text-[24px] text-muted-foreground"})}),e.jsx("span",{className:"text-[12px] font-semibold",children:"Artwork unavailable"}),n&&e.jsxs("span",{className:"max-w-[240px] truncate text-xs text-muted-foreground/80",children:["for ",n]})]})});function zs(n){const s=n.trim().split(/\s+/).filter(Boolean);if(!s.length)return"?";const c=s[0]?.[0]??"?",x=s.length>1?s[s.length-1]?.[0]??"":"";return(c+x).toUpperCase()}function Us({open:n,onOpenChange:s,profiles:c,verb:x}){const I=Nr(),w=Array.isArray(c)?c.filter(Boolean):[],N=i.useMemo(()=>w.map($=>$.id).filter(Boolean),[w]),[M,O]=i.useState({});i.useEffect(()=>{let $=!1;async function g(){if(!n||N.length===0)return;const{data:X,error:je}=await Ft.from("profiles_public").select("id,is_verified,verified_type,verified_label,verified_at,verified_by_org").in("id",N);if($||je)return;const Ne={};for(const S of X??[])S?.id&&(Ne[S.id]={is_verified:S.is_verified??null,verified_type:S.verified_type??null,verified_label:S.verified_label??null,verified_at:S.verified_at??null,verified_by_org:S.verified_by_org??null});O(Ne)}return g(),()=>{$=!0}},[n,N.join("|")]);const W=w.length?`Friends who ${x}`:`No friends ${x} yet`;return e.jsx(_r,{open:n,onOpenChange:s,children:e.jsxs(Mr,{className:"max-w-md border border-border/60 bg-card text-foreground",children:[e.jsx(Sr,{children:e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsx(Rr,{className:"text-base font-semibold text-foreground",children:W}),e.jsx("button",{type:"button",onClick:()=>s(!1),className:"-mr-2 icon-hit border border-border/60 bg-background/60 hover:bg-background/80","aria-label":"Close","data-swipe-interactive":"true",children:e.jsx(_,{name:"close",className:"text-[22px]"})})]})}),w.length===0?e.jsx("p",{className:"text-sm text-muted-foreground",children:"Once friends interact with titles, they’ll show up here."}):e.jsx("div",{className:"mt-2 max-h-[60vh] overflow-y-auto pr-1",children:e.jsx("div",{className:"space-y-2",children:w.map($=>{const g=($.display_name??$.username??"Friend").trim()||"Friend",X=($.username??"").trim(),je=zs(g);return e.jsxs("button",{type:"button",className:"flex w-full items-center gap-3 rounded-2xl border border-border/60 bg-background/40 px-3 py-2.5 text-left transition hover:bg-background/70",onClick:()=>{X&&(s(!1),I(`/u/${X}`))},"aria-label":X?`Open ${g} profile`:g,"data-swipe-interactive":"true",children:[e.jsx("div",{className:"h-10 w-10 overflow-hidden rounded-full border border-border/60 bg-muted",children:$.avatar_url?e.jsx("img",{src:$.avatar_url,alt:g,className:"h-full w-full object-cover",loading:"lazy",referrerPolicy:"no-referrer"}):e.jsx("div",{className:"grid h-full w-full place-items-center text-xs font-semibold text-foreground/80",children:je})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsxs("div",{className:"flex min-w-0 items-center gap-1",children:[e.jsx("div",{className:"truncate text-sm font-semibold text-foreground",children:g}),e.jsx(Cs,{isVerified:M[$.id]?.is_verified,type:M[$.id]?.verified_type,label:M[$.id]?.verified_label,verifiedAt:M[$.id]?.verified_at,org:M[$.id]?.verified_by_org,className:"shrink-0 rounded-full p-0.5 text-primary/90 hover:text-primary"})]}),X?e.jsxs("div",{className:"truncate text-xs text-muted-foreground",children:["@",X]}):e.jsx("div",{className:"truncate text-xs text-muted-foreground",children:"Profile unavailable"})]}),e.jsx("div",{className:"grid h-9 w-9 place-items-center rounded-full border border-border/60 bg-background/60 text-muted-foreground",children:e.jsx(_,{name:"chevron_right",className:"text-[22px]"})})]},$.id)})})})]})})}const Rt="mn_swipe_onboarding_seen",fr="mn_swipe_sfx_enabled",pr="mn_swipe_haptics_enabled",Ys={floaty_gamey:{distanceWidthFactor:.22,distanceMin:86,distanceMax:140,intentFactor:.35,intentMin:30,intentMax:52,velocityThreshold:.55,velocityProjectionMs:220,dragFollowAlpha:.22,rotationFactor:15,rotateZCap:18,rotateYCap:14,rotateXCap:7,undercardTranslateY:8,undercardBlurMax:1.4,punchScale:1.015,punchDurationMs:140,burstBaseCount:12,burstDurationMs:520}},G=Ys.floaty_gamey,Ws=88,Tt=(n,s=1)=>{const c=typeof n=="number"&&Number.isFinite(n)&&n>0?n:typeof window<"u"?window.innerWidth:Ws;return p(c*G.distanceWidthFactor*s,G.distanceMin,G.distanceMax)},xr=(n,s=1)=>p(Math.round(Tt(n,s)*G.intentFactor),G.intentMin,G.intentMax),Xs=(n,s)=>{const c=Math.abs(n);if(c<=s)return n;const x=c-s;return Math.sign(n)*(s+x*.18)},wn=8,Hs=1.25,Ks=1.6,Gs=.25,hr=120,gn=14,Vs=70,br=G.velocityThreshold,Ct=220,Qs=360,wr=G.rotationFactor,Zs=`
@keyframes mn-swipe-burst {
  0% { transform: translate3d(0px,0px,0px) rotate(0deg) scale(1); opacity: 0.95; }
  100% { transform: translate3d(var(--dx, 0px), var(--dy, 0px), 0px) rotate(var(--rot, 0deg)) scale(var(--s, 1)); opacity: 0; }
}
.mn-swipe-burst-dot {
  position: absolute;
  left: var(--x, 0px);
  top: var(--y, 0px);
  width: var(--sz, 8px);
  height: var(--sz, 8px);
  border-radius: 9999px;
  filter: blur(0px);
  will-change: transform, opacity;
  animation: mn-swipe-burst var(--dur, 520ms) cubic-bezier(0.18, 0.78, 0.22, 1) forwards;
}
.mn-swipe-burst-dot[data-shape="square"] { border-radius: 6px; }
@media (prefers-reduced-motion: reduce) {
  .mn-swipe-burst-dot { animation: none !important; opacity: 0 !important; }
}
`,Js={"--mn-swipe-radius":"clamp(26px, min(6vw, 4.2vh), 44px)","--mn-swipe-pad":"clamp(12px, min(4.6vw, 3.2vh), 24px)","--mn-swipe-kicker":"clamp(10px, min(2.5vw, 1.45vh), 12px)","--mn-swipe-header":"clamp(1.05rem, min(4.2vw, 2.6vh), 1.35rem)","--mn-swipe-top-hit":"clamp(2.25rem, min(9vw, 5.2vh), 2.9rem)","--mn-swipe-top-icon":"clamp(22px, min(5.6vw, 3.2vh), 30px)","--mn-swipe-title":"clamp(1.6rem, min(6.6vw, 4.4vh), 2.6rem)","--mn-swipe-subtitle":"clamp(0.92rem, min(3.6vw, 2.2vh), 1.15rem)","--mn-swipe-meta":"clamp(0.88rem, min(3.2vw, 2.0vh), 1.08rem)","--mn-swipe-chip":"clamp(0.72rem, min(2.9vw, 1.75vh), 0.9rem)","--mn-swipe-hit":"clamp(2.25rem, min(9vw, 5.5vh), 2.85rem)","--mn-swipe-gap":"clamp(1.35rem, min(6.2vw, 3.7vh), 2.5rem)","--mn-swipe-action":"clamp(3.1rem, min(12.5vw, 7.0vh), 4.1rem)","--mn-swipe-action-primary":"clamp(4.4rem, min(17.5vw, 9.2vh), 6.1rem)","--mn-swipe-icon":"clamp(22px, min(5.5vw, 3.4vh), 30px)","--mn-swipe-icon-primary":"clamp(32px, min(8.5vw, 4.8vh), 46px)","--mn-swipe-star-hit":"clamp(18px, min(5vw, 2.8vh), 24px)","--mn-swipe-star-icon":"clamp(14px, min(3.8vw, 2.1vh), 19px)"},Ir=n=>{if(n==null)return null;const s=String(n).trim();if(!s)return null;const c=s.replace(/%/g,""),x=Number(c);return Number.isFinite(x)?x:null},ei=n=>{if(n==null)return null;const s=Math.round(n);return s<=0?null:Math.min(10,Math.max(2,s*2))},ti=n=>{const s=(()=>{const w=String(n?.source??"").trim();if(!w)return null;const N=w.replace("-","_");return N==="for_you"||N==="for-you"?"for-you":N==="friends"||N==="from_friends"||N==="from-friends"?"from-friends":N==="trending"?"trending":N==="popular"?"popular":N==="combined"?"combined":N==="explore"?"explore":null})(),c=n?.kind==="series"?"series":n?.kind==="anime"?"anime":"movie",x=typeof n?.releaseYear=="number"?n.releaseYear:n?.releaseYear!=null?Number(n.releaseYear):null,I=typeof n?.runtimeMinutes=="number"?n.runtimeMinutes:n?.runtimeMinutes!=null?Number(n.runtimeMinutes):null;return{id:String(n?.id??""),title:String(n?.title??"Untitled"),deckId:n?.deckId??null,position:typeof n?.position=="number"?n.position:n?.position!=null?Number(n.position):null,year:Number.isFinite(x)?x:null,type:c,runtimeMinutes:Number.isFinite(I)?I:null,tagline:n?.tagline??null,mood:n?.mood??null,vibeTag:n?.vibeTag??null,posterUrl:n?.posterUrl??null,tmdbPosterPath:n?.tmdbPosterPath??null,tmdbBackdropPath:n?.tmdbBackdropPath??null,source:s,why:n?.why??null,friendIds:Array.isArray(n?.friendIds)?n.friendIds:null,friendProfiles:Array.isArray(n?.friendProfiles)?n.friendProfiles:null,friendLikesCount:typeof n?.friendLikesCount=="number"?n.friendLikesCount:Array.isArray(n?.friendProfiles)?n.friendProfiles.length:Array.isArray(n?.friendIds)?n.friendIds.length:null,topFriendName:Array.isArray(n?.friendProfiles)&&n.friendProfiles[0]?String(n.friendProfiles[0].display_name??n.friendProfiles[0].username??""):n?.topFriendName??null,topFriendInitials:n?.topFriendInitials??null,topFriendReviewSnippet:n?.topFriendReviewSnippet??null,overview:n?.overview??null,genres:Array.isArray(n?.genres)?n.genres:null,language:n?.language??null,country:n?.country??null,initialRating:typeof n?.initialRating=="number"?n.initialRating:n?.initialRating!=null?Number(n.initialRating):null,initiallyInWatchlist:!!n?.initiallyInWatchlist,imdbRating:typeof n?.imdbRating=="number"?n.imdbRating:n?.imdbRating!=null?Number(n.imdbRating):null,rtTomatoMeter:typeof n?.rtTomatoMeter=="number"?n.rtTomatoMeter:n?.rtTomatoMeter!=null?Number(n.rtTomatoMeter):null}};function gr(n){const{card:s,friendCount:c,imdb:x,rt:I}=n;let w=74;const N=s?.source??null;N==="for-you"&&(w+=10),N==="from-friends"&&(w+=7),N==="trending"&&(w+=4),N==="popular"&&(w+=2);const M=typeof s?.friendLikesCount=="number"?s.friendLikesCount:0;if(M>0){const W=c>0?M/Math.max(1,c)*18:Math.min(12,M*3);w+=W}x!=null&&(w+=(x-7)*4),I!=null&&(w+=(I-70)*.15),s?.why&&(w+=3);const O=Math.round(w);return Math.round(p(O,55,99))}const yr=async n=>{const{data:s,error:c}=await Ft.from("media_items").select("id, kind, omdb_plot, omdb_director, omdb_writer, omdb_actors, omdb_genre, omdb_language, omdb_country, omdb_imdb_rating, omdb_imdb_votes, omdb_metascore, omdb_rating_rotten_tomatoes, omdb_poster, omdb_awards, omdb_box_office, omdb_released, omdb_rated, omdb_runtime, omdb_fetched_at, omdb_status, omdb_error").eq("id",n).maybeSingle();if(c)throw c;if(!s)return null;const x=s.omdb_genre!=null?String(s.omdb_genre).split(",").map(w=>w.trim()).filter(Boolean):null,I=Ir(s.omdb_rating_rotten_tomatoes);return{title_id:s.id,content_type:s.kind??null,plot:s.omdb_plot??null,omdb_director:s.omdb_director??null,omdb_writer:s.omdb_writer??null,omdb_actors:s.omdb_actors??null,genres:x,omdb_language:s.omdb_language??null,omdb_country:s.omdb_country??null,imdb_rating:s.omdb_imdb_rating??null,imdb_votes:s.omdb_imdb_votes??null,metascore:s.omdb_metascore??null,rt_tomato_pct:I,poster_url:s.omdb_poster??null,omdb_awards:s.omdb_awards??null,omdb_box_office_str:s.omdb_box_office??null,omdb_box_office:null,omdb_released:s.omdb_released??null,omdb_rated:s.omdb_rated??null,omdb_runtime:s.omdb_runtime??null,omdb_fetched_at:s.omdb_fetched_at??null,omdb_status:s.omdb_status??null,omdb_error:s.omdb_error??null}},De="want_to_watch",ct="watched",Mi=()=>{const n=Nr(),[s,c]=i.useState(null),[x,I]=i.useState(!1),[w,N]=i.useState([]),[M,O]=i.useState(0),[W,$]=i.useState({w:0,h:0});i.useEffect(()=>{if(typeof window>"u")return;let t=0;const r=()=>{cancelAnimationFrame(t),t=requestAnimationFrame(()=>{$({w:window.innerWidth,h:window.innerHeight})})};return r(),window.addEventListener("resize",r,{passive:!0}),window.addEventListener("orientationchange",r,{passive:!0}),()=>{cancelAnimationFrame(t),window.removeEventListener("resize",r),window.removeEventListener("orientationchange",r)}},[]);const g=i.useMemo(()=>{const t=W.h||844;return t<640?4:t<720?5:t<820?6:t<920?7:8},[W.h]),X=i.useMemo(()=>p(g+2,6,10),[g]),{cards:je,sessionId:Ne,isLoading:S,isError:te,swipe:ut,fetchMore:we,trimConsumed:Oe,swipeSyncError:Et,retryFailedSwipe:He,isRetryingSwipe:Ke,trackImpression:ke,trackDwell:mt,sendEventAsync:Ge}=$s("combined",{limit:72,kindFilter:s,minImdbRating:M>0?M:null,genresAny:w.length?w:null}),q=i.useMemo(()=>je.map(ti),[je]),Z=i.useMemo(()=>{const t=new Set;for(const r of q){const l=r?.genres??[];for(const u of l){const m=String(u??"").trim();m&&t.add(m)}}return Array.from(t).sort((r,l)=>r.localeCompare(l))},[q]),$e=or.useCallback(t=>{if(!t)return!1;if(w.length){const r=Array.isArray(t.genres)?t.genres:[],l=new Set(r.map(m=>String(m).toLowerCase()));if(!w.some(m=>l.has(String(m).toLowerCase())))return!1}if(M>0){const r=typeof t.imdbRating=="number"&&!Number.isNaN(t.imdbRating)?t.imdbRating:null;if(r!=null&&r<M)return!1}return!0},[w,M]),[H,Te]=i.useState(0),B=je[H],a=q[H],[oe,At]=i.useState(!1),ge=i.useRef(!1);i.useEffect(()=>{ge.current=oe},[oe]);const[Qt,Ve]=i.useState(()=>typeof window>"u"?!1:!It(Rt)),[Pt,o]=i.useState([]),d=(t,r)=>{t&&o(l=>{const u=l.includes(t);return r?u?l:[...l,t]:u?l.filter(m=>m!==t):l})},v=t=>d(a?.id,t),y=!!a?.id&&Pt.includes(a.id),E=q[H+1]??null,k=!!E?.id&&Pt.includes(E.id),Y=!!(E?.posterUrl&&!k);i.useEffect(()=>{if(typeof window>"u")return;const t=E?.posterUrl;if(!t)return;const r=new Image;r.decoding="async",r.src=t},[E?.posterUrl]);const[ce,Qe]=i.useState(!1),[ye,z]=i.useState(!1),[de,Ze]=i.useState(!1),[ft,jn]=i.useState(null),[Tr,Zt]=i.useState(!1),Fe=i.useRef(null),Nn=i.useRef(new Set),[kn,_n]=i.useState(null),pt=i.useRef(null),[,Fr]=i.useState(0),[Er,Mn]=i.useState(0),Jt=i.useRef(null),en=i.useRef(!1),[Ar,Sn]=i.useState(!1),ie=a?.id??null,Lt=E?.id??null,{user:_e}=kr(),xt=vr();i.useEffect(()=>{if(typeof window>"u"||q.length===0)return;const t=window.requestIdleCallback,r=()=>{const m=Math.min(Math.max(H+1,0),q.length),h=Math.min(q.length,m+8),f=q.slice(m,h).map(T=>{if(!T.id)return null;const U=dt.titleDetail(T.id);return xt.getQueryData(U)?null:xt.prefetchQuery({queryKey:U,queryFn:()=>yr(T.id),staleTime:1e3*60*30,gcTime:1e3*60*60})});Promise.allSettled(f.filter(Boolean))};if(t){const u=t(r);return()=>{typeof window<"u"&&"cancelIdleCallback"in window&&window.cancelIdleCallback?.(u)}}const l=window.setTimeout(r,280);return()=>window.clearTimeout(l)},[q,H,xt]);const{data:ht}=hn({queryKey:["title-preview",Lt],enabled:!!Lt,staleTime:1e3*60*30,gcTime:1e3*60*60,refetchOnWindowFocus:!1,queryFn:async()=>{if(!Lt)return null;const{data:t,error:r}=await Ft.from("media_items").select("id, omdb_director, omdb_genre, omdb_rating_rotten_tomatoes, omdb_imdb_rating").eq("id",Lt).maybeSingle();if(r)throw r;return t?{omdb_director:t.omdb_director??null,omdb_genre:t.omdb_genre??null,omdb_rating_rotten_tomatoes:t.omdb_rating_rotten_tomatoes??null,omdb_imdb_rating:t.omdb_imdb_rating??null}:null}}),Rn=se(ht?.omdb_director),Pr=Ir(ht?.omdb_rating_rotten_tomatoes),Lr=ee(ht?.omdb_imdb_rating),{data:Be=0}=hn({queryKey:["friendCount",{userId:_e?.id??null}],enabled:!!_e?.id,staleTime:1e3*60*10,gcTime:1e3*60*30,refetchOnWindowFocus:!1,queryFn:async()=>{if(!_e?.id)return 0;const{count:t,error:r}=await Ft.from("follows").select("followed_id",{count:"exact",head:!0}).eq("follower_id",_e.id);if(r)throw r;return t??0}}),Cn=_s(ie),In=Cn.data?.status??null,Tn=Cn.data?.rating??null,[Dr,Dt]=i.useState(null),[Or,Fn]=i.useState(null),tn={status:Dr??In},Ot=jr({mutationFn:async t=>{if(!_e?.id||!B)return;const r={sessionId:Ne,deckId:B.deckId??null,position:B.position??null,mediaItemId:B.id,source:B.source??null,events:[]},l=[];if(t.status!==void 0)if(t.statusKind==="watched"){const u=t.status===ct;l.push({eventType:"like",payload:{ui:"SwipePage",action:"status",status:"watched",enabled:u}})}else{const u=t.status===De;l.push({eventType:"watchlist",inWatchlist:u,payload:{ui:"SwipePage",action:"status",status:"watchlist",enabled:u}})}t.ratingStars!==void 0&&l.push({eventType:"rating",rating0_10:ei(t.ratingStars),payload:{ui:"SwipePage",action:"rating"}}),l.length&&(r.events=l,await Ge(r))},onSuccess:()=>{_e?.id&&ie&&(xt.invalidateQueries({queryKey:dt.titleDiary(_e.id,ie)}),xt.invalidateQueries({queryKey:dt.diaryLibrary(_e.id)}))}}),bt=i.useRef(null),En=i.useRef(null),$t=i.useRef(!1),[$r,Br]=i.useState(!1),[Je,An]=i.useState(!0),[et,Pn]=i.useState(!0),Bt=i.useRef(!0),qt=i.useRef(!0),Ln=i.useRef(0);i.useEffect(()=>{if(typeof window>"u"||!window.matchMedia)return;const t=window.matchMedia("(prefers-reduced-motion: reduce)"),r=()=>{$t.current=t.matches,Br(t.matches)};return r(),typeof t.addEventListener=="function"?t.addEventListener("change",r):t.addListener?.(r),()=>{typeof t.removeEventListener=="function"?t.removeEventListener("change",r):t.removeListener?.(r)}},[]),i.useEffect(()=>{if(!(typeof window>"u"))try{const t=It(fr),r=It(pr),l=t==null?!0:t==="1",u=r==null?!0:r==="1";An(l),Pn(u),Bt.current=l,qt.current=u}catch{}},[]),i.useEffect(()=>{if(Bt.current=Je,!(typeof window>"u"))try{Xe(fr,Je?"1":"0")}catch{}},[Je]),i.useEffect(()=>{if(qt.current=et,!(typeof window>"u"))try{Xe(pr,et?"1":"0")}catch{}},[et]);const tt=i.useRef({x:0,y:0});i.useEffect(()=>{if(typeof window>"u"||!window.matchMedia)return;const t=window.matchMedia("(pointer: coarse)"),r=()=>{rt.current=t.matches};return r(),typeof t.addEventListener=="function"?t.addEventListener("change",r):t.addListener?.(r),()=>{typeof t.removeEventListener=="function"?t.removeEventListener("change",r):t.removeListener?.(r)}},[]);const Dn=()=>{if(typeof window>"u")return null;if(bt.current)return bt.current;const t=window.AudioContext||window.webkitAudioContext;if(!t)return null;const r=new t;return bt.current=r,r},zt=t=>{qt.current&&(typeof navigator>"u"||typeof navigator.vibrate!="function"||navigator.vibrate(t))},Ut=(t,r=1)=>{if(!qt.current)return;const l=typeof performance<"u"?performance.now():Date.now(),u=Ln.current||0,m=t==="commit"?0:Vs;if(l-u<m)return;Ln.current=l;const h=p(r,.2,1);if(t==="threshold"){zt(8);return}if(t==="snap"){zt(6);return}if(t==="skip"){zt(12);return}const b=Math.round(16+h*22);zt(h>.7?[b,12,b+8]:b)},On=(t,r)=>{if(!Bt.current||typeof document<"u"&&document.visibilityState==="hidden")return;const l=Dn();if(!l)return;l.state==="suspended"&&l.resume().catch(()=>{});const u=1+(Math.random()*.06-.03),m=p(r,.2,1),h=l.currentTime,b=.11+m*.08,f=Math.max(1,Math.floor(l.sampleRate*b)),T=l.createBuffer(1,f,l.sampleRate),U=T.getChannelData(0);for(let K=0;K<f;K+=1){const Q=1-K/f;U[K]=(Math.random()*2-1)*Q}const F=l.createBufferSource();F.buffer=T;const R=l.createBiquadFilter();R.type="bandpass";const P=t==="like"?760:t==="dislike"?520:640,C=t==="like"?1180:t==="dislike"?320:560;R.frequency.setValueAtTime(Math.max(80,P*u),h),R.frequency.exponentialRampToValueAtTime(Math.max(60,C*u),h+b);const j=l.createGain();j.gain.setValueAtTime(1e-4,h),j.gain.exponentialRampToValueAtTime(.09+m*.14,h+.012),j.gain.exponentialRampToValueAtTime(1e-4,h+b),F.connect(R),R.connect(j),j.connect(l.destination),F.start(h),F.stop(h+b+.02);const A=l.createOscillator(),D=l.createGain();A.type=t==="like"?"sine":"triangle";const re=t==="like"?520:t==="dislike"?210:360;A.frequency.setValueAtTime(re*u,h),A.frequency.linearRampToValueAtTime((re+(t==="like"?180:-40))*u,h+b),D.gain.setValueAtTime(1e-4,h),D.gain.exponentialRampToValueAtTime(.04+m*.05,h+.01),D.gain.exponentialRampToValueAtTime(1e-4,h+b),A.connect(D),D.connect(l.destination),A.start(h),A.stop(h+b+.02)},qr=(t,r=1)=>{if($t.current)return;const l=En.current;if(!l)return;const u=l.getBoundingClientRect(),m=u.width,h=u.height;if(m<=0||h<=0)return;const b=G.burstDurationMs,f=Math.max(6,Math.round(G.burstBaseCount*p(r,.25,1))),T=t==="like"?Math.min(92,m*.28):Math.max(m-92,m*.72),U=Math.min(92,h*.14),F=t==="like"?"rgba(52,211,153,0.82)":"rgba(251,113,133,0.82)",R=t==="like"?"rgba(255,255,255,0.75)":"rgba(255,255,255,0.7)";for(let P=0;P<f;P++){const C=document.createElement("span"),j=P%5===0;C.className="mn-swipe-burst-dot",C.setAttribute("data-shape",j?"square":"dot");const A=(Math.random()*Math.PI*.9+Math.PI*.05)*(t==="like"?1:-1),D=62+Math.random()*98,re=Math.cos(A)*D,K=-Math.abs(Math.sin(A))*D*(.85+Math.random()*.5),Q=5+Math.random()*6,le=(Math.random()*160-80).toFixed(1)+"deg",xe=(.8+Math.random()*.9).toFixed(2);C.style.setProperty("--x",T.toFixed(1)+"px"),C.style.setProperty("--y",U.toFixed(1)+"px"),C.style.setProperty("--dx",re.toFixed(1)+"px"),C.style.setProperty("--dy",K.toFixed(1)+"px"),C.style.setProperty("--rot",le),C.style.setProperty("--s",xe),C.style.setProperty("--sz",Q.toFixed(1)+"px"),C.style.setProperty("--dur",b+"ms"),C.style.background=P%3===0?R:F,l.appendChild(C),window.setTimeout(()=>C.remove(),b+60)}},{data:L}=hn({queryKey:dt.titleDetail(ie),enabled:!!ie,staleTime:1e3*60*30,gcTime:1e3*60*60,refetchOnWindowFocus:!1,queryFn:async()=>ie?yr(ie):null}),Yt=se(L?.plot)??se(a?.overview)??null,ue=L?.genres??a?.genres??null,zr=L?.omdb_country??a?.country??null,Ur=se(zr),$n=Bs(Ur),qe=se(L?.omdb_director),Bn=se(L?.omdb_writer),wt=se(L?.omdb_actors),nt=L?.imdb_rating??a?.imdbRating??null,nn=L?.rt_tomato_pct??a?.rtTomatoMeter??null,rn=L?.metascore??null,sn=L?.imdb_votes??null,qn=se(L?.omdb_awards),zn=se(L?.omdb_box_office_str),Un=se(L?.omdb_released),an=L?.content_type==="movie"||L?.content_type==="series"||L?.content_type==="anime"?L.content_type:a?.type??null,Yn=a,Yr=Yn?.certification??Yn?.rated??L?.omdb_rated??null,Wn=se(Yr),Xn=(Array.isArray(ue)?ue:ue?String(ue).split(",").map(t=>t.trim()):[])??[],Hn=Xn.length>3?Xn.slice(3).filter(Boolean):[],Wr=[L?.omdb_language??null,a?.language??null],Kn=Array.from(new Set(Wr.map(t=>se(t)).filter(t=>!!t))),ln=()=>_e?!0:(alert("Sign in to save this title, rate it, or add it to your watchlist."),!1),Gn=t=>{if(!(!ie||!B||!ln())){if(t===De){const r=tn.status===De?null:De;Dt(r),Ot.mutate({status:r,statusKind:"watchlist"});return}if(t===ct){const r=tn.status===ct?null:ct;Dt(r),Ot.mutate({status:r,statusKind:"watched"})}}},Xr=()=>{!ie||!B||!ln()||(Dt(De),Ot.mutate({status:De,statusKind:"watchlist"}),Qr())},Hr=t=>{!ie||!B||!ln()||(Fn(t),Ot.mutate({ratingStars:t}))},Vn=t=>tn?.status===t,on=Or??(Tn??null);i.useEffect(()=>{Fn(null),Dt(null)},[ie,Tn,In]);const Kr=t=>{Hr(on===t?null:t)},Qn=()=>typeof window<"u"?Rs(`/title/${a?.id??""}`):`/title/${a?.id??""}`,Gr=Qn(),Vr=async t=>{if(!a||!B)return;const r=Qn(),l=`Check this out: ${a.title}`,u=t??l;try{navigator.share?await navigator.share({title:a.title,text:u,url:r}):navigator.clipboard?.writeText?(await navigator.clipboard.writeText(`${u}

${r}`),alert("Link copied to clipboard")):alert(`${u}

${r}`)}catch{}},Zn=!!(a?.posterUrl&&!y),me=i.useRef(null),Jn=i.useRef(null),Ee=i.useRef({w:0,h:0}),rt=i.useRef(!1),fe=i.useRef(null),pe=i.useRef(null),st=i.useRef(0),ze=i.useRef(0),Ae=i.useRef(0),Ue=i.useRef(!1),ve=i.useRef(null),er=i.useRef(!1),Me=i.useRef(null),Ye=i.useRef(0),gt=i.useRef(null),Se=i.useRef(null),ae=i.useRef(null),ne=i.useRef(0),Re=i.useRef(null),Ce=i.useRef(.5),Ie=i.useRef(.5),yt=i.useRef(null),vt=i.useRef(null),Wt=i.useRef(null),Xt=i.useRef(null),it=i.useRef(null);i.useEffect(()=>{const t=()=>{const r=me.current;if(!r)return;const l=r.getBoundingClientRect();!l.width||!l.height||(Ee.current={w:l.width,h:l.height})};if(t(),!(typeof window>"u"))return window.addEventListener("resize",t,{passive:!0}),()=>window.removeEventListener("resize",t)},[a?.id]);const Qr=()=>{if(!a)return;Ve(!1),typeof window<"u"&&Xe(Rt,"1");const t=me.current;t&&(t.style.transition="transform 220ms cubic-bezier(0.22,0.61,0.36,1), opacity 220ms ease-out",t.style.transform="perspective(1400px) translateX(0px) translateY(6px) scale(1.02) rotateZ(-1deg)",window.setTimeout(()=>{t.style.transform="perspective(1400px) translateX(0px) translateY(26px) scale(0.95)"},16),t.style.opacity="0"),window.setTimeout(()=>{tr(0,!0),Te(r=>Math.min(r+1,q.length)),t&&(t.style.transition="none",t.style.transform="translateX(0px) translateY(0px) scale(1)",t.style.opacity="1")},220)};i.useEffect(()=>{if(typeof window>"u")return;const t=It(Rt);Ve(!t)},[]),i.useEffect(()=>{v(!1),z(!1),Ze(!1)},[a?.id]),i.useEffect(()=>{!B||!a||S||te||$e(a)||(z(!1),Ze(!1),Te(t=>Math.min(t+1,q.length)))},[B?.id,a?.id,S,te,$e]),i.useEffect(()=>{if(!B)return;const t=performance.now();if(it.current&&Xt.current&&Xt.current!==B.id){const r=Wt.current;if(r!=null){const l=Math.max(0,Math.round(t-r));mt(it.current,l)}}if(!$e(a)){it.current=null,Xt.current=null,Wt.current=null;return}ke(B),it.current=B,Xt.current=B.id,Wt.current=t},[B?.id,a?.id,$e,mt,ke]),i.useEffect(()=>()=>{if(!it.current)return;const t=Wt.current;if(t==null)return;const r=Math.max(0,Math.round(performance.now()-t));mt(it.current,r)},[]),i.useEffect(()=>{if(typeof window>"u")return;(window.requestIdleCallback??(r=>window.setTimeout(r,180)))(()=>{const r=q.slice(H+1,H+4);for(const l of r){if(!l?.posterUrl)continue;const u=new Image;u.loading="lazy",u.decoding="async",u.src=l.posterUrl}})},[q,H]),i.useEffect(()=>()=>{Me.current&&cancelAnimationFrame(Me.current),Fe.current!=null&&window.clearTimeout(Fe.current),pt.current!=null&&window.clearTimeout(pt.current),bt.current&&bt.current.close().catch(()=>{})},[]),i.useEffect(()=>{const t=q.length-H;t<12&&we(Math.max(60,t+24))},[q.length,H,we]),i.useEffect(()=>{if(H<=10)return;const t=Math.min(Math.max(H-6,0),q.length);t>0&&(Oe(t),Te(r=>Math.max(4,r-t)))},[q.length,H,Oe]);const tr=i.useCallback((t,r=!1,l)=>{const u=Jn.current;if(!u)return;const m=rt.current?.96:1,h=Tt(Ee.current.w,m),b=p(Math.abs(t)/Math.max(1,h),0,1),f=p(t/Math.max(1,h),-1,1),T=.68+b*.32+f*b*.03,U=.9+b*.1+f*b*.02,F=.985+b*.015,R=(1-b)*G.undercardTranslateY,P=(1-b)*G.undercardBlurMax,C=1-b,j=(p(-t*.02,-10,10)+f*b*8)*C,A=p(-t/220,-2.2,2.2)*C,D=l??200;u.style.transition=r?`filter ${D}ms cubic-bezier(0.22,0.61,0.36,1), transform ${D}ms cubic-bezier(0.22,0.61,0.36,1)`:"none",u.style.transform=`translate3d(${j.toFixed(2)}px, ${R.toFixed(2)}px, 0px) rotateZ(${A.toFixed(3)}deg) scale(${F.toFixed(4)})`,u.style.filter=`brightness(${T.toFixed(3)}) saturate(${U.toFixed(3)}) blur(${P.toFixed(2)}px)`},[]),Zr=()=>{typeof performance>"u"||(gt.current=performance.now())},Jr=()=>{if(typeof performance>"u")return 1;const t=gt.current;if(t==null)return 1;const r=(performance.now()-t)/Math.max(1,G.punchDurationMs);if(r>=1)return gt.current=null,1;const l=Math.sin(Math.PI*r);return 1+(G.punchScale-1)*l},jt=(t,r=!1,l,u)=>{const m=me.current;if(!m)return;const h=$t.current,b=rt.current?.96:1,f=Tt(Ee.current.w,b),T=xr(Ee.current.w,b),F=(_t=>{const Gt=Math.abs(_t),Mt=Math.max(1,f)*.7;if(Gt<=Mt)return _t;const xn=Gt-Mt;return Math.sign(_t)*(Mt+xn*.38)})(t),R=p(F,-Ct,Ct),P=Xs(F,Ct),C=Math.abs(F)>.5&&ve.current==="x";m.style.transformOrigin=C?`${(Ie.current*100).toFixed(1)}% ${(Ce.current*100).toFixed(1)}%`:"50% 50%";const j=Math.abs(R),A=T*.6,D=p((j-A)/Math.max(1,f-A),0,1),re=R>0?D:0,K=R<0?D:0;m.style.setProperty("--mn-swipe-like-opacity",String(re)),m.style.setProperty("--mn-swipe-nope-opacity",String(K)),m.style.setProperty("--mn-swipe-like-scale",String(.96+re*.04)),m.style.setProperty("--mn-swipe-nope-scale",String(.96+K*.04));const Q=p(Math.abs(R)/Math.max(1,f),0,1),le=p((.5-Ce.current)*2,-1,1),xe=le<0?-1:1,he=.55+.45*Math.abs(le),ot=p((Ie.current-.5)*2,-1,1),V=p(Math.abs(ne.current)/1.35,0,1),J=R/wr*he*xe,be=p(J*(1+V*.28),-18,G.rotateZCap),un=p(R/24+Math.sign(R)*V*2.8+-ot*Q*4.5,-14,G.rotateYCap),Kt=p(le*(1.8+V*2.2)*Q,-7,G.rotateXCap);if(h)m.style.setProperty("--mn-swipe-spec-o","0"),m.style.setProperty("--mn-swipe-poster-parallax","0px"),m.style.setProperty("--mn-swipe-poster-parallax-y","0px"),m.style.setProperty("--mn-swipe-bg-parallax","0px"),m.style.boxShadow="0 30px 90px rgba(0,0,0,0.62)",m.style.backdropFilter="blur(8px)";else{const _t=p(.08+Q*.22+V*.12,0,.42),Gt=p(50+R/Math.max(1,f)*18+tt.current.x*12,24,76),Mt=p(28+-Ae.current/Math.max(1,f)*12+tt.current.y*10,16,66);m.style.setProperty("--mn-swipe-spec-o",_t.toFixed(3)),m.style.setProperty("--mn-swipe-spec-x",`${Gt.toFixed(1)}%`),m.style.setProperty("--mn-swipe-spec-y",`${Mt.toFixed(1)}%`),m.style.setProperty("--mn-swipe-poster-parallax",`${(-R*.035).toFixed(2)}px`),m.style.setProperty("--mn-swipe-poster-parallax-y",`${(Ae.current*.02).toFixed(2)}px`),m.style.setProperty("--mn-swipe-bg-parallax",`${(R*.02).toFixed(2)}px`);const xn=p(.46+Q*.22+V*.14,.35,.78);m.style.boxShadow=`0 30px 92px rgba(0,0,0,${xn.toFixed(3)})`,m.style.backdropFilter=`blur(${(8+Q*8).toFixed(1)}px)`}const mn=h?0:p(Ae.current*.18,-14,14),fn=-Q*(3.2+V*1.6),us=Jr(),ms=(1+Q*.006+V*.004)*us,pn=h?{x:0,y:0}:tt.current,fs=pn.y*-4,ps=pn.x*5,xs=pn.y*-4,ir=l??320,hs=u??"cubic-bezier(0.16, 1, 0.3, 1)";m.style.transition=r?`transform ${ir}ms ${hs}`:"none",m.style.transform=`
      perspective(1400px)
      translate3d(${P}px, ${xs+fn+mn}px, 0px)
      rotateX(${h?0:fs+Kt}deg)
      rotateY(${h?0:un+ps}deg)
      rotateZ(${h?0:be}deg)
      scale(${ms})
    `,st.current=R,tr(R,r,ir)},Ht=(t=!0,r=0)=>{tt.current={x:0,y:0};const l=Math.abs(r),u=p(l/1.35,0,1),m=t?p(Math.round(320-u*140),170,320):void 0,h=t&&l<.45?"cubic-bezier(0.22, 1.2, 0.36, 1)":"cubic-bezier(0.16, 1, 0.3, 1)";jt(0,t,m,h),st.current=0,fe.current=null,pe.current=null,Se.current=null,ae.current=null,ne.current=0,ze.current=0,Ae.current=0,Ue.current=!1,ve.current=null,Ie.current=.5,Ce.current=.5,yt.current=null},es=(t,r)=>{jn({card:t,direction:r}),Zt(!0),Fe.current!=null&&window.clearTimeout(Fe.current),Fe.current=window.setTimeout(()=>Zt(!1),2800)},ts=()=>{Zt(!1),jn(null),Fe.current!=null&&(window.clearTimeout(Fe.current),Fe.current=null)},ns=()=>{ft&&(Te(t=>{const r=t-1;if(r<0)return t;const l=q[r];return l&&l.id===ft.card.id?r:t}),at("Reviewing previous card. Swipe actions are already saved."),typeof window<"u"&&window.requestAnimationFrame(()=>Ht(!1)),ts())},at=t=>{_n(t),pt.current!=null&&window.clearTimeout(pt.current),t&&(pt.current=window.setTimeout(()=>_n(null),3200))},rs=(t,r)=>{const l=t.runtimeMinutes??0,u=ue??t.genres??[],m=an==="series"||t.type==="series",h=u.map(b=>b.toLowerCase());return r==="like"?h.some(b=>b.includes("horror")||b.includes("thriller"))?"We’ll show more intense picks like this.":h.some(b=>b.includes("comedy"))?"We’ll show more light and funny picks like this.":m?"Nice — we’ll bring in more series that match this vibe.":nt!=null&&ee(nt)!=null&&ee(nt)>=7.5?"Nice pick — we’ll show more highly rated titles like this.":t.friendLikesCount&&t.friendLikesCount>=3?"Your friends are into this — we’ll pull in more friend-favorites.":"Got it — we’ll keep tuning around this kind of title.":r==="dislike"?m?"Looks like this series isn’t your thing — we’ll dial down similar shows.":l>130&&Er+1>=3?"You’ve skipped a few long movies — we’ll lean toward shorter runtimes.":l>130?"Noted — we’ll be more careful with super long movies.":"Okay, we’ll dial down similar titles in your feed.":r==="skip"?"We’ll move this out of your way and keep the feed feeling fresh.":null},Pe=(t,r=0,l=null)=>{if(!a||!B)return;const u=`${B.deckId??"unknown"}:${B.id}`;if(Nn.current.has(u)){at("That swipe was already saved. Back is for review only."),Ht(!0);return}if(Nn.current.add(u),Ve(!1),typeof window<"u"&&Xe(Rt,"1"),es(a,t),ut({card:B,direction:t,action:l}),l==="more_like_this"?at("Locked in — we’ll prioritize more picks like this."):l==="not_interested"&&at("Noted — we’ll keep this out of your deck for a while."),t==="dislike"&&(a.runtimeMinutes??0)>130?Mn(j=>j+1):Mn(0),Fr(j=>{const A=j+1,D=rs(a,t);return D&&A>=4&&A%4===0?at(D):at(null),A}),t==="skip"){const j=me.current;j&&(j.style.transition="transform 220ms cubic-bezier(0.22,0.61,0.36,1), opacity 220ms ease-out",j.style.transform="perspective(1400px) translateX(0px) translateY(4px) scale(1.03) rotateZ(-1deg)",window.setTimeout(()=>{j.style.transform="perspective(1400px) translateX(0px) translateY(24px) scale(0.95)"},16),j.style.opacity="0");const A=.4;Ut("skip",A),On(t,A),window.setTimeout(()=>{Te(D=>Math.min(D+1,q.length)),j&&(j.style.transition="none",j.style.transform="translateX(0px) translateY(0px) scale(1)",j.style.opacity="1")},220);return}const m=t==="like"?1:-1,h=typeof window<"u"?window.innerWidth+240:Qs,b=Math.abs(r),f=p(b/1.35,0,1),T=p(b*260,0,280),U=(h+T)*m,F=p(Math.round(260-f*110),140,260),R=me.current;if(R){const j=p((.5-Ce.current)*2,-1,1),A=j<0?-1:1,D=.55+.45*Math.abs(j),re=p((Ie.current-.5)*2,-1,1);R.style.transformOrigin=`${(Ie.current*100).toFixed(1)}% ${(Ce.current*100).toFixed(1)}%`;const K=$t.current,Q=U/wr*D*A,le=K?0:p(Q*(1+f*.12),-24,24),xe=K?0:p(m*(10+f*12)+-re*(4+f*3),-22,22),he=K?0:p(j*(4+f*2),-8,8),ot=-4-f*14,V=1.04+f*.04,J=K?1:1+f*.025,be=K?1:1-f*.018;R.style.transition=`transform ${F}ms cubic-bezier(0.22,0.61,0.36,1)`,R.style.transform=`
        perspective(1400px)
        translate3d(${U}px, ${ot}px, 0px)
        rotateX(${he}deg)
        rotateY(${xe}deg)
        rotateZ(${le}deg)
        scale3d(${(V*J).toFixed(4)}, ${(V*be).toFixed(4)}, 1)
      `}const P=Math.abs(st.current)+Math.abs(r)*220,C=p(P/520,.25,1);qr(t,C),Ut("commit",C),On(t,C),window.setTimeout(()=>{Te(j=>Math.min(j+1,q.length)),window.requestAnimationFrame(()=>Ht(!1))},F)},ss=(t,r,l,u,m,h,b,f)=>{if(!a||!B||Re.current!=null||m==="touch"&&!h||m==="touch"&&typeof b=="number"&&typeof f=="number"&&b>55&&f>55)return;const U=u instanceof HTMLElement&&!!u.closest('button, a, input, textarea, select, [data-swipe-interactive="true"][role="button"], [data-swipe-interactive="true"][tabindex]:not([tabindex="-1"])');if(er.current=U,U)return;Ue.current=!0,Re.current=l,ve.current=null;try{me.current?.setPointerCapture(l)}catch{}fe.current=t,pe.current=r;const F=me.current;if(F){const P=F.getBoundingClientRect();P.width>0&&P.height>0?(Ee.current={w:P.width,h:P.height},Ie.current=p((t-P.left)/P.width,0,1),Ce.current=p((r-P.top)/P.height,0,1)):(Ie.current=.5,Ce.current=.5)}else Ie.current=.5,Ce.current=.5;ze.current=0,Ae.current=0,st.current=0,Ye.current=0,gt.current=null,Se.current=t,ae.current=performance.now(),vt.current=ae.current,ne.current=0;const R=ye&&Jt.current&&Jt.current.contains(u);en.current=!!R},is=(t,r,l,u,m,h,b)=>{if(Re.current!=null&&l!==Re.current||!Ue.current||fe.current===null||pe.current===null||u==="touch"&&!m||u==="touch"&&typeof h=="number"&&typeof b=="number"&&h>55&&b>55)return;const f=performance.now(),T=t-fe.current,U=r-pe.current;if(!ge.current&&ve.current==null){const V=Math.abs(T),J=Math.abs(U);if(V<wn&&J<wn)return;if(J>V*Hs){Ue.current=!1,Re.current=null,ve.current="y",fe.current=null,pe.current=null,Se.current=null,ae.current=null,ne.current=0;return}ve.current="x",At(!0),ge.current=!0,fe.current=t-Math.sign(T)*wn,pe.current=r,Se.current=t,ae.current=f,ne.current=0,Bt.current&&Dn();const be=me.current;if(be)try{be.setPointerCapture(l)}catch{}}if(!ge.current||fe.current===null)return;const F=t-fe.current,R=rt.current?.96:1,P=Tt(Ee.current.w,R),C=xr(Ee.current.w,R),j=pe.current!=null?r-pe.current:0,A=Math.abs(F),D=Math.abs(j),re=p((A-D*Ks)/Math.max(1,C),0,1),K=p(1-re*.75-A/Math.max(1,P)*.22,Gs,1),Q=j*K,le=p((A-C*.55)/Math.max(1,C*.75),0,1),xe=F+Math.sign(F)*gn*.18*le;ze.current=xe,Ae.current=p(Q,-70,70);let he=null;if(xe>C?he="like":xe<-C&&(he="dislike"),he&&he!==yt.current&&(Ut("threshold",.6),Zr()),yt.current=he,Se.current!==null&&ae.current!==null){const V=f-ae.current;if(V>0){const J=(t-Se.current)/V,be=p(J,-2.5,2.5);ne.current=ne.current*.75+be*.25}}if(Se.current=t,ae.current=f,Me.current!=null)return;const ot=()=>{Me.current=null;const V=p(G.dragFollowAlpha,.08,1);let J=ze.current;if(Ue.current&&ge.current&&ae.current!=null){const be=(typeof performance<"u"?performance.now():Date.now())-ae.current;if(be>hr){const un=p((be-hr)/260,0,1),Kt=Math.abs(J);if(Kt>C*.45&&Kt<P*.86){const mn=Math.sign(J)*Math.min(C*.92,P*.84),fn=p(mn-J,-gn,gn);J=J+fn*un}}}Ye.current=Ye.current+(J-Ye.current)*V,jt(Ye.current),Ue.current&&ge.current&&ve.current==="x"&&(Me.current=window.requestAnimationFrame(ot))};Me.current=window.requestAnimationFrame(ot)},nr=(t,r,l)=>{if(Re.current!=null&&t!==Re.current)return;const u=ge.current;At(!1),ge.current=!1,Ue.current=!1;const m=Re.current;Re.current=null,Me.current!=null&&(cancelAnimationFrame(Me.current),Me.current=null,jt(Ye.current));const h=t??m;if(h!=null)try{me.current?.releasePointerCapture(h)}catch{}if(!u){const A=ve.current==="y",D=fe.current,re=pe.current,K=D!=null&&r!=null?r-D:0,Q=re!=null&&l!=null?l-re:0,le=vt.current!=null?performance.now()-vt.current:null,xe=!A&&Math.abs(K)<10&&Math.abs(Q)<10&&(le==null||le<280)&&!er.current;fe.current=null,pe.current=null,Se.current=null,ae.current=null,ne.current=0,vt.current=null,ze.current=0,Ae.current=0,ve.current=null,Ie.current=.5,Ce.current=.5,yt.current=null,xe&&!(ye&&en.current)&&(z(he=>!he),Ze(!1));return}vt.current=null;const f=p(st.current,-Ct,Ct)+ne.current*G.velocityProjectionMs,T=ye&&en.current,U=rt.current?.96:1,F=Tt(Ee.current.w,U),R=T?F*1.6:F,P=rt.current?br*.92:br,C=T?P*1.4:P,j=Math.abs(f)>=R||Math.abs(ne.current)>=C;if(fe.current=null,pe.current=null,Se.current=null,ae.current=null,ze.current=0,Ae.current=0,Ye.current=0,gt.current=null,ve.current=null,j){Pe(f>=0?"like":"dislike",ne.current),yt.current=null,ne.current=0;return}Ut("snap",p(Math.abs(ne.current)/1.35,.25,.9)),Ht(!0,ne.current)},We=!a||S||te||oe,rr=typeof a?.friendLikesCount=="number"?a.friendLikesCount:0,as=Be>0?Math.round(rr/Math.max(1,Be)*100):0;i.useEffect(()=>{const t=r=>{!a||We||oe||(r.key==="ArrowLeft"?(r.preventDefault(),Pe("dislike")):r.key==="ArrowRight"?(r.preventDefault(),Pe("like")):(r.key==="ArrowDown"||r.key===" ")&&(r.preventDefault(),Pe("skip")))};return window.addEventListener("keydown",t),()=>window.removeEventListener("keydown",t)},[a,We,oe]);const ls=()=>{if(!Tr||!ft)return null;const t=ft.direction==="like"?"Loved it":ft.direction==="dislike"?"Marked as ‘No thanks’":"Saved for ‘Not now’";return e.jsx("div",{className:"pointer-events-none fixed inset-x-0 bottom-4 z-40 flex justify-center page-pad",children:e.jsxs("div",{className:"pointer-events-auto inline-flex items-center gap-3 rounded-md border border-border bg-background/95 px-3 py-2 text-[12px] text-foreground shadow-lg backdrop-blur",children:[e.jsx("span",{children:t}),e.jsx("button",{type:"button","aria-label":"Back to previous card",onClick:ns,className:"text-xs font-semibold uppercase tracking-[0.14em] text-primary hover:text-primary/80",children:"Back"})]})})},os=()=>kn?e.jsx("div",{className:"pointer-events-none absolute inset-x-0 top-2 z-30 flex justify-center page-pad",children:e.jsxs("div",{className:"pointer-events-auto inline-flex max-w-md items-start gap-2 rounded-md border border-border bg-background/95 px-3 py-2 text-xs text-muted-foreground shadow-lg backdrop-blur",children:[e.jsx(_,{name:"auto_awesome",className:"mt-0.5 text-[18px] text-primary"}),e.jsx("span",{children:kn})]})}):null,Nt=typeof a?.imdbRating=="number"&&!Number.isNaN(a.imdbRating)?a.imdbRating:typeof L?.imdb_rating=="number"&&!Number.isNaN(L.imdb_rating)?L.imdb_rating:ee(L?.imdb_rating),kt=typeof a?.rtTomatoMeter=="number"&&!Number.isNaN(a.rtTomatoMeter)?a.rtTomatoMeter:typeof L?.rt_tomato_pct=="number"&&!Number.isNaN(L.rt_tomato_pct)?L.rt_tomato_pct:ee(L?.rt_tomato_pct),cn=i.useMemo(()=>gr({card:a??null,friendCount:Be,imdb:Nt??null,rt:kt??null}),[a,Be,Nt,kt]),lt=a?(()=>{const t=[];if(a.year&&t.push(String(a.year)),Nt!=null&&ee(Nt)!=null&&t.push(`IMDb ${String(ee(Nt)?.toFixed(1))}`),kt!=null&&ee(kt)!=null&&t.push(`RT ${Math.round(Number(kt))}%`),typeof a.runtimeMinutes=="number"&&a.runtimeMinutes>0){const r=ur(a.runtimeMinutes);r&&t.push(r)}return t.join(" • ")})():"",dn=i.useMemo(()=>{const t=an??a?.type??null;return t==="series"?"SERIES":t==="anime"?"ANIME":"MOVIE"},[an,a?.type]),sr=i.useMemo(()=>{const t=ue??a?.genres??null;return(Array.isArray(t)?t:t?String(t).split(",").map(l=>l.trim()).filter(Boolean):[]).map(l=>String(l??"").trim()).filter(Boolean).slice(0,3)},[ue,a?.genres]),cs=t=>{if(typeof window<"u"&&window.matchMedia&&window.matchMedia("(pointer: coarse)").matches||oe)return;const r=me.current;if(!r)return;const l=r.getBoundingClientRect(),u=(t.clientX-l.left)/l.width,m=(t.clientY-l.top)/l.height;tt.current={x:(u-.5)*2,y:(m-.5)*2},jt(ze.current)},ds=()=>{oe||(tt.current={x:0,y:0},jt(st.current,!0))};return e.jsxs("div",{"data-reduce-motion":$r?"1":"0",className:"relative flex flex-1 min-h-0 flex-col overflow-hidden overscroll-none h-[calc(100dvh-(5.5rem+env(safe-area-inset-bottom)))]",style:Js,children:[e.jsx("style",{children:Zs}),a?.posterUrl&&e.jsxs("div",{"aria-hidden":"true",className:"pointer-events-none absolute inset-0 -z-10",style:{backgroundImage:`url(${a.posterUrl})`,backgroundSize:"cover",backgroundPosition:"center"},children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-background/40 via-background/70 to-background"}),e.jsx("div",{className:"absolute inset-0 backdrop-blur-2xl"})]}),os(),e.jsxs("div",{className:"relative z-10 flex shrink-0 flex-col gap-[calc(var(--mn-swipe-pad)*0.75)] px-[var(--mn-swipe-pad)] pt-[calc(env(safe-area-inset-top)+var(--mn-swipe-pad)*0.75)]",children:[e.jsxs("header",{className:"flex items-center justify-between",children:[e.jsx("button",{type:"button",onClick:()=>I(!0),className:"inline-flex h-[var(--mn-swipe-top-hit)] w-[var(--mn-swipe-top-hit)] items-center justify-center text-muted-foreground/90 transition-colors hover:text-foreground","aria-label":"Filters",children:e.jsx(_,{name:"tune",className:"text-[length:var(--mn-swipe-top-icon)]"})}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-[length:var(--mn-swipe-kicker)] font-semibold tracking-[0.25em] text-primary/90",children:"DISCOVERY"}),e.jsx("div",{className:"text-[length:var(--mn-swipe-header)] font-semibold text-foreground",children:"For You"})]}),e.jsxs("button",{type:"button",onClick:()=>n("/activity"),className:"relative inline-flex h-[var(--mn-swipe-top-hit)] w-[var(--mn-swipe-top-hit)] items-center justify-center text-muted-foreground/90 transition-colors hover:text-foreground","aria-label":"Activity",children:[e.jsx(_,{name:"notifications",className:"text-[length:var(--mn-swipe-top-icon)]"}),e.jsx("span",{"aria-hidden":"true",className:"absolute right-[8px] top-[8px] h-2 w-2 rounded-full bg-primary"})]})]}),e.jsx(qs,{message:Et,onRetry:He,isRetrying:Ke})]}),e.jsxs("div",{className:"relative z-10 flex flex-1 min-h-0 flex-col overflow-visible px-[var(--mn-swipe-pad)]",children:[e.jsxs("div",{className:"relative flex flex-1 min-h-0 items-center justify-center overflow-visible [perspective:1400px]","aria-live":"polite",children:[S&&!a&&!te&&e.jsx(Ns,{}),te&&!S&&e.jsxs("div",{className:"flex h-full w-full flex-col items-center justify-center gap-3 text-center text-sm text-muted-foreground",children:[e.jsx(_,{name:"info",className:"text-[32px] text-amber-400"}),e.jsx("p",{children:"We couldn't load your swipe deck."}),e.jsx("button",{type:"button",onClick:()=>we(32),className:"mt-1 rounded-md border border-border px-3 py-1.5 text-[12px] font-semibold text-foreground hover:bg-card/70",children:"Retry"})]}),!S&&!te&&!a&&e.jsxs("div",{className:"flex h-full w-full flex-col items-center justify-center gap-3 text-center text-sm text-muted-foreground",children:[e.jsx(_,{name:"auto_awesome",className:"text-[32px] text-primary"}),e.jsx("p",{children:"All caught up. New cards will appear soon."}),e.jsx("button",{type:"button",onClick:()=>we(36),className:"mt-1 rounded-md border border-border px-3 py-1.5 text-[12px] font-semibold text-foreground hover:bg-card/70",children:"Refresh deck"})]}),!S&&a&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"relative z-10 mx-auto h-full max-h-[720px] w-full max-w-md",children:[E&&e.jsx("div",{"aria-hidden":"true",className:"pointer-events-none absolute inset-0",children:(()=>{const t=E;if(!t)return null;const r=typeof t.friendLikesCount=="number"?t.friendLikesCount:Array.isArray(t.friendProfiles)?t.friendProfiles.length:0,l=Be>0?Math.round(r/Math.max(1,Be)*100):0,u=typeof t.imdbRating=="number"&&!Number.isNaN(t.imdbRating)?t.imdbRating:Lr??null,m=typeof t.rtTomatoMeter=="number"&&!Number.isNaN(t.rtTomatoMeter)?t.rtTomatoMeter:Pr??null,h=gr({card:t,friendCount:Be,imdb:u,rt:m}),b=(()=>{const f=Array.isArray(t.genres)?t.genres:[],T=ht?.omdb_genre!=null?String(ht.omdb_genre).split(",").map(F=>F.trim()).filter(Boolean):[];return(f.length>0?f:T).map(F=>String(F??"").trim()).filter(Boolean).slice(0,3)})();return e.jsx("div",{ref:Jn,className:"absolute inset-0",style:{filter:"brightness(0.68) saturate(0.9)",willChange:"filter"},children:e.jsx("div",{className:"relative h-full w-full rounded-[var(--mn-swipe-radius)] bg-gradient-to-b from-white/10 via-primary/25 to-white/10 p-[1.25px] shadow-[0_30px_90px_rgba(0,0,0,0.75)]",children:e.jsxs("div",{className:"relative h-full w-full overflow-hidden rounded-[var(--mn-swipe-radius)] bg-background/20 backdrop-blur-sm",children:[Y&&t.posterUrl?e.jsx("img",{src:t.posterUrl,alt:Vt(t)??`${t.title} poster`,className:"h-full w-full object-cover",draggable:!1,loading:"lazy",onError:()=>d(t.id,!0)}):e.jsx("div",{className:"h-full w-full",children:e.jsx(bn,{title:t.title})}),e.jsx("div",{className:"pointer-events-none absolute inset-0 bg-gradient-to-b from-black/10 via-black/20 to-black/70"}),t.source==="from-friends"&&e.jsx("div",{className:"absolute left-[var(--mn-swipe-pad)] top-[var(--mn-swipe-pad)]",children:(()=>{const f=t.topFriendName??t.friendProfiles?.[0]?.display_name??t.friendProfiles?.[0]?.username??"",T=Math.max(0,r-1),U=!!f,F=(f.trim().charAt(0)||"F").toUpperCase();return e.jsxs("div",{className:"flex items-center gap-2 rounded-full border border-white/10 bg-black/30 px-2.5 py-2 shadow-sm backdrop-blur-md",children:[e.jsx("div",{className:"grid h-10 w-10 place-items-center overflow-hidden rounded-full border border-white/20 bg-white/10 text-sm font-semibold text-white/90",children:U&&t.friendProfiles?.[0]?.avatar_url?e.jsx("img",{src:t.friendProfiles[0].avatar_url,alt:f||"Friend",className:"h-full w-full object-cover",loading:"lazy",referrerPolicy:"no-referrer"}):e.jsx("span",{children:F})}),T>0&&e.jsxs("div",{className:"grid h-10 w-10 place-items-center rounded-full border border-white/10 bg-white/10 text-sm font-semibold text-white/90",children:["+",T]}),e.jsx("div",{className:"pr-1 text-sm font-semibold text-white/90",children:U?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"text-primary",children:f}),e.jsxs("span",{className:"text-white/80",children:[" ","& others watched"]})]}):e.jsx("span",{className:"text-white/80",children:"From friends"})})]})})()}),e.jsxs("div",{className:"absolute inset-x-0 bottom-0 px-[var(--mn-swipe-pad)] pb-[var(--mn-swipe-pad)]",children:[e.jsx("div",{"aria-hidden":"true",className:"pointer-events-none absolute inset-x-0 bottom-0 h-[72%] bg-gradient-to-t from-black/85 via-black/40 to-transparent"}),e.jsxs("div",{className:"relative",children:[(()=>{const f=t.source??"for-you",T=f==="trending"?{label:"Trending",icon:"local_fire_department"}:f==="popular"?{label:"Popular",icon:"stars"}:f==="from-friends"?{label:"From Friends",icon:"group"}:{label:"For You",icon:"auto_awesome"};return e.jsxs("div",{className:"mb-3 inline-flex items-center gap-2 rounded-full bg-primary/25 px-3 py-1.5 text-[length:var(--mn-swipe-chip)] font-semibold text-primary-foreground backdrop-blur",children:[e.jsx(_,{name:T.icon,filled:!0,className:"text-[18px]"}),e.jsx("span",{className:"tracking-[0.12em]",children:T.label}),e.jsx("span",{className:"text-white/35",children:"•"}),e.jsxs("span",{className:"font-semibold text-emerald-300",children:[h,"% Match"]})]})})(),e.jsx("h2",{className:"line-clamp-2 text-[length:var(--mn-swipe-title)] font-extrabold leading-[1.02] text-white",children:t.title}),Rn&&e.jsxs("p",{className:"mt-1 text-[length:var(--mn-swipe-subtitle)] font-semibold text-white/60",children:["Directed by ",Rn.split(",")[0]]}),e.jsx("div",{className:"mt-4 text-[length:var(--mn-swipe-meta)] text-white/70 whitespace-nowrap overflow-hidden text-ellipsis",children:[t.year?e.jsx("span",{children:t.year},"y"):null,u!=null?e.jsxs("span",{className:"text-white/70",children:["IMDb ",String(u.toFixed(1))]},"i"):null,m!=null?e.jsxs("span",{className:"text-white/70",children:["RT ",Math.round(m),"%"]},"r"):null,typeof t.runtimeMinutes=="number"&&t.runtimeMinutes>0?e.jsx("span",{children:ur(t.runtimeMinutes)},"t"):null].filter(Boolean).map((f,T)=>e.jsxs(or.Fragment,{children:[T>0&&e.jsx("span",{className:"mx-1 text-white/30",children:"•"}),f]},T))}),Array.isArray(t.friendProfiles)&&t.friendProfiles.length>0&&e.jsxs("div",{className:"mt-5 flex w-full items-center justify-between gap-3 rounded-2xl border border-white/10 bg-white/10 px-4 py-3 text-left backdrop-blur-md","aria-label":"Friends summary",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(cr,{profiles:t.friendProfiles,max:3,size:32}),e.jsxs("div",{className:"leading-tight",children:[e.jsxs("p",{className:"text-[length:var(--mn-swipe-subtitle)] font-extrabold text-white",children:[p(Math.round(l),0,100),"% of friends"]}),e.jsxs("p",{className:"text-sm font-semibold text-white/60",children:[t.source==="from-friends"?"watched":"liked"," ","this title"]})]})]}),e.jsx("div",{className:"grid h-[var(--mn-swipe-hit)] w-[var(--mn-swipe-hit)] place-items-center rounded-full border border-white/10 bg-white/10 text-white/70",children:e.jsx(_,{name:"chevron_right",className:"text-[length:var(--mn-swipe-top-icon)]"})})]}),b.length>0&&e.jsx("div",{className:"mt-4 flex flex-wrap gap-3",children:b.map(f=>e.jsxs("span",{className:"inline-flex items-center rounded-full border border-white/10 bg-white/10 px-3 py-1.5 text-[length:var(--mn-swipe-chip)] font-semibold text-white/75",children:["#",f]},f))})]})]})]})})})})()}),e.jsx("div",{className:"relative h-full w-full rounded-[var(--mn-swipe-radius)] bg-gradient-to-b from-white/10 via-primary/25 to-white/10 p-[1.25px] shadow-[0_30px_90px_rgba(0,0,0,0.75)]",children:e.jsxs("article",{ref:me,role:"group","aria-roledescription":"Movie card","aria-label":Vt(a),className:`relative h-full w-full select-none overflow-hidden rounded-[var(--mn-swipe-radius)] bg-background/20 backdrop-blur-sm transform-gpu will-change-transform ${ye?"ring-1 ring-primary/40":""}`,onPointerDown:t=>{t.pointerType==="mouse"&&t.button!==0||ss(t.clientX,t.clientY,t.pointerId,t.target,t.pointerType,t.isPrimary,t.width,t.height)},onPointerMove:t=>is(t.clientX,t.clientY,t.pointerId,t.pointerType,t.isPrimary,t.width,t.height),onPointerUp:t=>nr(t.pointerId,t.clientX,t.clientY),onPointerCancel:t=>nr(t.pointerId,t.clientX,t.clientY),onMouseMove:cs,onMouseLeave:ds,style:{touchAction:ye?"pan-y":"none",overscrollBehavior:"contain",userSelect:"none",WebkitUserSelect:"none"},children:[e.jsx("div",{ref:En,"aria-hidden":"true",className:"pointer-events-none absolute inset-0 z-20 overflow-hidden"}),e.jsxs("div",{"aria-hidden":"true",className:"pointer-events-none absolute inset-[-48px] z-[1]",children:[e.jsx("div",{className:"absolute inset-0 blur-3xl bg-emerald-400/30",style:{opacity:"var(--mn-swipe-like-opacity, 0)"}}),e.jsx("div",{className:"absolute inset-0 blur-3xl bg-rose-400/30",style:{opacity:"var(--mn-swipe-nope-opacity, 0)"}})]}),e.jsx("div",{"aria-hidden":"true",className:"pointer-events-none absolute inset-0 z-[19]",style:{background:"radial-gradient(circle at var(--mn-swipe-spec-x, 50%) var(--mn-swipe-spec-y, 30%), rgba(255,255,255,0.35), rgba(255,255,255,0) 55%)",opacity:"var(--mn-swipe-spec-o, 0)",mixBlendMode:"soft-light"}}),!ye&&e.jsxs("div",{className:"relative z-[2] h-full w-full",children:[Zn&&a.posterUrl?e.jsx("img",{src:a.posterUrl,alt:Vt(a)??`${a.title} poster`,className:"h-full w-full object-cover",style:{transform:"translate3d(var(--mn-swipe-poster-parallax, 0px), var(--mn-swipe-poster-parallax-y, 0px), 0) scale(1.035)",willChange:"transform"},draggable:!1,loading:"lazy",onError:()=>v(!0)}):e.jsx("div",{className:"h-full w-full",style:{transform:"translate3d(var(--mn-swipe-poster-parallax, 0px), var(--mn-swipe-poster-parallax-y, 0px), 0) scale(1.02)",willChange:"transform"},children:e.jsx(bn,{title:a.title})}),e.jsx("div",{className:"pointer-events-none absolute inset-0 bg-gradient-to-b from-black/10 via-black/20 to-black/70",style:{transform:"translate3d(var(--mn-swipe-bg-parallax, 0px), 0, 0)",willChange:"transform"}}),e.jsx("div",{className:"pointer-events-none absolute inset-x-[calc(var(--mn-swipe-pad)*1.2)] top-[calc(var(--mn-swipe-pad)*0.8)] flex justify-start",children:e.jsxs("div",{className:`flex items-center gap-2 rounded-md bg-emerald-500/14 px-3 py-1.5 text-xs font-semibold uppercase tracking-[0.14em] text-emerald-200 shadow-md backdrop-blur-sm ${oe?"":"transition-[opacity,transform] duration-200"}`,style:{opacity:"var(--mn-swipe-like-opacity, 0)",transform:"translate3d(0,0,0) scale(var(--mn-swipe-like-scale, 0.96))"},children:[e.jsx(_,{name:"favorite",filled:!0,className:"text-[18px] text-emerald-300"}),e.jsx("span",{children:"Love it"})]})}),e.jsx("div",{className:"pointer-events-none absolute inset-x-[calc(var(--mn-swipe-pad)*1.2)] top-[calc(var(--mn-swipe-pad)*0.8)] flex justify-end",children:e.jsxs("div",{className:`flex items-center gap-2 rounded-md bg-rose-500/14 px-3 py-1.5 text-xs font-semibold uppercase tracking-[0.14em] text-rose-200 shadow-md backdrop-blur-sm ${oe?"":"transition-[opacity,transform] duration-200"}`,style:{opacity:"var(--mn-swipe-nope-opacity, 0)",transform:"translate3d(0,0,0) scale(var(--mn-swipe-nope-scale, 0.96))"},children:[e.jsx(_,{name:"close",className:"text-[18px] text-rose-300"}),e.jsx("span",{children:"No thanks"})]})}),a.source==="from-friends"&&e.jsx("div",{className:"absolute left-[var(--mn-swipe-pad)] top-[var(--mn-swipe-pad)]",children:(()=>{const t=a.topFriendName??a.friendProfiles?.[0]?.display_name??a.friendProfiles?.[0]?.username??"",r=Math.max(0,rr-1),l=!!t,u=(t.trim().charAt(0)||"F").toUpperCase();return e.jsxs("div",{className:"flex items-center gap-2 rounded-full border border-white/10 bg-black/30 px-2.5 py-2 shadow-sm backdrop-blur-md",children:[e.jsx("div",{className:"grid h-10 w-10 place-items-center overflow-hidden rounded-full border border-white/20 bg-white/10 text-sm font-semibold text-white/90",children:l&&a.friendProfiles?.[0]?.avatar_url?e.jsx("img",{src:a.friendProfiles[0].avatar_url,alt:t||"Friend",className:"h-full w-full object-cover",loading:"lazy",referrerPolicy:"no-referrer"}):e.jsx("span",{children:u})}),r>0&&e.jsxs("div",{className:"grid h-10 w-10 place-items-center rounded-full border border-white/10 bg-white/10 text-sm font-semibold text-white/90",children:["+",r]}),e.jsx("div",{className:"pr-1 text-sm font-semibold text-white/90",children:l?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"text-primary",children:t}),e.jsx("span",{className:"text-white/80",children:" & others watched"})]}):e.jsx("span",{className:"text-white/80",children:"From friends"})})]})})()}),e.jsxs("div",{className:"absolute inset-x-0 bottom-0 px-[var(--mn-swipe-pad)] pb-[var(--mn-swipe-pad)]",children:[e.jsx("div",{"aria-hidden":"true",className:"pointer-events-none absolute inset-x-0 bottom-0 h-[72%] bg-gradient-to-t from-black/85 via-black/40 to-transparent"}),e.jsxs("div",{className:"relative",children:[(()=>{const t=a.source??"for-you",r=t==="trending"?{label:"Trending",icon:"local_fire_department"}:t==="popular"?{label:"Popular",icon:"stars"}:t==="from-friends"?{label:"From Friends",icon:"group"}:{label:"For You",icon:"auto_awesome"};return e.jsxs("div",{className:"mb-3 inline-flex items-center gap-2 rounded-full bg-primary/25 px-3 py-1.5 text-[length:var(--mn-swipe-chip)] font-semibold text-primary-foreground backdrop-blur",children:[e.jsx(_,{name:r.icon,filled:!0,className:"text-[18px]"}),e.jsx("span",{className:"tracking-[0.12em]",children:r.label}),e.jsx("span",{className:"text-white/35",children:"•"}),e.jsxs("span",{className:"font-semibold text-emerald-300",children:[cn,"% Match"]})]})})(),e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsx("h2",{className:"min-w-0 line-clamp-2 text-[length:var(--mn-swipe-title)] font-extrabold leading-[1.02] text-white",children:a.title}),e.jsx("span",{className:"shrink-0 rounded-full border border-white/10 bg-white/10 px-3 py-1 text-[length:var(--mn-swipe-chip)] font-extrabold tracking-[0.14em] text-white/75",children:dn})]}),qe&&e.jsxs("p",{className:"mt-1 text-[length:var(--mn-swipe-subtitle)] font-semibold text-white/60",children:["Directed by ",qe.split(",")[0]]}),lt&&e.jsx("div",{className:"mt-4 text-[length:var(--mn-swipe-meta)] text-white/70 whitespace-nowrap overflow-hidden text-ellipsis",children:lt}),Array.isArray(a.friendProfiles)&&a.friendProfiles.length>0&&e.jsxs("button",{type:"button",onClick:()=>Qe(!0),className:"mt-5 flex w-full items-center justify-between gap-3 rounded-2xl border border-white/10 bg-white/10 px-4 py-3 text-left backdrop-blur-md","aria-label":"See friends","data-swipe-interactive":"true",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(cr,{profiles:a.friendProfiles,max:3,size:32}),e.jsxs("div",{className:"leading-tight",children:[e.jsxs("p",{className:"text-[length:var(--mn-swipe-subtitle)] font-extrabold text-white",children:[p(Math.round(as),0,100),"% of friends"]}),e.jsxs("p",{className:"text-sm font-semibold text-white/60",children:[a.source==="from-friends"?"watched":"liked"," ","this title"]})]})]}),e.jsx("div",{className:"grid h-[var(--mn-swipe-hit)] w-[var(--mn-swipe-hit)] place-items-center rounded-full border border-white/10 bg-white/10 text-white/70",children:e.jsx(_,{name:"chevron_right",className:"text-[length:var(--mn-swipe-top-icon)]"})})]}),sr.length>0&&e.jsx("div",{className:"mt-4 flex flex-wrap gap-3",children:sr.map(t=>e.jsxs("span",{className:"inline-flex items-center rounded-full border border-white/10 bg-white/10 px-3 py-1.5 text-[length:var(--mn-swipe-chip)] font-semibold text-white/75",children:["#",t]},t))})]})]})]}),ye&&a&&e.jsxs("div",{className:"absolute inset-0 z-10 flex h-full flex-col",children:[e.jsxs("div",{className:"absolute inset-0 z-0 overflow-hidden bg-[#261933]",children:[Zn&&a.posterUrl?e.jsx("img",{src:a.posterUrl,alt:Vt(a)??`${a.title} poster`,className:"h-full w-full object-cover",draggable:!1,loading:"lazy",onError:()=>v(!0),style:{filter:"blur(6px) brightness(0.60)",transform:"scale(1.14)"}}):e.jsx(bn,{title:a.title}),e.jsx("div",{className:"pointer-events-none absolute inset-0 z-0 bg-gradient-to-b from-black/10 via-black/60 to-[#261933]"})]}),e.jsx("button",{type:"button",onClick:()=>z(!1),className:"absolute right-[var(--mn-swipe-pad)] top-[var(--mn-swipe-pad)] z-20 inline-flex h-[var(--mn-swipe-top-hit)] w-[var(--mn-swipe-top-hit)] items-center justify-center rounded-full border border-white/10 bg-white/10 text-white/80 backdrop-blur hover:bg-white/15","aria-label":"Close details","data-swipe-interactive":"true",children:e.jsx(_,{name:"close",className:"text-[length:var(--mn-swipe-top-icon)]"})}),e.jsxs("div",{className:"relative z-10 flex min-h-0 flex-1 flex-col px-[var(--mn-swipe-pad)] pb-[var(--mn-swipe-pad)] pt-[calc(var(--mn-swipe-top-hit)+var(--mn-swipe-pad)*0.75)]",children:[e.jsx("div",{"aria-hidden":"true",className:"pointer-events-none absolute inset-0 z-0 bg-gradient-to-b from-[#261933]/35 via-[#261933]/90 to-[#261933]"}),e.jsxs("div",{ref:Jt,id:"swipe-detail-panel","aria-label":de?"Full details":"Details summary","aria-live":"polite",className:"relative z-10 mt-1 flex min-h-0 flex-1 flex-col text-left text-[13px] text-white/70",children:[e.jsx("div",{"data-swipe-interactive":"true",className:"flex min-h-0 flex-1 flex-col overflow-hidden",children:de?e.jsxs("div",{className:"flex min-h-0 flex-1 flex-col gap-3",children:[e.jsxs("div",{className:"shrink-0 space-y-2",children:[(()=>{const t=a.source??"for-you",r=t==="trending"?{label:"Trending",icon:"local_fire_department"}:t==="popular"?{label:"Popular",icon:"stars"}:t==="from-friends"?{label:"From Friends",icon:"group"}:{label:"For You",icon:"auto_awesome"};return e.jsxs("div",{className:"inline-flex items-center gap-2 rounded-full bg-white/10 px-[calc(var(--mn-swipe-pad)*0.75)] py-[calc(var(--mn-swipe-pad)*0.25)] text-[length:var(--mn-swipe-chip)] font-semibold text-white/80",children:[e.jsx(_,{name:r.icon,filled:!0,className:"text-[length:calc(var(--mn-swipe-chip)+0.25rem)]"}),e.jsx("span",{className:"tracking-[0.12em]",children:r.label}),e.jsx("span",{className:"text-white/35",children:"•"}),e.jsxs("span",{className:"font-semibold text-emerald-300",children:[cn,"% Match"]})]})})(),e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsx("h3",{className:"min-w-0 line-clamp-1 text-[clamp(1.05rem,4.6vw,1.35rem)] font-extrabold text-white",children:a.title}),e.jsx("span",{className:"shrink-0 rounded-full border border-white/10 bg-white/10 px-[calc(var(--mn-swipe-pad)*0.7)] py-[calc(var(--mn-swipe-pad)*0.22)] text-[length:var(--mn-swipe-chip)] font-extrabold tracking-[0.14em] text-white/75",children:dn})]}),lt&&e.jsx("p",{className:"text-[length:var(--mn-swipe-meta)] text-white/55 whitespace-nowrap overflow-hidden text-ellipsis",children:lt})]}),e.jsxs("div",{className:"flex min-h-0 flex-1 flex-col gap-2 overflow-hidden",children:[e.jsx("div",{className:"shrink-0 grid grid-cols-2 gap-x-3 gap-y-2 rounded-2xl border border-white/10 bg-white/10 px-[calc(var(--mn-swipe-pad)*0.75)] py-[calc(var(--mn-swipe-pad)*0.5)] text-[length:var(--mn-swipe-chip)] leading-snug text-white/75",children:(()=>{const t=[];if(Hn.length>0&&t.push({label:"Genres",value:Hn.slice(0,6).join(", ")}),Kn.length>0&&t.push({label:"Languages",value:Kn.slice(0,4).join(", ")}),qe&&t.push({label:"Director",value:qe}),Bn&&t.push({label:"Writers",value:Bn}),wt){const l=wt.split(",").map(u=>u.trim()).filter(Boolean).slice(3);l.length>0&&t.push({label:"More cast",value:l.slice(0,8).join(", ")})}return Un&&t.push({label:"Released",value:Un}),qn&&t.push({label:"Awards",value:qn}),zn&&t.push({label:"Box office",value:zn}),nt&&ee(nt)!=null&&t.push({label:"IMDb",value:String(ee(nt)?.toFixed(1))}),nn&&ee(nn)!=null&&t.push({label:"RT",value:`${String(ee(nn))}%`}),sn&&mr(sn)&&t.push({label:"IMDb votes",value:String(mr(sn))}),rn&&ee(rn)!=null&&t.push({label:"Metascore",value:String(ee(rn))}),t.slice(0,10).map(r=>e.jsxs("div",{className:"min-w-0",children:[e.jsx("p",{className:"text-[length:var(--mn-swipe-kicker)] font-semibold uppercase tracking-[0.14em] text-white/45",children:r.label}),e.jsx("p",{className:"line-clamp-2",children:r.value})]},r.label))})()}),e.jsxs("div",{className:"flex min-h-0 flex-1 flex-col overflow-hidden rounded-2xl border border-white/10 bg-white/10 px-3 py-2",children:[e.jsx("p",{className:"text-[length:var(--mn-swipe-kicker)] font-semibold uppercase tracking-[0.14em] text-white/45",children:"Overview"}),Yt?e.jsx("p",{className:"mt-1 min-h-0 flex-1 overflow-hidden text-[length:var(--mn-swipe-meta)] leading-relaxed text-white/70",style:{display:"-webkit-box",WebkitBoxOrient:"vertical",WebkitLineClamp:X,overflow:"hidden"},children:Yt}):e.jsx("p",{className:"mt-1 text-[length:var(--mn-swipe-meta)] text-white/40",children:"No overview available."})]})]})]}):e.jsxs("div",{className:"flex min-h-0 flex-1 flex-col gap-3",children:[e.jsxs("div",{className:"shrink-0 space-y-2",children:[(()=>{const t=a.source??"for-you",r=t==="trending"?{label:"Trending",icon:"local_fire_department"}:t==="popular"?{label:"Popular",icon:"stars"}:t==="from-friends"?{label:"From Friends",icon:"group"}:{label:"For You",icon:"auto_awesome"};return e.jsxs("div",{className:"inline-flex items-center gap-2 rounded-full bg-white/10 px-[calc(var(--mn-swipe-pad)*0.75)] py-[calc(var(--mn-swipe-pad)*0.25)] text-[length:var(--mn-swipe-chip)] font-semibold text-white/80",children:[e.jsx(_,{name:r.icon,filled:!0,className:"text-[length:calc(var(--mn-swipe-chip)+0.25rem)]"}),e.jsx("span",{className:"tracking-[0.12em]",children:r.label}),e.jsx("span",{className:"text-white/35",children:"•"}),e.jsxs("span",{className:"font-semibold text-emerald-300",children:[cn,"% Match"]})]})})(),e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsx("h3",{className:"min-w-0 line-clamp-2 text-[clamp(1.25rem,5vw,1.75rem)] font-extrabold leading-[1.06] text-white",children:a.title}),e.jsx("span",{className:"shrink-0 rounded-full border border-white/10 bg-white/10 px-[calc(var(--mn-swipe-pad)*0.7)] py-[calc(var(--mn-swipe-pad)*0.22)] text-[length:var(--mn-swipe-chip)] font-extrabold tracking-[0.14em] text-white/75",children:dn})]}),lt&&e.jsx("p",{className:"text-[clamp(0.78rem,2.8vw,0.95rem)] text-white/60 whitespace-nowrap overflow-hidden text-ellipsis",children:lt}),e.jsxs("div",{className:"flex flex-wrap items-center gap-1.5 text-[clamp(0.70rem,2.6vw,0.8rem)] text-white/65",children:[ue&&e.jsxs("div",{className:"flex min-w-0 flex-1 items-center gap-2",children:[e.jsx("span",{className:"shrink-0 font-semibold text-white/75",children:"Genres"}),e.jsx("span",{className:"min-w-0 flex-1 truncate",children:Array.isArray(ue)?ue.slice(0,3).join(", "):String(ue).split(",").map(t=>t.trim()).slice(0,3).join(", ")})]}),Wn&&e.jsx("span",{className:"rounded-full border border-white/10 bg-white/10 px-2 py-0.5 font-semibold text-white/85",children:Wn}),$n&&e.jsx("span",{className:"rounded-full border border-white/10 bg-white/10 px-2 py-0.5 font-semibold text-white/70",children:$n})]})]}),Yt?e.jsxs("div",{className:"flex min-h-0 flex-1 flex-col overflow-hidden rounded-2xl border border-white/10 bg-white/10 px-3 py-2",children:[e.jsx("p",{className:"text-[length:var(--mn-swipe-kicker)] font-semibold uppercase tracking-[0.16em] text-white/45",children:"Overview"}),e.jsx("p",{className:"mt-1 min-h-0 flex-1 overflow-hidden text-[clamp(0.82rem,2.9vw,0.95rem)] leading-relaxed text-white/70",style:{display:"-webkit-box",WebkitBoxOrient:"vertical",WebkitLineClamp:g,overflow:"hidden"},children:Yt})]}):e.jsx("div",{className:"min-h-0 flex-1"}),qe||wt?e.jsxs("div",{className:"shrink-0 min-w-0 space-y-1 text-[clamp(0.70rem,2.6vw,0.78rem)] text-white/70",children:[qe&&e.jsxs("p",{className:"line-clamp-1 min-w-0",children:[e.jsx("span",{className:"font-semibold text-white/75",children:"Director:"})," ",e.jsx("span",{className:"min-w-0",children:qe})]}),wt&&e.jsxs("p",{className:"line-clamp-1 min-w-0",children:[e.jsx("span",{className:"font-semibold text-white/75",children:"Cast:"})," ",e.jsx("span",{className:"min-w-0",children:wt.split(",").map(t=>t.trim()).filter(Boolean).slice(0,4).join(", ")})]})]}):null,e.jsxs("div",{className:"shrink-0 space-y-2",children:[e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsxs("div",{className:"inline-flex items-center gap-2 rounded-full border border-white/10 bg-white/10 px-3 py-1.5",children:[e.jsx("span",{className:"text-[length:var(--mn-swipe-chip)] font-semibold text-white/50",children:"Your rating"}),e.jsx("div",{className:"flex items-center gap-0.5","aria-label":"Your rating",children:Array.from({length:5}).map((t,r)=>{const l=r+1,u=on!=null&&on>=l;return e.jsx("button",{type:"button",onClick:()=>Kr(l),className:"flex h-[var(--mn-swipe-star-hit)] w-[var(--mn-swipe-star-hit)] items-center justify-center rounded-full hover:scale-105 focus-visible:outline-none",children:e.jsx(_,{name:"star",filled:u,className:`text-[length:var(--mn-swipe-star-icon)] ${u?"text-yellow-400":"text-white/30"}`})},l)})})]}),e.jsxs("div",{className:"ml-auto flex flex-wrap items-center gap-1.5",children:[e.jsx("button",{type:"button",onClick:()=>Gn(De),className:`inline-flex items-center rounded-full px-[calc(var(--mn-swipe-pad)*0.6)] py-[calc(var(--mn-swipe-pad)*0.22)] text-[length:var(--mn-swipe-chip)] font-semibold transition-colors ${Vn(De)?"bg-primary/90 text-primary-foreground":"border border-white/10 bg-white/10 text-white/75 hover:bg-white/15"}`,children:"Watchlist"}),e.jsx("button",{type:"button",onClick:()=>Gn(ct),className:`inline-flex items-center rounded-full px-[calc(var(--mn-swipe-pad)*0.6)] py-[calc(var(--mn-swipe-pad)*0.22)] text-[length:var(--mn-swipe-chip)] font-semibold transition-colors ${Vn(ct)?"bg-emerald-500/90 text-primary-foreground":"border border-white/10 bg-white/10 text-white/75 hover:bg-white/15"}`,children:"Watched"}),e.jsxs("button",{type:"button",onClick:()=>Sn(!0),className:"inline-flex items-center gap-1 rounded-full border border-white/10 bg-white/10 px-[calc(var(--mn-swipe-pad)*0.6)] py-[calc(var(--mn-swipe-pad)*0.22)] text-[length:var(--mn-swipe-chip)] font-semibold text-white/75 hover:bg-white/15",children:[e.jsx(_,{name:"share",className:"text-[length:calc(var(--mn-swipe-chip)+0.2rem)]"}),e.jsx("span",{children:"Share"})]})]})]}),typeof a.friendLikesCount=="number"&&a.friendLikesCount>0||a.topFriendName&&a.topFriendReviewSnippet?e.jsxs("div",{className:"rounded-2xl border border-white/10 bg-white/10 px-[calc(var(--mn-swipe-pad)*0.75)] py-[calc(var(--mn-swipe-pad)*0.5)] text-[length:var(--mn-swipe-chip)] text-white/80 shadow-md",children:[typeof a.friendLikesCount=="number"&&a.friendLikesCount>0&&e.jsxs("div",{className:"inline-flex items-center gap-1 text-[length:var(--mn-swipe-chip)] text-white/60",children:[e.jsx(_,{name:"local_fire_department",filled:!0,className:"text-[16px] text-primary/80"}),a.friendLikesCount===1?"1 friend likes this":`${a.friendLikesCount} friends like this`]}),a.topFriendName&&a.topFriendReviewSnippet&&e.jsxs("div",{className:"mt-1 inline-flex w-full items-start gap-2 text-left",children:[e.jsx(_,{name:"check_circle",filled:!0,className:"mt-0.5 text-[16px] text-primary"}),e.jsxs("span",{className:"block line-clamp-2 text-[length:var(--mn-swipe-chip)]",children:[a.topFriendName,": “",a.topFriendReviewSnippet,"”"]})]})]}):null]})]})}),e.jsx("div",{className:"mt-2 flex shrink-0 justify-end",children:e.jsx("button",{type:"button",onClick:()=>Ze(t=>!t),"aria-expanded":de,"aria-controls":"swipe-detail-panel",className:"inline-flex items-center gap-1 rounded-full border border-white/15 bg-white/5 px-[calc(var(--mn-swipe-pad)*0.6)] py-[calc(var(--mn-swipe-pad)*0.22)] text-[length:var(--mn-swipe-chip)] font-semibold text-white/70 hover:bg-white/10 hover:text-white",children:e.jsx("span",{children:de?"Collapse":"Full details"})})})]})]})]})]},ie??"empty")})]}),Qt&&e.jsx("div",{className:"pointer-events-none absolute inset-0 flex items-center justify-center bg-gradient-to-b from-background/70 via-background/50 to-background/80",children:e.jsxs("div",{className:"pointer-events-auto max-w-xs rounded-2xl border border-border bg-background/95 p-4 text-center shadow-lg",children:[e.jsx("p",{className:"text-sm font-semibold text-foreground",children:"Swipe to decide"}),e.jsx("p",{className:"mt-1 text-[12px] text-muted-foreground",children:"Swipe left to pass, right to save what you love."}),e.jsx("button",{type:"button",className:"mt-3 w-full rounded-xl bg-primary px-3 py-2 text-sm font-semibold text-white shadow-md",onClick:()=>{Ve(!1),typeof window<"u"&&Xe(Rt,"1")},children:"Got it"})]})})]})]}),e.jsxs("div",{className:"mt-3 flex shrink-0 items-center justify-center gap-2","aria-label":"Recommendation feedback",children:[e.jsxs("button",{type:"button",onClick:()=>Pe("dislike",0,"not_interested"),disabled:We,className:"inline-flex items-center gap-2 rounded-full border border-white/10 bg-white/5 px-3 py-1.5 text-xs font-semibold text-white/70 shadow-sm backdrop-blur transition-all duration-150 hover:bg-white/10 active:translate-y-[1px] disabled:cursor-not-allowed disabled:opacity-50","aria-label":"Not interested",children:[e.jsx(_,{name:"thumb_down",filled:!0,className:"text-[16px]"}),"Not interested"]}),e.jsxs("button",{type:"button",onClick:()=>Pe("like",0,"more_like_this"),disabled:We,className:"inline-flex items-center gap-2 rounded-full border border-white/10 bg-white/5 px-3 py-1.5 text-xs font-semibold text-white/70 shadow-sm backdrop-blur transition-all duration-150 hover:bg-white/10 active:translate-y-[1px] disabled:cursor-not-allowed disabled:opacity-50","aria-label":"More like this",children:[e.jsx(_,{name:"auto_awesome",filled:!0,className:"text-[16px]"}),"More like this"]})]}),e.jsxs("div",{className:"mt-2 flex shrink-0 items-center justify-center gap-[var(--mn-swipe-gap)]","aria-label":"Swipe actions",children:[e.jsx("button",{type:"button",onClick:()=>Pe("dislike"),disabled:We,className:"inline-flex h-[var(--mn-swipe-action)] w-[var(--mn-swipe-action)] items-center justify-center rounded-full border border-white/10 bg-white/10 text-white/60 shadow-md backdrop-blur transition-all duration-150 hover:bg-white/15 active:translate-y-[1px] disabled:cursor-not-allowed disabled:opacity-50","aria-label":"Dislike",children:e.jsx(_,{name:"close",className:"text-[length:var(--mn-swipe-icon)]"})}),e.jsx("button",{type:"button",onClick:Xr,disabled:We,className:"relative inline-flex h-[var(--mn-swipe-action-primary)] w-[var(--mn-swipe-action-primary)] items-center justify-center rounded-full bg-primary text-primary-foreground shadow-[0_22px_55px_rgba(0,0,0,0.55)] transition-all duration-150 hover:brightness-110 active:translate-y-[1px] disabled:cursor-not-allowed disabled:opacity-50","aria-label":"Add to watchlist",children:e.jsx(_,{name:"bookmark_add",filled:!0,className:"text-[length:var(--mn-swipe-icon-primary)]"})}),e.jsx("button",{type:"button",onClick:()=>Pe("like"),disabled:We,className:"inline-flex h-[var(--mn-swipe-action)] w-[var(--mn-swipe-action)] items-center justify-center rounded-full border border-white/10 bg-white/10 text-white/60 shadow-md backdrop-blur transition-all duration-150 hover:bg-white/15 active:translate-y-[1px] disabled:cursor-not-allowed disabled:opacity-50","aria-label":"Like",children:e.jsx(_,{name:"favorite",filled:!0,className:"text-[length:var(--mn-swipe-icon)]"})})]}),e.jsx(ni,{isOpen:Ar,onClose:()=>Sn(!1),activeCard:a,shareUrl:Gr,onShareExternal:Vr}),e.jsx(Us,{open:ce,onOpenChange:Qe,profiles:a?.friendProfiles??[],verb:a?.source==="from-friends"?"watched":"liked"}),e.jsx(_r,{open:x,onOpenChange:I,children:e.jsxs(Mr,{className:"max-w-md border border-border/60 bg-card text-foreground",children:[e.jsxs(Sr,{children:[e.jsx(Rr,{children:"Filters"}),e.jsx(Ss,{className:"text-muted-foreground",children:"Fine-tune what shows up in your Discovery deck."})]}),e.jsxs("div",{className:"mt-2 space-y-5",children:[e.jsxs("div",{children:[e.jsx("div",{className:"mb-2 text-xs font-semibold tracking-wide text-muted-foreground",children:"Feedback"}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsxs("button",{type:"button",onClick:()=>Pn(t=>!t),className:["inline-flex items-center gap-2 rounded-full border px-3 py-1.5 text-xs font-semibold transition",et?"border-primary/60 bg-primary/15 text-foreground":"border-border/60 bg-background/30 text-muted-foreground hover:bg-background/45"].join(" "),children:[e.jsx(_,{name:"vibration",filled:!0,className:"text-[18px] "+(et?"text-primary":"text-muted-foreground")}),"Haptics"]}),e.jsxs("button",{type:"button",onClick:()=>An(t=>!t),className:["inline-flex items-center gap-2 rounded-full border px-3 py-1.5 text-xs font-semibold transition",Je?"border-primary/60 bg-primary/15 text-foreground":"border-border/60 bg-background/30 text-muted-foreground hover:bg-background/45"].join(" "),children:[e.jsx(_,{name:Je?"volume_up":"volume_off",filled:!0,className:"text-[18px] "+(Je?"text-primary":"text-muted-foreground")}),"Sound"]})]}),e.jsx("p",{className:"mt-2 text-xs text-muted-foreground",children:"Turn these off if you prefer silent, minimal feedback."})]}),e.jsxs("div",{children:[e.jsx("div",{className:"mb-2 text-xs font-semibold tracking-wide text-muted-foreground",children:"Content type"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:[{label:"All",value:null},{label:"Movies",value:"movie"},{label:"Series",value:"series"},{label:"Anime",value:"anime"}].map(t=>{const r=s===t.value;return e.jsxs("button",{type:"button",onClick:()=>c(t.value),className:["inline-flex items-center gap-2 rounded-full border px-3 py-1.5 text-xs font-semibold transition",r?"border-primary/60 bg-primary/15 text-foreground":"border-border/60 bg-background/30 text-muted-foreground hover:bg-background/45"].join(" "),children:[r?e.jsx(_,{name:"check_circle",filled:!0,className:"text-[18px] text-primary"}):e.jsx("span",{className:"h-4 w-4"}),t.label]},t.label)})})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"mb-2 flex items-center justify-between",children:[e.jsx("div",{className:"text-xs font-semibold tracking-wide text-muted-foreground",children:"Genres"}),w.length>0&&e.jsx("button",{type:"button",onClick:()=>N([]),className:"text-xs font-semibold text-primary hover:underline",children:"Clear"})]}),Z.length===0?e.jsx("p",{className:"text-xs text-muted-foreground",children:"Load a few cards to unlock genre filters."}):e.jsx("div",{className:"max-h-40 overflow-auto rounded-xl border border-border/60 bg-background/20 p-2",children:e.jsx("div",{className:"flex flex-wrap gap-2",children:Z.map(t=>{const r=w.some(l=>l.toLowerCase()===t.toLowerCase());return e.jsx("button",{type:"button",onClick:()=>N(l=>r?l.filter(u=>u.toLowerCase()!==t.toLowerCase()):[...l,t]),className:["rounded-full border px-3 py-1 text-xs font-semibold transition",r?"border-primary/60 bg-primary/15 text-foreground":"border-border/60 bg-card/40 text-muted-foreground hover:bg-card/55"].join(" "),children:t},t)})})})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"mb-2 flex items-center justify-between",children:[e.jsx("div",{className:"text-xs font-semibold tracking-wide text-muted-foreground",children:"Minimum rating"}),e.jsx("div",{className:"text-xs font-semibold text-foreground",children:M<=0?"Any":M.toFixed(1)})]}),e.jsx("input",{type:"range",min:0,max:10,step:.5,value:M,onChange:t=>O(Number(t.target.value)),className:"w-full"}),e.jsxs("div",{className:"mt-1 flex justify-between text-[11px] text-muted-foreground",children:[e.jsx("span",{children:"0"}),e.jsx("span",{children:"10"})]})]}),e.jsxs("div",{className:"flex items-center justify-between gap-3",children:[e.jsx("button",{type:"button",onClick:()=>{c(null),N([]),O(0)},className:"flex-1 rounded-xl border border-border/60 bg-background/20 px-4 py-2 text-sm font-semibold text-muted-foreground hover:bg-background/35",children:"Reset"}),e.jsx("button",{type:"button",onClick:()=>I(!1),className:"flex-1 rounded-xl bg-primary px-4 py-2 text-sm font-semibold text-primary-foreground hover:opacity-90",children:"Done"})]})]})]})}),ls()]})]})},ni=({isOpen:n,onClose:s,activeCard:c,shareUrl:x,onShareExternal:I})=>{const{user:w}=kr(),{data:N=[],isLoading:M}=ks();if(i.useEffect(()=>{if(!n)return;const g=X=>{X.key==="Escape"&&s()};return window.addEventListener("keydown",g),()=>window.removeEventListener("keydown",g)},[n,s]),!n||!c)return null;const O=`Check this out: ${c.title}

${x}`,W=g=>{g.target===g.currentTarget&&s()},$=g=>{(g.key==="Enter"||g.key===" ")&&s()};return e.jsx("div",{role:"button",tabIndex:0,className:"fixed inset-0 z-[9999] flex flex-col justify-end bg-black/55",onClick:W,onKeyDown:$,children:e.jsxs("div",{role:"dialog","aria-modal":"true",className:"pointer-events-auto mb-[72px] w-full max-w-md self-center rounded-t-2xl bg-card pb-3 pt-2 shadow-[0_-18px_45px_rgba(0,0,0,0.65)]",children:[e.jsxs("div",{className:"flex items-center justify-between px-[var(--page-pad-x)] pb-2",children:[e.jsx("button",{type:"button","aria-hidden":"true",tabIndex:-1,className:"inline-flex h-11 w-11 items-center justify-center rounded-full text-muted-foreground",children:e.jsx(_,{name:"search",className:"text-[18px]"})}),e.jsx("span",{className:"text-sm font-semibold text-foreground",children:"Send to"}),e.jsx("button",{type:"button",onClick:s,"aria-label":"Close",className:"inline-flex h-11 w-11 items-center justify-center rounded-full text-muted-foreground transition hover:bg-background/80 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-primary focus-visible:ring-offset-2 focus-visible:ring-offset-background",children:e.jsx("span",{className:"text-[18px] leading-none",children:"×"})})]}),e.jsxs("section",{className:"border-t border-border px-[var(--page-pad-x)] pt-3 pb-2",children:[e.jsx("h2",{className:"mb-2 text-[12px] font-medium uppercase tracking-[0.08em] text-muted-foreground/90",children:"Send to"}),M?e.jsx("div",{className:"flex gap-3 overflow-hidden",children:Array.from({length:4}).map((g,X)=>e.jsxs("div",{className:"flex flex-col items-center gap-1",children:[e.jsx("div",{className:"h-11 w-11 animate-pulse rounded-full bg-border/50"}),e.jsx("div",{className:"h-2.5 w-12 animate-pulse rounded bg-border/40"})]},X))}):w?N.length===0?e.jsx("p",{className:"text-[12px] text-muted-foreground/80",children:"No conversations yet. Start a chat from a profile or the Messages tab."}):e.jsx("div",{className:"flex gap-3 overflow-x-auto pb-1 pt-0.5",children:N.map(g=>e.jsx(ri,{conversation:g,text:O},g.id))}):e.jsx("p",{className:"text-[12px] text-muted-foreground/80",children:"Sign in to share via messages."})]}),e.jsx("section",{className:"border-t border-border px-[var(--page-pad-x)] pt-3 pb-3",children:e.jsxs("div",{className:"flex gap-3 overflow-x-auto pb-1 pt-0.5",children:[e.jsx(ii,{shareUrl:x,title:c.title}),e.jsx(ai,{shareUrl:x,title:c.title}),e.jsx(li,{onShareExternal:I}),e.jsx(si,{shareUrl:x})]})})]})})},ri=({conversation:n,text:s})=>{const c=n.isGroup?null:n.participants?.find(O=>!O.isSelf)??n.participants?.[0],x=c?.displayName??n.title??"Conversation",I=c?.avatarUrl,w=Ms(n.id),N=()=>{w.isPending||w.mutate({text:s})},M=x.split(" ").map(O=>O.charAt(0).toUpperCase()).slice(0,2).join("");return e.jsxs("button",{type:"button",onClick:N,className:"flex w-[72px] flex-col items-center gap-1 text-center",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"flex h-11 w-11 items-center justify-center overflow-hidden rounded-full bg-muted text-xs text-muted-foreground",children:I?e.jsx("img",{src:I,alt:x,className:"h-full w-full object-cover"}):e.jsx("span",{children:M})}),w.isSuccess&&e.jsx("div",{className:"absolute -bottom-0.5 -right-0.5 flex h-4 w-4 items-center justify-center rounded-full bg-emerald-500",children:e.jsx(_,{name:"check",filled:!0,className:"text-[14px] text-primary-foreground"})})]}),e.jsx("span",{className:"line-clamp-2 max-w-[72px] text-xs text-foreground",children:x})]})},si=({shareUrl:n})=>{const s=async()=>{if(navigator.clipboard?.writeText)try{await navigator.clipboard.writeText(n)}catch{}};return e.jsxs("button",{type:"button",onClick:s,className:"flex w-[72px] flex-col items-center gap-1 text-center",children:[e.jsx("div",{className:"flex h-11 w-11 items-center justify-center rounded-full bg-primary",children:e.jsx(_,{name:"link",className:"text-[18px] text-primary-foreground"})}),e.jsx("span",{className:"line-clamp-2 max-w-[72px] text-xs text-foreground",children:"Copy link"})]})},ii=({shareUrl:n,title:s})=>{const c=()=>{if(typeof window>"u")return;const x=`Check this out: ${s}

${n}`,I=`https://api.whatsapp.com/send?text=${encodeURIComponent(x)}`;window.open(I,"_blank","noopener,noreferrer")};return e.jsxs("button",{type:"button",onClick:c,className:"flex w-[72px] flex-col items-center gap-1 text-center",children:[e.jsx("div",{className:"flex h-11 w-11 items-center justify-center rounded-full bg-primary",children:e.jsx("span",{className:"text-[16px] font-semibold text-white",children:"W"})}),e.jsx("span",{className:"line-clamp-2 max-w-[72px] text-xs text-foreground",children:"WhatsApp"})]})},ai=({shareUrl:n,title:s})=>{const c=()=>{if(typeof window>"u")return;const x=`Check this out: ${s}

${n}`,I=`https://t.me/share/url?url=${encodeURIComponent(n)}&text=${encodeURIComponent(x)}`;window.open(I,"_blank","noopener,noreferrer")};return e.jsxs("button",{type:"button",onClick:c,className:"flex w-[72px] flex-col items-center gap-1 text-center",children:[e.jsx("div",{className:"flex h-11 w-11 items-center justify-center rounded-full bg-primary",children:e.jsx("span",{className:"text-[16px] font-semibold text-white",children:"T"})}),e.jsx("span",{className:"line-clamp-2 max-w-[72px] text-xs text-foreground",children:"Telegram"})]})},li=({onShareExternal:n})=>{const s=async()=>{await n()};return e.jsxs("button",{type:"button",onClick:s,className:"flex w-[72px] flex-col items-center gap-1 text-center",children:[e.jsx("div",{className:"flex h-11 w-11 items-center justify-center rounded-full border border-border bg-muted",children:e.jsx(_,{name:"more_horiz",className:"text-[18px] text-muted-foreground"})}),e.jsx("span",{className:"line-clamp-2 max-w-[72px] text-xs text-foreground",children:"More"})]})};export{Mi as default};
