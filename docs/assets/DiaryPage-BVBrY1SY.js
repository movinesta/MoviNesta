import{c as x,x as h,j as e,r as g}from"./index-BJNwabbL.js";import{T as p}from"./TopBar-Cwkp26YK.js";import{T as f,a as b,b as j}from"./Tabs-DotftVeM.js";import{D as y,a as N}from"./DiaryLibraryTab-Bi_vN4RV.js";import{f as v}from"./format-DWLSBLoY.js";import{S as w}from"./sparkles-BOrWKM71.js";import{F as k}from"./film-TltTMGlh.js";import{C as T,L as C}from"./list-checks-BkFM98U_.js";import"./index-CYeLqM6J.js";import"./index-DPjqayor.js";import"./users-CZPPKxh2.js";import"./bookmark-plus-Ca0thsHG.js";import"./star-eAeRTQdR.js";import"./diaryStatus-d6O9GDSI.js";import"./useMutation-CiYMdxMt.js";const M=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],m=x("chart-column",M);const D=[["path",{d:"M21 12c.552 0 1.005-.449.95-.998a10 10 0 0 0-8.953-8.951c-.55-.055-.998.398-.998.95v8a1 1 0 0 0 1 1z",key:"pzmjnu"}],["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}]],R=x("chart-pie",D),L=t=>{const[n,i]=t.split("-"),a=Number(n),d=Number(i);if(!a||!d)return t;const l=new Date(a,d-1,1);return v(l,{month:"short",year:"numeric"})},S=()=>{const{stats:t,isLoading:n,isError:i,error:a}=h();if(n)return e.jsx("div",{className:"px-2 pb-4",children:e.jsx("div",{className:"space-y-3",children:Array.from({length:3}).map((s,r)=>e.jsxs("div",{className:"rounded-2xl border border-border bg-card/80 p-3 shadow-lg",children:[e.jsx("div",{className:"mb-2 h-3 w-1/3 rounded bg-background/70"}),e.jsx("div",{className:"flex gap-1.5",children:Array.from({length:6}).map((A,u)=>e.jsx("div",{className:"h-10 flex-1 rounded bg-background/70"},u))})]},r))})});if(i)return e.jsx("div",{className:"flex min-h-[40vh] items-center justify-center px-4",children:e.jsxs("div",{className:"max-w-sm rounded-2xl border border-destructive/40 bg-destructive/5 p-4 text-center text-xs text-foreground shadow-lg",children:[e.jsx("p",{className:"font-semibold",children:"Unable to load your stats."}),e.jsx("p",{className:"mt-1 text-xs text-muted-foreground",children:a??"Please try again in a moment."})]})});if(t.totalRated===0&&t.totalWatched===0&&!t.ratingDistribution.length&&!t.topGenres.length&&!t.watchCountByMonth.length)return e.jsx("div",{className:"flex min-h-[40vh] items-center justify-center px-4",children:e.jsxs("div",{className:"max-w-sm rounded-2xl border border-border bg-card/80 p-5 text-center text-xs text-muted-foreground shadow-lg",children:[e.jsx("div",{className:"mx-auto mb-3 flex h-10 w-10 items-center justify-center rounded-2xl bg-primary/15",children:e.jsx(w,{className:"h-5 w-5 text-primary","aria-hidden":"true"})}),e.jsx("p",{className:"font-heading text-sm font-semibold text-foreground",children:"No stats yet"}),e.jsx("p",{className:"mt-1 text-xs",children:"Once you start rating titles and marking them as watched, you'll see your rating distribution, top genres, and watch streaks here."})]})});const d=t.ratingDistribution.reduce((s,r)=>r.count>s?r.count:s,0),l=t.watchCountByMonth.reduce((s,r)=>r.count>s?r.count:s,0),c=t.topGenres.slice(0,6);return e.jsxs("div",{className:"space-y-3 px-2 pb-4",children:[e.jsxs("section",{className:"grid grid-cols-2 gap-3 sm:grid-cols-3",children:[e.jsxs("div",{className:"rounded-2xl border border-border bg-card/80 p-3 shadow-lg",children:[e.jsxs("div",{className:"flex items-center justify-between gap-2",children:[e.jsx("span",{className:"text-xs text-muted-foreground",children:"Watched"}),e.jsx(k,{className:"h-3.5 w-3.5 text-muted-foreground","aria-hidden":"true"})]}),e.jsx("p",{className:"mt-1 text-lg font-semibold text-foreground",children:t.totalWatched}),e.jsxs("p",{className:"mt-0.5 text-xs text-muted-foreground",children:["Titles marked as ",e.jsx("span",{className:"font-medium text-foreground",children:"Watched"}),"."]})]}),e.jsxs("div",{className:"rounded-2xl border border-border bg-card/80 p-3 shadow-lg",children:[e.jsxs("div",{className:"flex items-center justify-between gap-2",children:[e.jsx("span",{className:"text-xs text-muted-foreground",children:"Rated"}),e.jsx(m,{className:"h-3.5 w-3.5 text-muted-foreground","aria-hidden":"true"})]}),e.jsx("p",{className:"mt-1 text-lg font-semibold text-foreground",children:t.totalRated}),e.jsx("p",{className:"mt-0.5 text-xs text-muted-foreground",children:"Ratings you've logged across movies, series, and anime."})]}),e.jsxs("div",{className:"col-span-2 rounded-2xl border border-border bg-card/80 p-3 text-xs text-muted-foreground shadow-lg sm:col-span-1",children:[e.jsxs("div",{className:"flex items-center justify-between gap-2",children:[e.jsx("span",{className:"text-xs text-muted-foreground",children:"Average rating"}),e.jsx(R,{className:"h-3.5 w-3.5 text-muted-foreground","aria-hidden":"true"})]}),e.jsx("p",{className:"mt-1 text-lg font-semibold text-foreground",children:t.averageRating!=null?t.averageRating.toFixed(1):"–"}),e.jsx("p",{className:"mt-0.5 text-xs text-muted-foreground",children:"Quick glance at how generous you typically are with stars."})]})]}),e.jsxs("section",{className:"rounded-2xl border border-border bg-card/80 p-3 shadow-lg",children:[e.jsxs("div",{className:"mb-2 flex items-center justify-between gap-2",children:[e.jsx("h2",{className:"text-xs font-semibold text-foreground",children:"Rating distribution"}),e.jsxs("span",{className:"text-xs text-muted-foreground",children:["0.5 – 5.0 • ",t.totalRated," ratings"]})]}),t.ratingDistribution.length===0?e.jsx("p",{className:"text-xs text-muted-foreground",children:"Once you start rating titles, you'll see how your scores cluster here."}):e.jsx("div",{className:"flex items-end gap-1.5",children:t.ratingDistribution.map(s=>{const r=d>0?Math.max(s.count/d*52,6):6;return e.jsxs("div",{className:"flex flex-1 flex-col items-center gap-1",children:[e.jsx("div",{className:"w-full rounded-t bg-primary/25",style:{height:r},"aria-hidden":"true"}),e.jsxs("span",{className:"text-[9px] text-muted-foreground",children:[s.rating.toFixed(1),"★"]})]},s.rating)})})]}),e.jsxs("section",{className:"rounded-2xl border border-border bg-card/80 p-3 shadow-lg",children:[e.jsxs("div",{className:"mb-2 flex items-center justify-between gap-2",children:[e.jsx("h2",{className:"text-xs font-semibold text-foreground",children:"Top genres"}),e.jsx("span",{className:"text-xs text-muted-foreground",children:"Based on titles you've marked as watched"})]}),c.length?e.jsx("div",{className:"flex flex-wrap gap-1.5",children:c.map(s=>e.jsxs("span",{className:"inline-flex items-center gap-1 rounded-full bg-primary/15 px-2.5 py-1 text-xs text-foreground",children:[e.jsx("span",{className:"h-1.5 w-1.5 rounded-full bg-primary","aria-hidden":"true"}),e.jsx("span",{className:"font-medium",children:s.genre}),e.jsxs("span",{className:"text-[9px] text-muted-foreground",children:["×",s.count]})]},s.genre))}):e.jsx("p",{className:"text-xs text-muted-foreground",children:"Watch and rate a few titles to reveal your go-to genres."})]}),e.jsxs("section",{className:"rounded-2xl border border-border bg-card/80 p-3 shadow-lg",children:[e.jsxs("div",{className:"mb-2 flex items-center justify-between gap-2",children:[e.jsx("h2",{className:"text-xs font-semibold text-foreground",children:"Watch count over time"}),e.jsx("span",{className:"text-xs text-muted-foreground",children:"Month by month, based on your library"})]}),t.watchCountByMonth.length?e.jsx("div",{className:"space-y-1.5",children:e.jsx("div",{className:"flex items-end gap-1.5",children:t.watchCountByMonth.map(s=>{const r=l>0?Math.max(s.count/l*52,6):6;return e.jsxs("div",{className:"flex flex-1 flex-col items-center gap-1",children:[e.jsx("div",{className:"w-full rounded-t bg-primary/20",style:{height:r},"aria-hidden":"true"}),e.jsx("span",{className:"text-[9px] text-muted-foreground",children:L(s.month)})]},s.month)})})}):e.jsx("p",{className:"text-xs text-muted-foreground",children:"As you mark titles as watched, you'll see your movie-watching streaks here."})]})]})},o=[{key:"timeline",label:"Timeline",icon:T,description:"Chronological history of your ratings, reviews, and library updates."},{key:"library",label:"Library",icon:C,description:"Filter your watchlist and history by status and type."},{key:"stats",label:"Stats",icon:m,description:"Rating distribution, top genres, and watch trends over time."}],q=()=>{const[t,n]=g.useState("timeline"),i=o.find(a=>a.key===t)??o[0];return e.jsxs("div",{className:"flex flex-1 flex-col gap-4 pb-4",children:[e.jsx(p,{title:"Your clean movie diary",subtitle:"Log what you watch, manage your library, and keep tabs on your habits without the noise."}),e.jsxs("section",{className:"px-2",children:[e.jsx("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between",children:e.jsx("div",{className:"w-full sm:max-w-lg",children:e.jsx(f,{value:t,onValueChange:a=>n(a),children:e.jsx(b,{className:"w-full",children:o.map(a=>e.jsx(j,{value:a.key,icon:e.jsx(a.icon,{className:"h-3.5 w-3.5","aria-hidden":"true"}),children:a.label},a.key))})})})}),e.jsx("p",{className:"mt-1 px-1 text-xs text-muted-foreground",children:i.description})]}),e.jsxs("section",{"aria-live":"polite",className:"flex-1",children:[t==="timeline"&&e.jsx("div",{id:"diary-tabpanel-timeline",role:"tabpanel",className:"h-full w-full",children:e.jsx(y,{})}),t==="library"&&e.jsx("div",{id:"diary-tabpanel-library",role:"tabpanel",className:"h-full w-full",children:e.jsx(N,{})}),t==="stats"&&e.jsx("div",{id:"diary-tabpanel-stats",role:"tabpanel",className:"h-full w-full",children:e.jsx(S,{})})]})]})};export{q as default};
