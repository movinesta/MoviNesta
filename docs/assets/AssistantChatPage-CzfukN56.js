import{u,b as c,r as l,s as d,ao as o,aI as v,j as f,z as g}from"./index-n01z0Q-I.js";function m(){const a=u(),{user:e}=c();return l.useEffect(()=>{if(!e)return;let n=!0;return(async()=>{const{data:r,error:i}=await d.functions.invoke("assistant-get-conversation");if(!n)return;if(i){console.error("assistant-get-conversation",i),o.show("Couldn't open the assistant chat. Please try again.",{title:"Assistant",variant:"error"}),a("/messages",{replace:!0});return}const t=r?.conversationId,s=r?.assistant;if(t&&s?.id&&v({conversationId:t,assistant:{id:String(s.id),username:s.username??null,display_name:s.display_name??null,avatar_url:s.avatar_url??null},updatedAt:Date.now()}),!t){o.show("Assistant chat couldn't be created (missing conversationId).",{title:"Assistant",variant:"error"}),a("/messages",{replace:!0});return}a(`/messages/${t}`,{replace:!0})})(),()=>{n=!1}},[a,e]),f.jsx(g,{})}export{m as default};
