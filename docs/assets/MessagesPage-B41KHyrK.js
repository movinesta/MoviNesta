import{C as Y,j as e,B as ce,u as me,e as xe,b as fe,A as he,r as o,R as pe,ag as ge,ah as be,L as je,ai as x,s as Ne,aj as B}from"./index-DHFRnTo7.js";import{M as p}from"./material-icon-CCSOLX5B.js";import{B as ve,M as ye,c as we,w as ke}from"./MuteOptionsSheet-CQ34DQMY.js";import{u as N}from"./conversationsCache-_zctdFM2.js";import{D as Me,a as Ce,c as Ue}from"./dialog-Bg-HG0JV.js";import{C as Se}from"./check-37UNc4XQ.js";import{M as _e}from"./mail-BinYGCTT.js";import{B as Ae}from"./bell-DVRPzCbj.js";import"./clock-CcMzpr3g.js";const Ie=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],Le=Y("eye-off",Ie);const Pe=[["path",{d:"M21.2 8.4c.5.38.8.97.8 1.6v10a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V10a2 2 0 0 1 .8-1.6l8-6a2 2 0 0 1 2.4 0l8 6Z",key:"1jhwl8"}],["path",{d:"m22 10-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 10",key:"1qfld7"}]],He=Y("mail-open",Pe),_=({icon:l,title:d,description:f,onClick:t,destructive:i})=>e.jsxs("button",{type:"button",onClick:t,className:"flex w-full items-center gap-3 rounded-2xl px-3 py-3 text-left transition hover:bg-muted/60 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-primary/30"+(i?" text-destructive":""),children:[e.jsx("span",{className:"inline-flex h-10 w-10 items-center justify-center rounded-full bg-muted/80",children:l}),e.jsxs("span",{className:"min-w-0 flex-1",children:[e.jsx("span",{className:"block truncate text-sm font-semibold",children:d}),f?e.jsx("span",{className:"block truncate text-xs text-muted-foreground",children:f}):null]})]}),Re=({open:l,onOpenChange:d,conversation:f,isMuted:t,isHidden:i,onToggleMute:g,onToggleHidden:w,onMarkRead:k,onMarkUnread:M,onOpenConversation:u})=>{const b=()=>d(!1),m=I=>{I(),b()},n=!!f?.lastMessageId;return e.jsx(Me,{open:l,onOpenChange:d,children:e.jsxs(Ce,{className:"left-0 right-0 top-auto bottom-0 w-full max-w-none translate-x-0 translate-y-0 rounded-t-3xl rounded-b-none border border-border bg-card p-4",children:[e.jsx("div",{className:"mx-auto mb-2 h-1.5 w-12 rounded-full bg-muted","aria-hidden":!0}),e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{className:"min-w-0",children:[e.jsx(Ue,{className:"text-center text-base text-foreground",children:f?.title??"Conversation"}),e.jsx("p",{className:"mt-1 text-center text-xs text-muted-foreground",children:"Quick actions"})]}),e.jsx("button",{type:"button",onClick:b,className:"rounded-full p-2 text-muted-foreground transition hover:bg-muted/60 hover:text-foreground","aria-label":"Close",children:e.jsx(p,{name:"close"})})]}),e.jsxs("div",{className:"mt-3 space-y-1",children:[e.jsx(_,{icon:e.jsx(Se,{className:"h-5 w-5 text-muted-foreground","aria-hidden":!0}),title:"Open chat",description:"Jump back into this conversation",onClick:()=>m(u)}),f?.hasUnread?e.jsx(_,{icon:e.jsx(He,{className:"h-5 w-5 text-muted-foreground","aria-hidden":!0}),title:"Mark as read",description:n?"Clear unread badge":"No messages yet",onClick:()=>m(k)}):e.jsx(_,{icon:e.jsx(_e,{className:"h-5 w-5 text-muted-foreground","aria-hidden":!0}),title:"Mark as unread",description:"Bring it back to your attention",onClick:()=>m(M)}),e.jsx(_,{icon:t?e.jsx(Ae,{className:"h-5 w-5 text-muted-foreground","aria-hidden":!0}):e.jsx(ve,{className:"h-5 w-5 text-muted-foreground","aria-hidden":!0}),title:t?"Unmute":"Mute",description:"Stops message notifications on all devices",onClick:()=>m(g)}),e.jsx(_,{icon:e.jsx(Le,{className:"h-5 w-5 text-muted-foreground","aria-hidden":!0}),title:i?"Unhide":"Hide",description:"Removes it from your inbox list",onClick:()=>m(w)})]}),e.jsx("div",{className:"pt-3",children:e.jsx(ce,{type:"button",variant:"ghost",className:"w-full rounded-2xl border border-border bg-muted/60 text-foreground hover:bg-muted",onClick:b,children:"Cancel"})})]})})},Oe="movinesta",Te="31661b41-efc0-4f29-ba72-1a3e48cb1c80",Be=()=>e.jsxs("div",{className:"flex min-h-screen flex-1 flex-col overflow-hidden bg-background text-foreground",children:[e.jsxs("header",{className:"sticky top-0 z-10 bg-background px-4 pb-2 pt-6",children:[e.jsxs("div",{className:"mb-4 mt-2 flex items-center justify-between",children:[e.jsx("div",{className:"h-9 w-40 rounded-xl bg-muted animate-pulse","aria-hidden":!0}),e.jsx("div",{className:"h-10 w-10 rounded-full bg-muted animate-pulse","aria-hidden":!0})]}),e.jsx("div",{className:"relative mb-4",children:e.jsx("div",{className:"h-12 w-full rounded-full bg-muted animate-pulse","aria-hidden":!0})}),e.jsxs("div",{className:"-mt-1 mb-3 flex items-center gap-2",children:[e.jsx("div",{className:"h-6 w-24 rounded-full bg-muted animate-pulse","aria-hidden":!0}),e.jsx("div",{className:"h-6 w-28 rounded-full bg-muted animate-pulse","aria-hidden":!0}),e.jsx("div",{className:"ml-auto h-4 w-12 rounded bg-muted animate-pulse","aria-hidden":!0})]}),e.jsx("div",{className:"-mx-4 flex space-x-4 overflow-x-auto border-b border-border/60 pb-4 pl-4 pr-4 [scrollbar-width:none] [&::-webkit-scrollbar]:hidden",children:Array.from({length:7}).map((l,d)=>e.jsxs("div",{className:"flex shrink-0 flex-col items-center gap-1",children:[e.jsx("div",{className:"h-16 w-16 rounded-full bg-muted animate-pulse","aria-hidden":!0}),e.jsx("div",{className:"h-3 w-12 rounded bg-muted animate-pulse","aria-hidden":!0})]},d))})]}),e.jsxs("main",{className:"flex-1 overflow-y-auto px-4 pb-32 pt-2",children:[e.jsx("div",{className:"py-2 text-xs font-semibold uppercase tracking-wider text-muted-foreground",children:"Recent Chats"}),e.jsx("ul",{className:"space-y-1",children:Array.from({length:8}).map((l,d)=>e.jsx("li",{className:"rounded-2xl p-3",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"h-16 w-16 rounded-full bg-muted animate-pulse","aria-hidden":!0}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-baseline justify-between gap-2",children:[e.jsx("div",{className:"h-4 w-44 max-w-[70%] rounded bg-muted animate-pulse","aria-hidden":!0}),e.jsx("div",{className:"h-3 w-12 rounded bg-muted animate-pulse","aria-hidden":!0})]}),e.jsx("div",{className:"mt-2 h-3 w-64 max-w-[85%] rounded bg-muted animate-pulse","aria-hidden":!0})]})]})},d))})]})]}),Ee=450,J=({conversation:l,isMuted:d,onOpenActions:f,dimmed:t=!1})=>{const i=l.participants??[],g=i.find(n=>!n.isSelf)??i[0]??null,w=l.lastMessageAtLabel??"Now",k=l.isGroup,M=i.length,u=o.useRef({timeoutId:null,fired:!1}),b=n=>{n.pointerType&&n.pointerType!=="touch"||(u.current.fired=!1,u.current.timeoutId!=null&&window.clearTimeout(u.current.timeoutId),u.current.timeoutId=window.setTimeout(()=>{u.current.fired=!0,f(l)},Ee))},m=()=>{u.current.timeoutId!=null&&(window.clearTimeout(u.current.timeoutId),u.current.timeoutId=null)};return e.jsx("li",{className:"py-1",children:e.jsxs(je,{to:`/messages/${l.id}`,className:"group flex items-center gap-4 rounded-2xl p-3 transition-colors hover:bg-muted/60"+(t?" opacity-70":""),onPointerDown:b,onPointerUp:m,onPointerCancel:m,onPointerLeave:m,onContextMenu:n=>{n.preventDefault(),m(),f(l)},onClick:n=>{u.current.fired&&(n.preventDefault(),n.stopPropagation(),u.current.fired=!1)},children:[e.jsx("div",{className:"relative shrink-0",children:k&&M>1?e.jsx("div",{className:"grid h-16 w-16 grid-cols-2 gap-0.5 overflow-hidden rounded-full bg-muted",children:i.slice(0,4).map(n=>e.jsx("div",{className:"h-full w-full bg-cover bg-center",style:n.avatarUrl?{backgroundImage:`url(${n.avatarUrl})`}:void 0},n.id))}):e.jsx("div",{className:"relative h-16 w-16 overflow-hidden rounded-full border-2 border-primary/50",children:g?.avatarUrl?e.jsx("img",{src:g.avatarUrl,alt:g.displayName??void 0,className:"h-full w-full object-cover",loading:"lazy"}):e.jsx("div",{className:"flex h-full w-full items-center justify-center text-sm font-semibold text-foreground",children:(g?.displayName??"?").slice(0,1).toUpperCase()})})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsxs("div",{className:"flex items-baseline justify-between gap-2",children:[e.jsx("h3",{className:"truncate text-base font-bold text-foreground",children:l.title}),e.jsx("span",{className:"whitespace-nowrap text-xs font-medium text-primary",children:w})]}),e.jsxs("div",{className:"mt-0.5 flex items-center gap-2",children:[e.jsx("p",{className:"truncate text-sm text-muted-foreground",children:l.lastMessagePreview??"Start chatting"}),d&&e.jsx(p,{name:"notifications_off",className:"text-sm text-muted-foreground",ariaLabel:"Muted"}),l.hasUnread&&e.jsx("span",{className:"h-2.5 w-2.5 rounded-full bg-primary"})]})]}),e.jsx("button",{type:"button",className:"ml-1 flex h-9 w-9 shrink-0 items-center justify-center rounded-full text-muted-foreground transition hover:bg-muted/70 hover:text-foreground","aria-label":"Conversation actions",onClick:n=>{n.preventDefault(),n.stopPropagation(),m(),f(l)},children:e.jsx(p,{name:"more_horiz",className:"text-xl",ariaLabel:"More"})})]})})},Je=()=>{const l=me(),d=xe(),{user:f}=fe(),t=f?.id??null,{data:i,isLoading:g,isError:w,error:k,refetch:M,isFetching:u}=he(),[b,m]=o.useState(""),[n,I]=o.useState(!1),[L,E]=o.useState(!1),C=o.useCallback(s=>s.participants.some(r=>!r.isSelf&&(r.username?.toLowerCase()===Oe||r.id===Te)),[]),j=o.useMemo(()=>(i??[]).find(s=>C(s))??null,[i,C]),[A,D]=o.useState(!1),Z=o.useCallback(async()=>{if(t&&!A){D(!0);try{l("/assistant")}finally{D(!1)}}},[A,l,t]);pe.useEffect(()=>{ge(t).then(()=>{t&&d.invalidateQueries({queryKey:be(t)})})},[t,d]);const y=b.trim().toLowerCase(),F=o.useMemo(()=>(i??[]).filter(s=>y?[s.title,s.subtitle,s.lastMessagePreview??"",...s.participants.map(a=>a.displayName),...s.participants.map(a=>a.username).filter(a=>!!a)].join(" ").toLowerCase().includes(y):!0),[i,y]),{visibleConversations:Q,hiddenConversations:P}=o.useMemo(()=>{const s=[],r=[];F.forEach(c=>{c.isHidden?r.push(c):s.push(c)});const v=(n?s.filter(c=>c.hasUnread):s).filter(c=>!C(c)),S=r.filter(c=>!C(c));return{visibleConversations:v,hiddenConversations:S}},[F,n,C]),$=o.useMemo(()=>(i??[]).filter(s=>s.hasUnread&&!s.isHidden).length,[i]),z=o.useMemo(()=>(i??[]).filter(s=>s.isHidden).length,[i]),q=o.useMemo(()=>(i??[]).filter(s=>s.isMuted).length,[i]),W=o.useMemo(()=>y?!1:n?!!j?.hasUnread:!0,[j?.hasUnread,y,n]),[X,H]=o.useState(!1),[U,ee]=o.useState(null),h=o.useMemo(()=>U?(i??[]).find(s=>s.id===U)??null:null,[U,i]),[se,V]=o.useState(!1),[R,te]=o.useState(null),O=o.useMemo(()=>R?(i??[]).find(s=>s.id===R)??null:null,[R,i]),ae=s=>{te(s.id),V(!0)},G=s=>{ee(s.id),H(!0)},re=s=>{if(!t){x.error("Please sign in to manage messages.");return}if(s.isMuted){const r=s.mutedUntil??null;N(d,t,s.id,a=>({...a,isMuted:!1,mutedUntil:null})),x.show("Unmuted notifications."),B(t,s.id,{muted:!1,hidden:s.isHidden,mutedUntil:null}).then(({ok:a})=>{a||(N(d,t,s.id,v=>({...v,isMuted:!0,mutedUntil:r})),x.error("Couldn't update preferences."))});return}ae(s)},ne=(s,r)=>{if(!t){x.error("Please sign in to manage messages.");return}const a=s.isMuted,v=s.mutedUntil??null;let S=!1,c=null;r.kind==="indefinite"?(S=!0,c=null):(S=!1,c=new Date(Date.now()+r.minutes*6e4).toISOString()),N(d,t,s.id,T=>({...T,isMuted:!0,mutedUntil:c})),x.show(`Muted notifications for ${r.label}.`),B(t,s.id,{muted:S,hidden:s.isHidden,mutedUntil:c}).then(({ok:T})=>{T||(N(d,t,s.id,ue=>({...ue,isMuted:a,mutedUntil:v})),x.error("Couldn't update preferences."))})},ie=s=>{if(!t){x.error("Please sign in to manage messages.");return}const r=!s.isHidden;N(d,t,s.id,a=>({...a,isHidden:r})),x.show(r?"Conversation hidden.":"Conversation restored."),B(t,s.id,{muted:s.isMuted,hidden:r,mutedUntil:s.mutedUntil??null}).then(({ok:a})=>{a||(N(d,t,s.id,v=>({...v,isHidden:!r})),x.error("Couldn't update preferences."))})},le=async s=>{if(!t){x.error("Please sign in to manage messages.");return}if(!s.lastMessageId){x.show("No messages to mark as read.");return}const{error:r}=await Ne.rpc("mark_conversation_read",{p_conversation_id:s.id,p_last_message_id:s.lastMessageId});r&&await ke({conversation_id:s.id,user_id:t,last_read_message_id:s.lastMessageId,last_read_at:new Date().toISOString()}),N(d,t,s.id,a=>a.hasUnread?{...a,hasUnread:!1}:a)},de=async s=>{if(!t){x.error("Please sign in to manage messages.");return}const r=await we(s.id,t);r.ok||(console.warn("[MessagesPage] Failed to clear read receipt (mark unread)",r.error),x.show("Marked as unread locally. Server update may have failed.")),N(d,t,s.id,a=>a.hasUnread?a:{...a,hasUnread:!0})},oe=o.useMemo(()=>{const s=new Map;return(i??[]).forEach(r=>{r.isHidden||r.participants.filter(a=>!a.isSelf).forEach(a=>{s.has(a.id)||s.set(a.id,{id:a.id,name:a.displayName,avatarUrl:a.avatarUrl,conversationId:r.id})})}),Array.from(s.values()).slice(0,8)},[i]),K=()=>{l("/messages/new")};return g?e.jsx(Be,{}):w?e.jsxs("div",{className:"flex flex-1 flex-col items-center justify-center px-4 py-12 text-sm text-foreground",children:[e.jsx("p",{className:"font-semibold",children:"Unable to load messages."}),e.jsx("p",{className:"mt-1 text-xs text-muted-foreground",children:k?.message??"Please try again in a moment."}),e.jsx("button",{type:"button",onClick:()=>M(),className:"mt-4 rounded-full bg-primary px-4 py-2 text-xs font-semibold text-primary-foreground",children:"Try again"})]}):e.jsxs("div",{className:"flex min-h-screen flex-1 flex-col overflow-hidden bg-background text-foreground",children:[e.jsxs("header",{className:"sticky top-0 z-10 bg-background px-4 pb-2 pt-6",children:[e.jsxs("div",{className:"mb-4 mt-2 flex items-center justify-between",children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Messages"}),e.jsx("button",{type:"button",onClick:K,className:"flex h-10 w-10 items-center justify-center rounded-full bg-primary/10 text-primary transition-colors hover:bg-primary/20","aria-label":"New message",children:e.jsx(p,{name:"edit_square",className:"text-xl",ariaLabel:"New message"})})]}),e.jsxs("div",{className:"relative mb-4",children:[e.jsx("div",{className:"pointer-events-none absolute inset-y-0 left-0 flex items-center pl-3",children:e.jsx(p,{name:"search",className:"text-muted-foreground"})}),e.jsx("input",{className:"block w-full rounded-full border border-input bg-card py-3 pl-10 pr-3 text-sm text-foreground placeholder:text-muted-foreground shadow-sm focus:outline-none focus:ring-2 focus:ring-primary",placeholder:"Search friends or titles...",value:b,onChange:s=>m(s.target.value)})]}),e.jsxs("div",{className:"-mt-1 mb-3 flex items-center gap-2",children:[e.jsxs("button",{type:"button",onClick:()=>I(s=>!s),className:"inline-flex items-center gap-2 rounded-full px-3 py-1 text-xs font-semibold transition "+(n?"bg-primary text-primary-foreground":"bg-muted/60 text-muted-foreground hover:bg-muted"),children:[e.jsx(p,{name:n?"mark_email_unread":"mark_email_read",className:"text-base",ariaLabel:"Unread"}),"Unread",$?` (${$})`:""]}),z>0&&e.jsxs("button",{type:"button",onClick:()=>E(s=>!s),className:"inline-flex items-center gap-2 rounded-full px-3 py-1 text-xs font-semibold transition "+(L?"bg-foreground text-background":"bg-muted/60 text-muted-foreground hover:bg-muted"),children:[e.jsx(p,{name:"visibility_off",className:"text-base",ariaLabel:"Hidden"}),"Hidden (",z,")"]}),q>0&&e.jsxs("span",{className:"ml-auto inline-flex items-center gap-1 text-xs text-muted-foreground",children:[e.jsx(p,{name:"notifications_off",className:"text-base",ariaLabel:"Muted"}),q]})]}),e.jsxs("div",{className:"-mx-4 flex space-x-4 overflow-x-auto border-b border-border/60 pb-4 pl-4 pr-4 [scrollbar-width:none] [&::-webkit-scrollbar]:hidden",children:[e.jsxs("button",{type:"button",onClick:K,className:"flex shrink-0 flex-col items-center gap-1",children:[e.jsx("div",{className:"relative flex h-16 w-16 items-center justify-center rounded-full border-2 border-dashed border-primary/50",children:e.jsx(p,{name:"add",className:"text-3xl text-primary"})}),e.jsx("span",{className:"text-xs font-medium text-muted-foreground",children:"New"})]}),oe.map(s=>e.jsxs("button",{type:"button",className:"flex shrink-0 flex-col items-center gap-1",onClick:()=>l(`/messages/${s.conversationId}`),children:[e.jsx("div",{className:"relative h-16 w-16 overflow-hidden rounded-full border-2 border-primary/50",children:s.avatarUrl?e.jsx("img",{src:s.avatarUrl,alt:s.name,className:"h-full w-full object-cover",loading:"lazy"}):e.jsx("div",{className:"flex h-full w-full items-center justify-center bg-muted text-xs font-semibold text-foreground",children:s.name.slice(0,1).toUpperCase()})}),e.jsx("span",{className:"max-w-[64px] truncate text-xs font-medium text-foreground",children:s.name})]},s.id))]})]}),e.jsxs("main",{className:"flex-1 overflow-y-auto px-4 pb-32 pt-2",children:[e.jsx("div",{className:"py-2 text-xs font-semibold uppercase tracking-wider text-muted-foreground",children:"Recent Chats"}),Q.length===0&&(!L||P.length===0)?e.jsx("div",{className:"mt-6 rounded-2xl border border-border/60 bg-card/60 p-4 text-center text-xs text-muted-foreground",children:n?e.jsxs(e.Fragment,{children:[e.jsx("p",{className:"font-semibold",children:"No unread chats."}),e.jsx("p",{className:"mt-1",children:"You’re all caught up."})]}):y?e.jsxs(e.Fragment,{children:[e.jsx("p",{className:"font-semibold",children:"No matches."}),e.jsx("p",{className:"mt-1",children:"Try a different search."})]}):e.jsxs(e.Fragment,{children:[e.jsx("p",{className:"font-semibold",children:"No conversations yet."}),e.jsx("p",{className:"mt-1",children:"Start a chat with your crew."})]})}):e.jsxs(e.Fragment,{children:[e.jsxs("ul",{children:[W&&e.jsx("li",{className:"py-1",children:e.jsxs("button",{type:"button",onClick:Z,disabled:!t||A,className:"group flex w-full items-center gap-4 rounded-2xl p-3 text-left transition-colors hover:bg-muted/60 "+(A?" opacity-70":""),children:[e.jsx("div",{className:"relative shrink-0",children:e.jsxs("div",{className:"relative h-16 w-16 overflow-hidden rounded-full border-2 border-primary/60",children:[j?.participants?.find(s=>!s.isSelf)?.avatarUrl?e.jsx("img",{src:j.participants.find(s=>!s.isSelf)?.avatarUrl??void 0,alt:"MoviNesta",className:"h-full w-full object-cover",loading:"lazy"}):e.jsx("div",{className:"flex h-full w-full items-center justify-center bg-muted text-sm font-semibold text-foreground",children:"M"}),j?.hasUnread?e.jsx("span",{className:"absolute -right-0.5 -top-0.5 h-3 w-3 rounded-full bg-primary"}):null]})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsxs("div",{className:"flex items-center justify-between gap-2",children:[e.jsx("div",{className:"truncate text-sm font-semibold text-foreground",children:"MoviNesta Assistant"}),j?.lastMessageAtLabel?e.jsx("div",{className:"shrink-0 text-xs text-muted-foreground",children:j.lastMessageAtLabel}):null]}),e.jsx("div",{className:"mt-1 truncate text-xs text-muted-foreground",children:j?.lastMessagePreview??"Ask for recommendations, refine your taste, plan watch goals."})]})]})}),Q.map(s=>e.jsx(J,{conversation:s,isMuted:s.isMuted,onOpenActions:G},s.id))]}),L&&P.length>0&&e.jsxs("div",{className:"mt-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"py-2 text-xs font-semibold uppercase tracking-wider text-muted-foreground",children:"Hidden chats"}),e.jsx("button",{type:"button",onClick:()=>E(!1),className:"rounded-full bg-muted/60 px-3 py-1 text-xs font-semibold text-muted-foreground hover:bg-muted",children:"Hide"})]}),e.jsx("ul",{children:P.map(s=>e.jsx(J,{conversation:s,isMuted:s.isMuted,onOpenActions:G,dimmed:!0},s.id))})]})]})]}),e.jsx(Re,{open:X,onOpenChange:H,conversation:h,isMuted:!!h?.isMuted,isHidden:!!h?.isHidden,onOpenConversation:()=>{U&&(H(!1),l(`/messages/${U}`))},onToggleMute:()=>{h&&re(h)},onToggleHidden:()=>{h&&ie(h)},onMarkRead:()=>{h&&le(h)},onMarkUnread:()=>{h&&de(h)}}),e.jsx(ye,{open:se,onOpenChange:V,conversationTitle:O?.title,onSelect:s=>{O&&ne(O,s)}}),u&&e.jsxs("div",{className:"pointer-events-none fixed bottom-24 right-4 flex items-center gap-2 rounded-full border border-border bg-background/90 px-3 py-1 text-xs text-muted-foreground shadow-md",children:[e.jsx(p,{name:"sync",className:"text-base"}),"Syncing…"]})]})};export{Je as default};
