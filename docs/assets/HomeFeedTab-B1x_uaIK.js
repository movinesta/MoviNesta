import{c as k,j as e,S as p,A as F,R as j,r as S}from"./index-DLcJPtaT.js";import{q as R}from"./index-C72iKZMJ.js";import{B as f}from"./bookmark-plus-BM2IOAAq.js";import{S as y}from"./star-DI-RvBk9.js";/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g=k("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]),L={teal:"bg-mn-accent-teal/25 text-mn-accent-teal",violet:"bg-mn-accent-violet/25 text-mn-accent-violet",orange:"bg-mn-primary/20 text-mn-primary"},v=({children:s})=>e.jsx("span",{className:"inline-flex items-center gap-1 rounded-full bg-mn-bg-elevated/80 px-2 py-0.5 text-[10px] text-mn-text-secondary shadow-mn-soft",children:s}),l=({title:s})=>e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"h-12 w-8 overflow-hidden rounded-lg bg-mn-bg-muted shadow-mn-card",children:s.posterUrl?e.jsx("img",{src:s.posterUrl,alt:s.name,className:"h-full w-full object-cover"}):e.jsx("div",{className:"h-full w-full bg-gradient-to-br from-mn-accent-violet/45 via-mn-bg/40 to-mn-primary/75"})}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("p",{className:"truncate text-[12px] font-medium text-mn-text-primary",children:s.name}),e.jsx("p",{className:"text-[10px] text-mn-text-muted",children:s.year})]})]}),i=({children:s})=>e.jsx("article",{className:"space-y-2 rounded-mn-card border border-mn-border-subtle/80 bg-mn-bg-elevated/85 p-3 text-[11px] shadow-mn-card",children:s}),c=({item:s})=>e.jsxs("header",{className:"flex items-center justify-between gap-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:`flex h-8 w-8 items-center justify-center rounded-full text-[11px] font-semibold ${L[s.user.avatarColor]}`,"aria-hidden":!0,children:s.user.avatarInitials}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("p",{className:"truncate text-[12px] font-semibold text-mn-text-primary",children:s.user.displayName}),e.jsx("p",{className:"text-[10px] text-mn-text-muted",children:s.createdAtLabel})]})]}),s.kind==="friend-rating"&&e.jsxs(v,{children:[e.jsx(y,{className:"h-3 w-3","aria-hidden":!0}),e.jsx("span",{children:s.rating.toFixed(1)})]}),s.kind==="recommendation"&&s.score!==void 0&&e.jsxs(v,{children:[e.jsx(p,{className:"h-3 w-3","aria-hidden":!0}),e.jsx("span",{children:s.score.toFixed(1)})]})]}),M=({item:s})=>{switch(s.kind){case"friend-rating":return e.jsxs(i,{children:[e.jsx(c,{item:s}),e.jsx(l,{title:s.title}),e.jsxs("p",{className:"text-[11px] text-mn-text-secondary",children:["Rated ",s.rating.toFixed(1)," ",s.emoji??"⭐️"]}),s.reviewSnippet&&e.jsxs("p",{className:"text-[11px] text-mn-text-muted",children:["“",s.reviewSnippet,"”"]})]});case"friend-review":return e.jsxs(i,{children:[e.jsx(c,{item:s}),e.jsx(l,{title:s.title}),s.rating&&e.jsxs("p",{className:"text-[11px] text-mn-text-secondary",children:["Rated ",s.rating.toFixed(1)]}),s.reviewSnippet&&e.jsxs("p",{className:"text-[11px] text-mn-text-muted",children:["“",s.reviewSnippet,"”"]})]});case"watchlist-add":return e.jsxs(i,{children:[e.jsx(c,{item:s}),e.jsx(l,{title:s.title}),e.jsxs("div",{className:"inline-flex items-center gap-1 text-[11px] text-mn-text-secondary",children:[e.jsx(f,{className:"h-3 w-3","aria-hidden":!0}),"Added to watchlist"]}),s.note&&e.jsx("p",{className:"text-[11px] text-mn-text-muted",children:s.note})]});case"recommendation":return e.jsxs(i,{children:[e.jsx(c,{item:s}),e.jsx(l,{title:s.title}),e.jsxs("div",{className:"inline-flex items-center gap-1 text-[11px] text-mn-text-secondary",children:[e.jsx(p,{className:"h-3 w-3","aria-hidden":!0}),"Recommendation"]}),s.reason&&e.jsx("p",{className:"text-[11px] text-mn-text-muted",children:s.reason})]});default:return null}},C=[{key:"all",label:"All",icon:g},{key:"ratings",label:"Ratings",icon:y},{key:"reviews",label:"Reviews",icon:g},{key:"watchlist",label:"Watchlist",icon:f},{key:"recommendations",label:"Recs",icon:p}],I=(s,r,n)=>(()=>{switch(r){case"ratings":return s.kind==="friend-rating";case"reviews":return s.kind==="friend-review";case"watchlist":return s.kind==="watchlist-add";case"recommendations":return s.kind==="recommendation";case"all":default:return!0}})()?n==="reviews"?s.kind==="friend-review":n==="follows"?s.kind==="friend-rating"||s.kind==="friend-review"||s.kind==="watchlist-add":!0:!1,m=()=>e.jsx("div",{className:"space-y-2",children:[0,1,2].map(s=>e.jsxs("div",{className:"space-y-2 rounded-mn-card border border-mn-border-subtle/80 bg-mn-bg-elevated/70 p-3 text-[11px] shadow-mn-card",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"h-8 w-8 animate-pulse rounded-full bg-mn-border-subtle/60"}),e.jsxs("div",{className:"flex-1 space-y-1",children:[e.jsx("div",{className:"h-3 w-24 animate-pulse rounded bg-mn-border-subtle/60"}),e.jsx("div",{className:"h-2.5 w-16 animate-pulse rounded bg-mn-border-subtle/50"})]})]}),e.jsx("div",{className:"h-12 w-20 animate-pulse rounded bg-mn-border-subtle/60"}),e.jsx("div",{className:"h-3 w-full animate-pulse rounded bg-mn-border-subtle/40"})]},`feed-skeleton-${s}`))}),E=()=>e.jsx("div",{className:"rounded-mn-card border border-dashed border-mn-border-subtle/70 bg-mn-bg-elevated/60 p-4 text-center text-[11px] text-mn-text-secondary",children:"Your friends’ activity will show up here once they start rating and reviewing titles."}),U=({quickFilter:s})=>{const{items:r,isLoading:n,hasMore:o,isLoadingMore:x,loadMore:w,error:u}=F(),[d,N]=j.useState("all"),h=S.useMemo(()=>r.filter(t=>I(t,d,s)),[r,d,s]),b=()=>{o&&!x&&w()};return e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:"flex flex-wrap items-center gap-2",children:C.map(t=>e.jsxs("button",{type:"button",onClick:()=>N(t.key),className:`inline-flex items-center gap-1 rounded-full border px-3 py-1 text-[11px] transition-colors ${d===t.key?"border-mn-primary/60 bg-mn-primary/10 text-mn-text-primary":"border-mn-border-subtle/80 bg-mn-bg-elevated/70 text-mn-text-secondary hover:border-mn-primary/50"}`,"aria-pressed":d===t.key,children:[e.jsx(t.icon,{className:"h-3.5 w-3.5","aria-hidden":!0}),t.label]},t.key))}),u&&e.jsx("div",{role:"alert",className:"rounded-2xl border border-mn-error/50 bg-mn-error/10 px-3 py-2 text-[11px] text-mn-error",children:u}),n?e.jsxs("div",{className:"space-y-2",children:[e.jsx(m,{}),e.jsx(m,{}),e.jsx(m,{})]}):h.length===0?e.jsx(E,{}):e.jsx(R,{style:{height:"70vh"},data:h,computeItemKey:(t,a)=>a.id,endReached:b,components:{List:j.forwardRef((t,a)=>e.jsx("div",{ref:a,className:"space-y-3",...t})),Footer:()=>e.jsx("div",{className:"pt-1",children:o?e.jsx("button",{type:"button",onClick:b,disabled:x,className:"mx-auto flex items-center justify-center rounded-full border border-mn-border-subtle bg-mn-bg-elevated px-3 py-1.5 text-[11px] text-mn-text-secondary shadow-mn-soft disabled:opacity-60",children:x?"Loading more...":"Load more"}):e.jsx("p",{className:"py-2 text-center text-[11px] text-mn-text-muted",children:"You're all caught up."})})},itemContent:(t,a)=>e.jsx("div",{className:"pb-1",children:e.jsx(M,{item:a})})})]})};export{m as FeedSkeleton,U as default};
