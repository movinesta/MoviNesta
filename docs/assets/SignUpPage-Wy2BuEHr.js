import{r as c,u as F,j as e,L as R,s as P}from"./index-BhYCkKJ1.js";import{u as q}from"./useDocumentTitle-DKB_EjEW.js";import{M as n}from"./material-icon-DzJ3uwwf.js";const G=/^[^\s@]+@[^\s@]+\.[^\s@]+$/,N=8,I=/^[a-z0-9_]{3,30}$/;function u(l,h,o,w,i){const p=i.trim().replace(/^@+/,"").toLowerCase(),s={};return w.trim()||(s.fullName="Full name is required."),p?I.test(p)||(s.username="Usernames must be 3-30 characters and only include lowercase letters, numbers, or underscores."):s.username="Username is required.",l?G.test(l)||(s.email="Please enter a valid email address."):s.email="Email is required.",h?h.length<N&&(s.password=`Password must be at least ${N} characters.`):s.password="Password is required.",o?h!==o&&(s.confirm="Passwords do not match."):s.confirm="Please confirm your password.",s}const $=()=>{q("Create account");const[l,h]=c.useState(""),[o,w]=c.useState(""),[i,p]=c.useState(""),[s,B]=c.useState(""),[m,U]=c.useState(""),[f,A]=c.useState(!1),[x,v]=c.useState(!1),[r,d]=c.useState({}),[y,b]=c.useState(null),[C,k]=c.useState(null),S=F(),z=!!l.trim()&&!!o.trim()&&!!i&&!!s&&!!m&&Object.keys(u(i,s,m,l,o)).length===0,M=async t=>{t.preventDefault();const a=u(i,s,m,l,o);if(Object.keys(a).length>0){d(a),b(null),k(null);return}try{v(!0),b(null),k(null),d({});const g=o.trim().replace(/^@+/,"").toLowerCase(),_=l.trim(),{data:j,error:L}=await P.auth.signUp({email:i,password:s,options:{data:{display_name:_,username:g}}});if(L){b(L.message||"Sign-up failed. Please check your details and try again.");return}if(!j.session){k("Almost there! Check your email inbox for a confirmation link to activate your account.");return}if(j.user?.id){const{error:E}=await P.from("profiles").update({display_name:_,username:g}).eq("id",j.user.id);E&&console.warn("[SignUpPage] Failed to update profile details",E)}S("/onboarding",{replace:!0})}catch(g){console.error(g),b("Something went wrong while creating your account.")}finally{v(!1)}};return e.jsx("div",{className:"min-h-screen bg-slate-50 text-slate-900 dark:bg-slate-950 dark:text-white",children:e.jsxs("div",{className:"relative mx-auto flex min-h-screen w-full max-w-5xl items-center justify-center px-4 py-10 sm:px-6 lg:px-12",children:[e.jsx("div",{className:"absolute inset-0 -z-10 bg-[radial-gradient(circle_at_top,_rgba(124,58,237,0.12),_transparent_45%)] dark:bg-[radial-gradient(circle_at_top,_rgba(124,58,237,0.2),_transparent_50%)]"}),e.jsxs("div",{className:"w-full max-w-xl rounded-3xl border border-slate-200/80 bg-white/90 p-6 shadow-xl shadow-slate-200/60 backdrop-blur sm:p-8 dark:border-white/10 dark:bg-slate-900/80 dark:shadow-none",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("button",{type:"button",onClick:()=>S(-1),className:"flex h-11 w-11 items-center justify-center rounded-full border border-transparent text-slate-700 transition-colors hover:border-slate-200 hover:bg-white dark:text-slate-200 dark:hover:border-white/10 dark:hover:bg-slate-800","aria-label":"Go back",children:e.jsx(n,{name:"arrow_back",className:"text-[20px]",ariaLabel:"Back"})}),e.jsx("span",{className:"rounded-full border border-slate-200/70 px-3 py-1 text-xs font-semibold uppercase tracking-[0.2em] text-slate-500 dark:border-white/10 dark:text-slate-300",children:"Create account"})]}),e.jsxs("div",{className:"pt-6 text-center",children:[e.jsx("h1",{className:"text-3xl font-semibold leading-tight tracking-tight text-slate-900 dark:text-white",children:"Join the fan hub"}),e.jsx("p",{className:"mt-2 text-sm text-slate-500 dark:text-slate-400",children:"Build your profile and start sharing your favorite titles."})]}),y&&e.jsxs("div",{role:"alert",className:"mt-6 flex items-start gap-2 rounded-2xl border border-red-200/70 bg-red-50 px-4 py-3 text-sm text-red-600 dark:border-red-500/30 dark:bg-red-500/10 dark:text-red-200",children:[e.jsx(n,{name:"error",className:"text-[18px]",ariaLabel:"Error"}),e.jsx("span",{children:y})]}),C&&e.jsxs("div",{role:"status",className:"mt-4 flex items-start gap-2 rounded-2xl border border-emerald-200/70 bg-emerald-50 px-4 py-3 text-sm text-emerald-700 dark:border-emerald-400/40 dark:bg-emerald-400/10 dark:text-emerald-100",children:[e.jsx(n,{name:"check_circle",className:"text-[18px]",ariaLabel:"Info"}),e.jsx("span",{children:C})]}),e.jsxs("form",{onSubmit:M,className:"mt-6 flex flex-col gap-4",noValidate:!0,children:[e.jsxs("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-start",children:[e.jsxs("div",{className:"flex flex-col items-center gap-3 sm:w-[160px]",children:[e.jsxs("div",{className:"group relative cursor-pointer",children:[e.jsx("div",{className:"flex h-24 w-24 items-center justify-center rounded-2xl border-2 border-dashed border-slate-200 bg-slate-50 transition-all group-hover:border-primary group-hover:bg-primary/5 dark:border-white/10 dark:bg-slate-900",children:e.jsx(n,{name:"add_a_photo",className:"text-[28px] text-slate-400 group-hover:text-primary dark:text-slate-500"})}),e.jsx("div",{className:"absolute -bottom-2 -right-2 flex items-center justify-center rounded-full border-2 border-white bg-primary p-1 text-white shadow-md dark:border-slate-900",children:e.jsx(n,{name:"add",className:"text-[14px]"})})]}),e.jsx("p",{className:"text-xs font-semibold uppercase tracking-[0.2em] text-slate-400 dark:text-slate-500",children:"Profile"})]}),e.jsxs("div",{className:"flex flex-1 flex-col gap-4",children:[e.jsxs("label",{className:"flex flex-col gap-2 text-sm font-medium text-slate-700 dark:text-slate-200",children:["Full name",e.jsxs("span",{className:"relative flex items-center",children:[e.jsx(n,{name:"person",className:"absolute left-4 z-10 text-slate-400 dark:text-slate-500"}),e.jsx("input",{className:"h-12 w-full rounded-2xl border border-slate-200 bg-white pl-12 pr-4 text-base text-slate-900 placeholder:text-slate-400 shadow-sm transition-all focus:border-primary focus:outline-none focus:ring-2 focus:ring-primary/30 dark:border-white/10 dark:bg-slate-900 dark:text-white dark:placeholder:text-slate-500",placeholder:"Jordan Lee",type:"text",value:l,onChange:t=>{h(t.target.value),r.fullName&&d(a=>({...a,fullName:void 0}))},onBlur:()=>{const t=u(i,s,m,l,o);t.fullName&&d(a=>({...a,fullName:t.fullName}))},disabled:x})]})]}),r.fullName&&e.jsx("p",{className:"text-xs text-red-500",children:r.fullName}),e.jsxs("label",{className:"flex flex-col gap-2 text-sm font-medium text-slate-700 dark:text-slate-200",children:["Username",e.jsxs("span",{className:"relative flex items-center",children:[e.jsx(n,{name:"alternate_email",className:"absolute left-4 z-10 text-slate-400 dark:text-slate-500"}),e.jsx("input",{className:"h-12 w-full rounded-2xl border border-slate-200 bg-white pl-12 pr-4 text-base text-slate-900 placeholder:text-slate-400 shadow-sm transition-all focus:border-primary focus:outline-none focus:ring-2 focus:ring-primary/30 dark:border-white/10 dark:bg-slate-900 dark:text-white dark:placeholder:text-slate-500",placeholder:"movienesta_fan",type:"text",value:o,onChange:t=>{w(t.target.value),r.username&&d(a=>({...a,username:void 0}))},onBlur:()=>{const t=u(i,s,m,l,o);t.username&&d(a=>({...a,username:t.username}))},disabled:x})]})]}),r.username&&e.jsx("p",{className:"text-xs text-red-500",children:r.username})]})]}),e.jsxs("div",{className:"grid gap-4 sm:grid-cols-2",children:[e.jsxs("label",{className:"flex flex-col gap-2 text-sm font-medium text-slate-700 dark:text-slate-200",children:["Email address",e.jsxs("span",{className:"relative flex items-center",children:[e.jsx(n,{name:"mail",className:"absolute left-4 z-10 text-slate-400 dark:text-slate-500"}),e.jsx("input",{className:"h-12 w-full rounded-2xl border border-slate-200 bg-white pl-12 pr-4 text-base text-slate-900 placeholder:text-slate-400 shadow-sm transition-all focus:border-primary focus:outline-none focus:ring-2 focus:ring-primary/30 dark:border-white/10 dark:bg-slate-900 dark:text-white dark:placeholder:text-slate-500",placeholder:"name@example.com",type:"email",autoComplete:"email",value:i,onChange:t=>{p(t.target.value),r.email&&d(a=>({...a,email:void 0}))},onBlur:()=>{const t=u(i,s,m,l,o);t.email&&d(a=>({...a,email:t.email}))},disabled:x})]})]}),r.email&&e.jsx("p",{className:"text-xs text-red-500",children:r.email}),e.jsxs("label",{className:"flex flex-col gap-2 text-sm font-medium text-slate-700 dark:text-slate-200",children:["Password",e.jsxs("span",{className:"relative flex items-center",children:[e.jsx(n,{name:"lock",className:"absolute left-4 z-10 text-slate-400 dark:text-slate-500"}),e.jsx("input",{className:"h-12 w-full rounded-2xl border border-slate-200 bg-white pl-12 pr-12 text-base text-slate-900 placeholder:text-slate-400 shadow-sm transition-all focus:border-primary focus:outline-none focus:ring-2 focus:ring-primary/30 dark:border-white/10 dark:bg-slate-900 dark:text-white dark:placeholder:text-slate-500",placeholder:`At least ${N} characters`,type:f?"text":"password",autoComplete:"new-password",value:s,onChange:t=>{B(t.target.value),r.password&&d(a=>({...a,password:void 0}))},onBlur:()=>{const t=u(i,s,m,l,o);t.password&&d(a=>({...a,password:t.password}))},disabled:x}),e.jsx("button",{type:"button",onClick:()=>A(t=>!t),className:"absolute right-1.5 z-10 icon-hit text-slate-400 hover:text-slate-700 dark:text-slate-500 dark:hover:text-white hover:bg-slate-100/70 dark:hover:bg-white/10","aria-label":f?"Hide password":"Show password",children:e.jsx(n,{name:f?"visibility":"visibility_off"})})]})]}),r.password&&e.jsx("p",{className:"text-xs text-red-500",children:r.password}),e.jsxs("label",{className:"flex flex-col gap-2 text-sm font-medium text-slate-700 dark:text-slate-200 sm:col-span-2",children:["Confirm password",e.jsxs("span",{className:"relative flex items-center",children:[e.jsx(n,{name:"lock",className:"absolute left-4 z-10 text-slate-400 dark:text-slate-500"}),e.jsx("input",{className:"h-12 w-full rounded-2xl border border-slate-200 bg-white pl-12 pr-4 text-base text-slate-900 placeholder:text-slate-400 shadow-sm transition-all focus:border-primary focus:outline-none focus:ring-2 focus:ring-primary/30 dark:border-white/10 dark:bg-slate-900 dark:text-white dark:placeholder:text-slate-500",placeholder:"Re-enter your password",type:f?"text":"password",autoComplete:"new-password",value:m,onChange:t=>{U(t.target.value),r.confirm&&d(a=>({...a,confirm:void 0}))},onBlur:()=>{const t=u(i,s,m,l,o);t.confirm&&d(a=>({...a,confirm:t.confirm}))},disabled:x})]})]}),r.confirm&&e.jsx("p",{className:"text-xs text-red-500",children:r.confirm})]}),e.jsxs("button",{type:"submit",disabled:x||!z,className:"mt-2 flex h-12 w-full items-center justify-center gap-2 rounded-2xl bg-primary text-sm font-semibold text-white shadow-lg shadow-primary/30 transition-all hover:bg-primary/90 focus:outline-none focus:ring-2 focus:ring-primary/40 disabled:cursor-not-allowed disabled:opacity-60",children:[x?"Creating accountâ€¦":"Create Account",e.jsx(n,{name:"arrow_forward",className:"text-[18px]",ariaLabel:"Submit"})]})]}),e.jsxs("div",{className:"relative flex items-center py-6",children:[e.jsx("div",{className:"flex-grow border-t border-slate-200 dark:border-white/10"}),e.jsx("span",{className:"mx-4 flex-shrink text-[11px] font-semibold uppercase tracking-[0.2em] text-slate-400 dark:text-slate-500",children:"Or join with"}),e.jsx("div",{className:"flex-grow border-t border-slate-200 dark:border-white/10"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsx("button",{type:"button",className:"relative flex h-12 items-center justify-center rounded-2xl border border-slate-200 bg-white shadow-sm transition-all hover:-translate-y-0.5 hover:bg-slate-50 dark:border-white/10 dark:bg-slate-900 dark:hover:bg-slate-800","aria-label":"Sign up with Google",children:e.jsxs("svg",{className:"h-6 w-6",fill:"none",viewBox:"0 0 48 48",xmlns:"http://www.w3.org/2000/svg",children:[e.jsx("path",{d:"M43.6191 20.0076H24.2862V27.9174H35.4984C34.4601 30.7303 32.7099 32.9691 30.229 34.4055L30.1983 34.619L36.313 39.4623L36.6568 39.4996C40.6622 35.8459 43.1558 30.6713 43.6191 20.0076Z",fill:"#4285F4"}),e.jsx("path",{d:"M24.2862 44C30.4079 44 35.6322 41.9368 39.6738 38.3075L30.229 34.4055C27.6047 36.1423 24.3297 37.218 24.2862 37.218C18.4552 37.218 13.4357 33.3283 11.5976 28.187L11.2372 28.211L4.85695 33.197L4.74751 33.3136C8.80775 41.6508 15.9324 44 24.2862 44Z",fill:"#34A853"}),e.jsx("path",{d:"M11.5975 28.187C11.1394 26.8532 10.899 25.4379 10.899 24C10.899 22.5621 11.1394 21.1468 11.5975 19.813L11.5833 19.664L4.90823 14.733L4.7475 14.808C3.1207 18.0674 2.22754 21.9079 2.22754 26C2.22754 30.0921 3.1207 33.9326 4.7475 37.192L11.5975 28.187Z",fill:"#FBBC04"}),e.jsx("path",{d:"M24.2862 10.7788C27.5684 10.7788 29.8706 12.0006 31.4392 13.4795L39.8662 5.617C35.6111 2.05942 30.4079 0 24.2862 0C15.9324 0 8.80775 2.34919 4.74751 10.6864L11.5975 19.664C13.4357 14.5227 18.4552 10.7788 24.2862 10.7788Z",fill:"#EA4335"})]})}),e.jsx("button",{type:"button",className:"flex h-12 items-center justify-center rounded-2xl border border-slate-200 bg-white shadow-sm transition-all hover:-translate-y-0.5 hover:bg-slate-50 dark:border-white/10 dark:bg-slate-900 dark:hover:bg-slate-800","aria-label":"Sign up with Apple",children:e.jsx("svg",{className:"h-6 w-6 text-slate-800 dark:text-white",fill:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"})})]}),e.jsx("div",{className:"mt-8 flex flex-col items-center gap-4 text-center",children:e.jsxs("p",{className:"text-sm font-medium text-slate-500 dark:text-slate-400",children:["Already have an account?"," ",e.jsx(R,{to:"/auth/signin",className:"font-semibold text-primary hover:underline",children:"Sign in"})]})})]})]})})};export{$ as default};
