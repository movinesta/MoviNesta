import{c as o,l as p,j as e,S as u,r as b}from"./index-D8UbFo8l.js";import{T as y}from"./TopBar-ClKHHvFp.js";import{D as g,a as j}from"./DiaryLibraryTab-CCVS7T3L.js";import{f}from"./format-DWLSBLoY.js";import{F as N}from"./film-E5LDX5VI.js";import{C as v,L as w}from"./list-checks-ym3_vcDs.js";import"./PageChrome-BL71Rgrf.js";import"./brand-DTIDtbc4.js";import"./index-WHzSfndh.js";import"./users-CgaclyYW.js";import"./bookmark-plus-CSSRfPFt.js";import"./star-dR1loror.js";import"./diaryStatus-CEaO_AiJ.js";/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x=o("ChartColumn",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k=o("ChartPie",[["path",{d:"M21 12c.552 0 1.005-.449.95-.998a10 10 0 0 0-8.953-8.951c-.55-.055-.998.398-.998.95v8a1 1 0 0 0 1 1z",key:"pzmjnu"}],["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}]]),C=t=>{const[l,d]=t.split("-"),s=Number(l),n=Number(d);if(!s||!n)return t;const i=new Date(s,n-1,1);return f(i,{month:"short",year:"numeric"})},D=()=>{const{stats:t,isLoading:l,isError:d,error:s}=p();if(l)return e.jsx("div",{className:"px-2 pb-4",children:e.jsx("div",{className:"space-y-3",children:Array.from({length:3}).map((a,r)=>e.jsxs("div",{className:"rounded-mn-card border border-mn-border-subtle/60 bg-mn-bg-elevated/80 p-3 shadow-mn-card",children:[e.jsx("div",{className:"mb-2 h-3 w-1/3 rounded bg-mn-bg/70"}),e.jsx("div",{className:"flex gap-1.5",children:Array.from({length:6}).map((M,h)=>e.jsx("div",{className:"h-10 flex-1 rounded bg-mn-bg/70"},h))})]},r))})});if(d)return e.jsx("div",{className:"flex min-h-[40vh] items-center justify-center px-4",children:e.jsxs("div",{className:"max-w-sm rounded-mn-card border border-mn-error/40 bg-mn-error/5 p-4 text-center text-[11px] text-mn-text-primary shadow-mn-card",children:[e.jsx("p",{className:"font-semibold",children:"Unable to load your stats."}),e.jsx("p",{className:"mt-1 text-[10px] text-mn-text-secondary",children:s??"Please try again in a moment."})]})});if(t.totalRated===0&&t.totalWatched===0&&!t.ratingDistribution.length&&!t.topGenres.length&&!t.watchCountByMonth.length)return e.jsx("div",{className:"flex min-h-[40vh] items-center justify-center px-4",children:e.jsxs("div",{className:"max-w-sm rounded-mn-card border border-mn-border-subtle bg-mn-bg-elevated/80 p-5 text-center text-[11px] text-mn-text-secondary shadow-mn-card",children:[e.jsx("div",{className:"mx-auto mb-3 flex h-10 w-10 items-center justify-center rounded-2xl bg-mn-primary/15",children:e.jsx(u,{className:"h-5 w-5 text-mn-primary","aria-hidden":"true"})}),e.jsx("p",{className:"font-heading text-sm font-semibold text-mn-text-primary",children:"No stats yet"}),e.jsx("p",{className:"mt-1 text-[11px]",children:"Once you start rating titles and marking them as watched, you'll see your rating distribution, top genres, and watch streaks here."})]})});const n=t.ratingDistribution.reduce((a,r)=>r.count>a?r.count:a,0),i=t.watchCountByMonth.reduce((a,r)=>r.count>a?r.count:a,0),c=t.topGenres.slice(0,6);return e.jsxs("div",{className:"space-y-3 px-2 pb-4",children:[e.jsxs("section",{className:"grid grid-cols-2 gap-3 sm:grid-cols-3",children:[e.jsxs("div",{className:"rounded-mn-card border border-mn-border-subtle/60 bg-mn-bg-elevated/80 p-3 shadow-mn-card",children:[e.jsxs("div",{className:"flex items-center justify-between gap-2",children:[e.jsx("span",{className:"text-[11px] text-mn-text-secondary",children:"Watched"}),e.jsx(N,{className:"h-3.5 w-3.5 text-mn-text-muted","aria-hidden":"true"})]}),e.jsx("p",{className:"mt-1 text-lg font-semibold text-mn-text-primary",children:t.totalWatched}),e.jsxs("p",{className:"mt-0.5 text-[10px] text-mn-text-muted",children:["Titles marked as ",e.jsx("span",{className:"font-medium text-mn-text-primary",children:"Watched"}),"."]})]}),e.jsxs("div",{className:"rounded-mn-card border border-mn-border-subtle/60 bg-mn-bg-elevated/80 p-3 shadow-mn-card",children:[e.jsxs("div",{className:"flex items-center justify-between gap-2",children:[e.jsx("span",{className:"text-[11px] text-mn-text-secondary",children:"Rated"}),e.jsx(x,{className:"h-3.5 w-3.5 text-mn-text-muted","aria-hidden":"true"})]}),e.jsx("p",{className:"mt-1 text-lg font-semibold text-mn-text-primary",children:t.totalRated}),e.jsx("p",{className:"mt-0.5 text-[10px] text-mn-text-muted",children:"Ratings you've logged across movies, series, and anime."})]}),e.jsxs("div",{className:"col-span-2 rounded-mn-card border border-mn-border-subtle/60 bg-mn-bg-elevated/80 p-3 text-[11px] text-mn-text-secondary shadow-mn-card sm:col-span-1",children:[e.jsxs("div",{className:"flex items-center justify-between gap-2",children:[e.jsx("span",{className:"text-[11px] text-mn-text-secondary",children:"Average rating"}),e.jsx(k,{className:"h-3.5 w-3.5 text-mn-text-muted","aria-hidden":"true"})]}),e.jsx("p",{className:"mt-1 text-lg font-semibold text-mn-text-primary",children:t.averageRating!=null?t.averageRating.toFixed(1):"–"}),e.jsx("p",{className:"mt-0.5 text-[10px] text-mn-text-muted",children:"Quick glance at how generous you typically are with stars."})]})]}),e.jsxs("section",{className:"rounded-mn-card border border-mn-border-subtle/60 bg-mn-bg-elevated/80 p-3 shadow-mn-card",children:[e.jsxs("div",{className:"mb-2 flex items-center justify-between gap-2",children:[e.jsx("h2",{className:"text-xs font-semibold text-mn-text-primary",children:"Rating distribution"}),e.jsxs("span",{className:"text-[10px] text-mn-text-muted",children:["0.5 – 5.0 • ",t.totalRated," ratings"]})]}),t.ratingDistribution.length===0?e.jsx("p",{className:"text-[11px] text-mn-text-secondary",children:"Once you start rating titles, you'll see how your scores cluster here."}):e.jsx("div",{className:"flex items-end gap-1.5",children:t.ratingDistribution.map(a=>{const r=n>0?Math.max(a.count/n*52,6):6;return e.jsxs("div",{className:"flex flex-1 flex-col items-center gap-1",children:[e.jsx("div",{className:"w-full rounded-t bg-mn-primary/25",style:{height:r},"aria-hidden":"true"}),e.jsxs("span",{className:"text-[9px] text-mn-text-secondary",children:[a.rating.toFixed(1),"★"]})]},a.rating)})})]}),e.jsxs("section",{className:"rounded-mn-card border border-mn-border-subtle/60 bg-mn-bg-elevated/80 p-3 shadow-mn-card",children:[e.jsxs("div",{className:"mb-2 flex items-center justify-between gap-2",children:[e.jsx("h2",{className:"text-xs font-semibold text-mn-text-primary",children:"Top genres"}),e.jsx("span",{className:"text-[10px] text-mn-text-muted",children:"Based on titles you've marked as watched"})]}),c.length?e.jsx("div",{className:"flex flex-wrap gap-1.5",children:c.map(a=>e.jsxs("span",{className:"inline-flex items-center gap-1 rounded-full bg-mn-primary-soft/15 px-2.5 py-1 text-[10px] text-mn-text-primary",children:[e.jsx("span",{className:"h-1.5 w-1.5 rounded-full bg-mn-primary","aria-hidden":"true"}),e.jsx("span",{className:"font-medium",children:a.genre}),e.jsxs("span",{className:"text-[9px] text-mn-text-muted",children:["×",a.count]})]},a.genre))}):e.jsx("p",{className:"text-[11px] text-mn-text-secondary",children:"Watch and rate a few titles to reveal your go-to genres."})]}),e.jsxs("section",{className:"rounded-mn-card border border-mn-border-subtle/60 bg-mn-bg-elevated/80 p-3 shadow-mn-card",children:[e.jsxs("div",{className:"mb-2 flex items-center justify-between gap-2",children:[e.jsx("h2",{className:"text-xs font-semibold text-mn-text-primary",children:"Watch count over time"}),e.jsx("span",{className:"text-[10px] text-mn-text-muted",children:"Month by month, based on your library"})]}),t.watchCountByMonth.length?e.jsx("div",{className:"space-y-1.5",children:e.jsx("div",{className:"flex items-end gap-1.5",children:t.watchCountByMonth.map(a=>{const r=i>0?Math.max(a.count/i*52,6):6;return e.jsxs("div",{className:"flex flex-1 flex-col items-center gap-1",children:[e.jsx("div",{className:"w-full rounded-t bg-mn-primary/20",style:{height:r},"aria-hidden":"true"}),e.jsx("span",{className:"text-[9px] text-mn-text-secondary",children:C(a.month)})]},a.month)})})}):e.jsx("p",{className:"text-[11px] text-mn-text-secondary",children:"As you mark titles as watched, you'll see your movie-watching streaks here."})]})]})},m=[{key:"timeline",label:"Timeline",icon:v,description:"Chronological history of your ratings, reviews, and library updates."},{key:"library",label:"Library",icon:w,description:"Filter your watchlist and history by status and type."},{key:"stats",label:"Stats",icon:x,description:"Rating distribution, top genres, and watch trends over time."}],I=()=>{const[t,l]=b.useState("timeline"),d=m.find(s=>s.key===t)??m[0];return e.jsxs("div",{className:"flex flex-1 flex-col gap-4 pb-2 pt-1",children:[e.jsx(y,{title:"Your clean movie diary",subtitle:"Log what you watch, manage your library, and keep tabs on your habits without the noise."}),e.jsxs("section",{className:"px-2",children:[e.jsx("nav",{className:"mt-1 flex items-center justify-between gap-3","aria-label":"Diary tabs",children:e.jsx("div",{role:"tablist","aria-orientation":"horizontal",className:"flex max-w-full gap-1.5 overflow-x-auto rounded-full border border-mn-border-subtle/60 bg-mn-bg-elevated/80 p-1.5 backdrop-blur",children:m.map(s=>{const n=s.icon,i=s.key===t;return e.jsxs("button",{type:"button",role:"tab","aria-selected":i,"aria-controls":`diary-tabpanel-${s.key}`,className:`flex min-w-[90px] flex-1 items-center justify-center gap-1 rounded-full px-3 py-1.5 text-xs font-medium transition
                    ${i?"bg-mn-primary-soft text-mn-text-primary shadow-sm":"text-mn-text-secondary hover:bg-mn-bg-elevated/80 hover:text-mn-text-primary"}`,onClick:()=>l(s.key),children:[e.jsx(n,{className:"h-3.5 w-3.5 shrink-0","aria-hidden":"true"}),e.jsx("span",{className:"truncate",children:s.label})]},s.key)})})}),e.jsx("p",{className:"mt-1 px-1 text-[10px] text-mn-text-secondary",children:d.description})]}),e.jsxs("section",{"aria-live":"polite",className:"flex-1",children:[t==="timeline"&&e.jsx("div",{id:"diary-tabpanel-timeline",role:"tabpanel",className:"h-full w-full",children:e.jsx(g,{})}),t==="library"&&e.jsx("div",{id:"diary-tabpanel-library",role:"tabpanel",className:"h-full w-full",children:e.jsx(j,{})}),t==="stats"&&e.jsx("div",{id:"diary-tabpanel-stats",role:"tabpanel",className:"h-full w-full",children:e.jsx(D,{})})]})]})};export{I as default};
