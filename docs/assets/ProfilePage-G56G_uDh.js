import{C as ge,I as he,u as we,b as ve,e as je,J as ye,K as Ne,R as d,N as _e,c as z,w as ke,s as y,j as e,B as b,S as Ce,i as K,M as Se,F as Ue,m as se,D as Fe}from"./index-CfTfJYoU.js";import{D as Pe,a as Le,b as Me,c as Ae,d as Ee,e as $e}from"./dialog-BRBrZ1TA.js";import{a as Ie}from"./appUrl-BIFKGN0O.js";import{I as re}from"./input-DB4hpdc9.js";import{u as Be}from"./useUserLastActive-CyZDxpqH.js";import{u as qe}from"./useToggleFollow-Bhpzn6MD.js";import{u as De}from"./useSuggestedPeople-DnqR33px.js";import{a as ze}from"./useDiaryLibrary-BIlSx7_5.js";import{A as Te}from"./arrow-left-CuYb_sZ6.js";import{S as Ke}from"./share-2-CHWdGupY.js";import{P as Oe}from"./plus-rw_vdmR_.js";const Qe=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],We=ge("settings",Qe),Re=i=>i?i.startsWith("@")?i:`@${i}`:null,ae=(i,a)=>{const m=(i||a||"").replace(/^@/,"").trim();if(!m)return"?";const s=m.split(/\s+/);return s.length===1?s[0].slice(0,2).toUpperCase():(s[0][0]+s[1][0]).toUpperCase()},M=i=>i>=1e6?`${(i/1e6).toFixed(1).replace(/\.0$/,"")}M`:i>=1e4?`${Math.round(i/100)/10}k`:i>=1e3?`${(i/1e3).toFixed(1).replace(/\.0$/,"")}k`:String(i),Ve=async(i,a)=>{try{if(typeof navigator<"u"&&"share"in navigator){await navigator.share({title:i,url:a});return}}catch{}try{await navigator.clipboard.writeText(a)}catch{}};function T({title:i,imageUrl:a,onClick:o}){return e.jsxs("button",{type:"button",onClick:o,className:"group relative aspect-[2/3] overflow-hidden rounded-xl bg-muted/40 text-left",children:[a?e.jsx("img",{src:a,alt:i,className:"absolute inset-0 h-full w-full object-cover transition-transform duration-300 group-hover:scale-[1.02]",loading:"lazy"}):e.jsx("div",{className:"absolute inset-0 flex items-center justify-center text-xs text-muted-foreground",children:i}),e.jsx("div",{className:"absolute inset-0 bg-black/0 transition-colors group-hover:bg-black/15"}),e.jsx("div",{className:"absolute inset-x-0 bottom-0 flex h-1/4 items-end bg-gradient-to-t from-black/70 via-black/25 to-transparent p-2",children:e.jsx("p",{className:"truncate text-xs font-medium text-white",children:i})})]})}function Ye({id:i,displayName:a,username:o,avatarUrl:m,matchPercent:s,isFollowing:g,onFollow:A,onOpen:E}){const N=typeof s=="number"&&s>0?`${s}% match`:g?"Following":"Similar taste";return e.jsxs("div",{className:"snap-start min-w-[140px] rounded-2xl border border-white/5 bg-card p-3",children:[e.jsxs("button",{type:"button",onClick:()=>E(o),className:"flex w-full flex-col items-center gap-3",children:[m?e.jsx("img",{src:m,alt:a??o??"User",className:"h-16 w-16 rounded-full object-cover",loading:"lazy"}):e.jsx("div",{className:"flex h-16 w-16 items-center justify-center rounded-full bg-muted text-xs font-semibold text-muted-foreground",children:ae(a,o)}),e.jsxs("div",{className:"w-full text-center",children:[e.jsx("p",{className:"w-full truncate text-sm font-bold text-white",children:a??o??"User"}),e.jsx("p",{className:"text-[10px] text-muted-foreground",children:N})]})]}),e.jsx(b,{type:"button",onClick:()=>A(i,g),className:K("mt-3 h-8 w-full rounded-full text-xs font-bold",g?"bg-white/10 hover:bg-white/20":"bg-primary hover:bg-primary/80"),children:g?"Following":"Follow"})]})}const lt=()=>{const{username:i}=he(),a=we(),{user:o}=ve(),m=je(),{data:s,isLoading:g,isError:A,error:E}=ye(i??""),N=qe(),p=!!s?.isCurrentUser,$=s?.displayName||s?.username||"Profile",O=Re(s?.username),{getStatus:Q}=Ne(),C=s?.id??null,I=d.useMemo(()=>C?Q(C):"offline",[Q,C]),W=Be(C),R=d.useMemo(()=>{if(I==="online")return"Online";const t=_e(W.data??null);return t?t==="Just now"?"Online":`Active ${t}`:null},[W.data,I]),[h,S]=d.useState("favorites");d.useEffect(()=>S("favorites"),[i]);const{entries:u,isLoading:w,isError:ie}=ze({status:"all",type:"all"},s?.id),le=d.useMemo(()=>u.filter(t=>t.status==="watched").length,[u]),U=d.useMemo(()=>{const t=u.filter(l=>typeof l.rating=="number").sort((l,x)=>(x.rating??0)-(l.rating??0)),r=t.filter(l=>(l.rating??0)>=4);return(r.length?r:t).slice(0,60)},[u]),F=d.useMemo(()=>u.filter(t=>t.status==="watched").sort((t,r)=>t.updatedAt<r.updatedAt?1:-1).slice(0,60),[u]),V=d.useMemo(()=>u.filter(t=>t.status==="want_to_watch").sort((t,r)=>t.updatedAt<r.updatedAt?1:-1).slice(0,60),[u]),Y=d.useMemo(()=>(U.find(r=>!!r.posterUrl)??F.find(r=>!!r.posterUrl)??u.find(r=>!!r.posterUrl))?.posterUrl??null,[U,F,u]),{data:ne=[]}=De(),H=ne.slice(0,10),{data:v=[],isLoading:J}=z({queryKey:["profile","lists",s?.id??null,p],enabled:!!s?.id,queryFn:async()=>{if(!s?.id)return[];let t=y.from("lists").select("id, name, description, is_public, updated_at").eq("user_id",s.id).order("updated_at",{ascending:!1}).limit(60);p||(t=t.eq("is_public",!0));const{data:r,error:l}=await t;if(l)throw new Error(l.message);return r??[]}}),oe=v.length,{data:de=new Map}=z({queryKey:["profile","listCovers",s?.id??null,v.map(t=>t.id).join(",")],enabled:!!s?.id&&v.length>0,queryFn:async()=>{const t=v.map(c=>c.id),{data:r,error:l}=await y.from("list_items").select("list_id, title_id, position").in("list_id",t).order("position",{ascending:!0}).limit(400);if(l)return console.warn("[ProfilePageV2] Failed to load list_items",l.message),new Map;const x=new Map;(r??[]).forEach(c=>{!c?.list_id||!c?.title_id||x.has(c.list_id)||x.set(c.list_id,c.title_id)});const _=Array.from(new Set(Array.from(x.values())));if(!_.length)return new Map;const{data:n,error:f}=await y.from("media_items").select(`id,
           kind,
           tmdb_title,
           tmdb_name,
           tmdb_original_title,
           tmdb_original_name,
           tmdb_release_date,
           tmdb_first_air_date,
           tmdb_poster_path,
           tmdb_backdrop_path,
           tmdb_original_language,
           omdb_title,
           omdb_year,
           omdb_language,
           omdb_imdb_id,
           omdb_imdb_rating,
           omdb_rating_rotten_tomatoes,
           omdb_poster,
           omdb_rated,
           tmdb_id`).in("id",_).limit(200);if(f)return console.warn("[ProfilePageV2] Failed to load list cover titles",f.message),new Map;const D=new Map(n.map(c=>{const k=se(c);return[k.id,k.posterUrl??k.backdropUrl??null]})),j=new Map;return x.forEach((c,k)=>{j.set(k,D.get(c)??null)}),j}}),{data:G=[],isLoading:B}=z({queryKey:["profile","reviews",s?.id??null],enabled:!!s?.id,queryFn:async()=>{if(!s?.id)return[];const{data:t,error:r}=await y.from("reviews").select("id, title_id, content_type, rating, headline, body, spoiler, created_at").eq("user_id",s.id).order("created_at",{ascending:!1}).limit(80);if(r)throw new Error(r.message);const l=t??[],x=Array.from(new Set(l.map(n=>n.title_id).filter(Boolean))),_=new Map;if(x.length){const{data:n,error:f}=await y.from("media_items").select(`id,
             kind,
             tmdb_title,
             tmdb_name,
             tmdb_original_title,
             tmdb_original_name,
             tmdb_release_date,
             tmdb_first_air_date,
             tmdb_poster_path,
             tmdb_backdrop_path,
             tmdb_original_language,
             omdb_title,
             omdb_year,
             omdb_language,
             omdb_imdb_id,
             omdb_imdb_rating,
             omdb_rating_rotten_tomatoes,
             omdb_poster,
             omdb_rated,
             tmdb_id`).in("id",x).limit(200);!f&&n&&n.forEach(D=>{const j=se(D);_.set(j.id,{title:j.title,posterUrl:j.posterUrl})})}return l.map(n=>{const f=_.get(n.title_id);return{id:n.id,titleId:n.title_id,title:f?.title??"Untitled",posterUrl:f?.posterUrl??null,ratingStars:Fe(n.rating??null),headline:n.headline,body:n.body,spoiler:!!n.spoiler,createdAt:n.created_at}})}}),[ce,X]=d.useState(!1),ue=async t=>{if(!o?.id){alert("You need to be signed in to start a conversation.");return}if(o.id===t){alert("You can't start a conversation with yourself.");return}X(!0);try{const r=await Ue("create-direct-conversation",{targetUserId:t},{timeoutMs:25e3});if(!r?.ok||!r.conversationId)throw new Error(r?.error??"Failed to start conversation");a(`/messages/${r.conversationId}`)}catch(r){console.error("[ProfilePageV2] Failed to start conversation",r),alert("Couldn't start conversation. Please try again.")}finally{X(!1)}},[me,P]=d.useState(!1),[Z,ee]=d.useState(""),[q,te]=d.useState(""),L=ke({mutationFn:async()=>{if(!o?.id)throw new Error("Not authenticated");const t=Z.trim();if(!t)throw new Error("List name is required");const{data:r,error:l}=await y.from("lists").insert({user_id:o.id,name:t,description:q.trim()?q.trim():null,is_public:!1}).select("id").single();if(l)throw new Error(l.message);return r},onSuccess:async t=>{P(!1),ee(""),te(""),await m.invalidateQueries({queryKey:["profile","lists",s?.id??null]}),t?.id&&a(`/lists/${t.id}`)}}),xe=async(t,r)=>{s?.id&&(await N.mutateAsync({targetUserId:t,currentlyFollowing:r}),m.invalidateQueries({queryKey:["suggested-people",o?.id??null]}))},be=d.useMemo(()=>typeof window>"u"?"":Ie(`/u/${s?.username??""}`),[s?.username]);if(g)return e.jsx("div",{className:"flex flex-1 flex-col",children:e.jsx("div",{className:"flex flex-1 items-center justify-center py-12 text-sm text-muted-foreground",children:"Loading profile…"})});if(A||!s)return e.jsx("div",{className:"flex flex-1 flex-col px-4 py-12",children:e.jsxs("div",{className:"mx-auto max-w-sm rounded-2xl border border-destructive/40 bg-destructive/5 p-4 text-center text-xs text-foreground shadow-lg",children:[e.jsx("p",{className:"font-semibold",children:"Unable to load profile."}),e.jsx("p",{className:"mt-1 text-xs text-muted-foreground",children:E?.message??"Please try again in a moment."}),e.jsx(b,{type:"button",variant:"secondary",className:"mt-4",onClick:()=>a(-1),children:"Go back"})]})});const pe=p&&H.length>0,fe=[{id:"favorites",label:"Favorites"},{id:"recent",label:"Recent"},{id:"watchlist",label:"Watchlist"},{id:"lists",label:"Lists"},{id:"reviews",label:"Reviews"}];return e.jsxs("div",{className:"relative flex min-h-screen w-full flex-1 flex-col pb-24",children:[e.jsxs("div",{className:"relative h-80 w-full shrink-0",children:[Y?e.jsx("img",{src:Y,alt:"Profile cover",className:"absolute inset-0 h-full w-full object-cover"}):e.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-[#0b0611] via-[#150b1e] to-background"}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-black/40 via-transparent to-background"}),e.jsxs("div",{className:"absolute left-0 top-0 z-20 flex w-full items-center justify-between p-4 pt-12 md:pt-6",children:[e.jsx("button",{type:"button",onClick:()=>a(-1),className:"flex h-10 w-10 items-center justify-center rounded-full bg-black/20 text-white backdrop-blur-md transition-colors hover:bg-black/40","aria-label":"Back",children:e.jsx(Te,{className:"h-5 w-5"})}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{type:"button",onClick:()=>a("/search"),className:"flex h-10 w-10 items-center justify-center rounded-full bg-black/20 text-white backdrop-blur-md transition-colors hover:bg-black/40","aria-label":"Search",children:e.jsx(Ce,{className:"h-5 w-5"})}),p?e.jsx("button",{type:"button",onClick:()=>a("/settings"),className:"flex h-10 w-10 items-center justify-center rounded-full bg-black/20 text-white backdrop-blur-md transition-colors hover:bg-black/40","aria-label":"Settings",children:e.jsx(We,{className:"h-5 w-5"})}):null]})]})]}),e.jsx("div",{className:"relative z-10 -mt-20 px-5",children:e.jsxs("div",{className:"flex flex-col items-start gap-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute -inset-2 rounded-full bg-primary/30 blur-md"}),s.avatarUrl?e.jsx("img",{src:s.avatarUrl,alt:$,className:"relative h-28 w-28 rounded-full border-4 border-background bg-card object-cover shadow-xl"}):e.jsx("div",{className:"relative flex h-28 w-28 items-center justify-center rounded-full border-4 border-background bg-card text-2xl font-bold text-muted-foreground shadow-xl",children:ae(s.displayName,s.username)})]}),e.jsxs("div",{className:"w-full",children:[e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold leading-tight tracking-tight text-white",children:$}),O?e.jsx("p",{className:"mt-1 text-base font-medium text-muted-foreground",children:O}):null,R?e.jsxs("div",{className:"mt-2 flex items-center gap-2 text-sm font-medium text-muted-foreground",children:[I==="online"?e.jsx("span",{className:"h-2.5 w-2.5 rounded-full bg-green-500","aria-hidden":!0}):null,e.jsx("span",{children:R})]}):null]}),e.jsxs("div",{className:"mt-1 flex items-center gap-2",children:[p?e.jsx(b,{type:"button",variant:"secondary",className:"h-9 rounded-full bg-white/10 px-5 text-sm font-semibold text-white hover:bg-white/20",onClick:()=>a("/settings/profile"),children:"Edit"}):e.jsx(b,{type:"button",variant:"secondary",className:K("h-9 rounded-full px-5 text-sm font-semibold",s.isFollowing?"bg-white/10 text-white hover:bg-white/20":"bg-primary text-white hover:bg-primary/80"),disabled:N.isPending,onClick:async()=>{await N.mutateAsync({targetUserId:s.id,currentlyFollowing:s.isFollowing}),await m.invalidateQueries({queryKey:["profile","byUsername",s.username??"",o?.id??null]})},children:s.isFollowing?"Following":"Follow"}),e.jsx(b,{type:"button",variant:"secondary",size:"icon",className:"h-9 w-9 rounded-full bg-white/10 text-white hover:bg-white/20",onClick:()=>Ve(`${$} on MoviNesta`,be),"aria-label":"Share profile",children:e.jsx(Ke,{className:"h-4 w-4"})})]})]}),s.bio?e.jsx("p",{className:"mt-3 max-w-sm text-sm leading-relaxed text-gray-300",children:s.bio}):null,p?null:e.jsx("div",{className:"mt-4 flex gap-2",children:e.jsxs(b,{type:"button",variant:"secondary",className:"h-9 rounded-full bg-white/10 px-4 text-sm font-semibold text-white hover:bg-white/20",onClick:()=>ue(s.id),disabled:ce,children:[e.jsx(Se,{className:"h-4 w-4"}),"Message"]})})]})]})}),e.jsxs("div",{className:"flex justify-between px-6 py-8",children:[e.jsxs("button",{type:"button",onClick:()=>S("recent"),className:"group flex flex-col items-center gap-1",children:[e.jsx("span",{className:"text-2xl font-bold text-white transition-colors group-hover:text-primary",children:M(le)}),e.jsx("span",{className:"text-xs font-medium uppercase tracking-wide text-muted-foreground",children:"Watched"})]}),e.jsxs("button",{type:"button",onClick:()=>S("lists"),className:"group flex flex-col items-center gap-1",children:[e.jsx("span",{className:"text-2xl font-bold text-white transition-colors group-hover:text-primary",children:M(oe)}),e.jsx("span",{className:"text-xs font-medium uppercase tracking-wide text-muted-foreground",children:"Lists"})]}),e.jsxs("button",{type:"button",onClick:()=>a(`/u/${s.username}/followers`),className:"group flex flex-col items-center gap-1",children:[e.jsx("span",{className:"text-2xl font-bold text-white transition-colors group-hover:text-primary",children:M(s.followersCount)}),e.jsx("span",{className:"text-xs font-medium uppercase tracking-wide text-muted-foreground",children:"Followers"})]}),e.jsxs("button",{type:"button",onClick:()=>a(`/u/${s.username}/following`),className:"group flex flex-col items-center gap-1",children:[e.jsx("span",{className:"text-2xl font-bold text-white transition-colors group-hover:text-primary",children:M(s.followingCount)}),e.jsx("span",{className:"text-xs font-medium uppercase tracking-wide text-muted-foreground",children:"Following"})]})]}),pe?e.jsxs("div",{className:"mb-8 pl-5",children:[e.jsx("h3",{className:"mb-4 text-lg font-bold text-white",children:"Discover People"}),e.jsx("div",{className:"no-scrollbar flex snap-x gap-3 overflow-x-auto pb-4 pr-5",children:H.map(t=>e.jsx(Ye,{id:t.id,displayName:t.displayName,username:t.username,avatarUrl:t.avatarUrl,matchPercent:t.matchPercent,isFollowing:t.isFollowing,onFollow:xe,onOpen:r=>{r&&a(`/u/${r.replace(/^@/,"")}`)}},t.id))})]}):null,e.jsx("div",{className:"sticky top-0 z-20 border-b border-white/5 bg-background/80 px-5 backdrop-blur-lg",children:e.jsx("div",{className:"no-scrollbar flex gap-8 overflow-x-auto",children:fe.map(t=>{const r=h===t.id;return e.jsxs("button",{type:"button",onClick:()=>S(t.id),className:K("relative shrink-0 py-4 text-sm transition-colors",r?"font-bold text-white":"font-medium text-muted-foreground hover:text-white"),children:[t.label,r?e.jsx("span",{className:"absolute bottom-0 left-0 h-0.5 w-full rounded-t-full bg-primary shadow-[0_0_10px_rgba(127,19,236,0.5)]"}):null]},t.id)})})}),e.jsxs("div",{className:"min-h-[420px] p-4",children:[ie?e.jsx("div",{className:"rounded-2xl border border-destructive/40 bg-destructive/5 p-4 text-xs text-muted-foreground",children:"Failed to load library."}):null,h==="favorites"?e.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[(w?[]:U).map(t=>e.jsx(T,{title:t.title,imageUrl:t.posterUrl,onClick:()=>a(`/title/${t.titleId}`)},t.id)),!w&&U.length===0?e.jsx("div",{className:"col-span-3 rounded-2xl border border-white/5 bg-card p-5 text-center text-xs text-muted-foreground",children:"No favorites yet."}):null]}):null,h==="recent"?e.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[(w?[]:F).map(t=>e.jsx(T,{title:t.title,imageUrl:t.posterUrl,onClick:()=>a(`/title/${t.titleId}`)},t.id)),!w&&F.length===0?e.jsx("div",{className:"col-span-3 rounded-2xl border border-white/5 bg-card p-5 text-center text-xs text-muted-foreground",children:"No watched titles yet."}):null]}):null,h==="watchlist"?e.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[(w?[]:V).map(t=>e.jsx(T,{title:t.title,imageUrl:t.posterUrl,onClick:()=>a(`/title/${t.titleId}`)},t.id)),!w&&V.length===0?e.jsx("div",{className:"col-span-3 rounded-2xl border border-white/5 bg-card p-5 text-center text-xs text-muted-foreground",children:"Watchlist is empty."}):null]}):null,h==="lists"?e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[J?null:v.map(t=>{const r=de.get(t.id)??null;return e.jsxs("button",{type:"button",onClick:()=>a(`/lists/${t.id}`),className:"group relative overflow-hidden rounded-2xl border border-white/5 bg-card text-left",children:[r?e.jsx("img",{src:r,alt:t.name,className:"absolute inset-0 h-full w-full object-cover opacity-70 transition-transform duration-300 group-hover:scale-[1.02]",loading:"lazy"}):null,e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/80 via-black/35 to-black/10"}),e.jsxs("div",{className:"relative p-4",children:[e.jsx("p",{className:"text-sm font-bold text-white",children:t.name}),t.description?e.jsx("p",{className:"mt-1 line-clamp-2 text-xs text-muted-foreground",children:t.description}):e.jsx("p",{className:"mt-1 text-xs text-muted-foreground",children:t.is_public?"Public list":"Private list"})]})]},t.id)}),!J&&v.length===0?e.jsx("div",{className:"col-span-2 rounded-2xl border border-white/5 bg-card p-5 text-center text-xs text-muted-foreground",children:"No lists yet."}):null]}):null,h==="reviews"?e.jsxs("div",{className:"space-y-3",children:[B?e.jsx("div",{className:"rounded-2xl border border-white/5 bg-card p-5 text-center text-xs text-muted-foreground",children:"Loading reviews…"}):null,!B&&G.length===0?e.jsx("div",{className:"rounded-2xl border border-white/5 bg-card p-5 text-center text-xs text-muted-foreground",children:"No reviews yet."}):null,B?null:G.map(t=>e.jsxs("button",{type:"button",onClick:()=>a(`/title/${t.titleId}`),className:"flex w-full gap-3 rounded-2xl border border-white/5 bg-card p-4 text-left",children:[e.jsx("div",{className:"h-16 w-12 overflow-hidden rounded-lg bg-muted/40",children:t.posterUrl?e.jsx("img",{src:t.posterUrl,alt:t.title,className:"h-full w-full object-cover",loading:"lazy"}):null}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsxs("div",{className:"flex items-start justify-between gap-2",children:[e.jsx("p",{className:"truncate text-sm font-semibold text-white",children:t.title}),typeof t.ratingStars=="number"?e.jsxs("span",{className:"shrink-0 rounded-full bg-white/10 px-2 py-0.5 text-xs font-semibold text-white",children:[t.ratingStars.toFixed(1),"★"]}):null]}),t.headline?e.jsx("p",{className:"mt-1 line-clamp-1 text-xs text-muted-foreground",children:t.headline}):null,t.body?e.jsx("p",{className:"mt-1 line-clamp-2 text-xs text-muted-foreground",children:t.spoiler?"Spoiler hidden":t.body}):null]})]},t.id))]}):null]}),p?e.jsx("button",{type:"button",onClick:()=>P(!0),className:"fixed bottom-24 right-6 z-50 flex h-14 w-14 items-center justify-center rounded-full bg-primary shadow-lg shadow-primary/40 transition-transform active:scale-95","aria-label":"Create list",children:e.jsx(Oe,{className:"h-7 w-7 text-white"})}):null,e.jsx(Pe,{open:me,onOpenChange:P,children:e.jsxs(Le,{children:[e.jsxs(Me,{children:[e.jsx(Ae,{children:"Create a list"}),e.jsx(Ee,{children:"Start a curated collection you can share later. You can add titles from any title page."})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"create-list-name",className:"text-xs font-medium text-muted-foreground",children:"Name"}),e.jsx(re,{id:"create-list-name",value:Z,onChange:t=>ee(t.target.value),placeholder:"e.g. Cozy Sci‑Fi",className:"mt-1"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"create-list-description",className:"text-xs font-medium text-muted-foreground",children:"Description (optional)"}),e.jsx(re,{id:"create-list-description",value:q,onChange:t=>te(t.target.value),placeholder:"Why this list exists…",className:"mt-1"})]})]}),e.jsxs($e,{children:[e.jsx(b,{type:"button",variant:"secondary",onClick:()=>P(!1),disabled:L.isPending,children:"Cancel"}),e.jsx(b,{type:"button",onClick:()=>L.mutate(),disabled:L.isPending,children:L.isPending?"Creating…":"Create"})]})]})})]})};export{lt as default};
