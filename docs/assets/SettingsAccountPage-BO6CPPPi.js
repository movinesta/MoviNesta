import{c as g,g as j,u as N,R as n,j as e,s as w}from"./index-DLcJPtaT.js";import{T as v}from"./TopBar-fWfwmUrG.js";import{f as k}from"./format-DWLSBLoY.js";import{M as S}from"./mail-DMJF9ru-.js";import{C as M}from"./circle-alert-D3BN2XF-.js";import"./PageChrome-DNNm9VG4.js";import"./brand-DTIDtbc4.js";/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h=g("KeyRound",[["path",{d:"M2.586 17.414A2 2 0 0 0 2 18.828V21a1 1 0 0 0 1 1h3a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h1a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h.172a2 2 0 0 0 1.414-.586l.814-.814a6.5 6.5 0 1 0-4-4z",key:"1s6t7t"}],["circle",{cx:"16.5",cy:"7.5",r:".5",fill:"currentColor",key:"w0ekpg"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R=g("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]),z=()=>{const{user:t,signOut:b}=j(),o=N(),[a,l]=n.useState(!1),[d,s]=n.useState(null),[r,c]=n.useState(!1),[m,x]=n.useState(null),u=t!=null&&t.created_at?new Date(t.created_at):null,f=async()=>{if(!a){l(!0),s(null);try{await b(),o("/auth/signin")}catch(i){s(i.message??"Something went wrong while signing out."),l(!1)}}},y=async()=>{if(!(t!=null&&t.email)||r)return;x(null),s(null),c(!0);const i=`${window.location.origin}/auth/reset-password`,{error:p}=await w.auth.resetPasswordForEmail(t.email,{redirectTo:i});p?s(p.message??"Unable to send reset email right now."):x("Check your inbox for a password reset link. It may take a minute to arrive."),c(!1)};return t?e.jsxs("div",{className:"flex flex-1 flex-col gap-4 pb-2 pt-1",children:[e.jsx(v,{title:"Account",subtitle:"Manage the account you use to sign in to MoviNesta."}),e.jsxs("section",{className:"space-y-4 px-4 pb-24",children:[e.jsxs("div",{className:"space-y-3 rounded-mn-card border border-mn-border-subtle/80 bg-mn-bg-elevated/80 p-4 shadow-mn-card",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("span",{className:"inline-flex h-8 w-8 items-center justify-center rounded-full bg-mn-border-subtle/50",children:e.jsx(S,{className:"h-4 w-4 text-mn-text-secondary","aria-hidden":"true"})}),e.jsxs("div",{className:"space-y-0.5",children:[e.jsx("h2",{className:"text-sm font-heading font-semibold text-mn-text-primary",children:"Email"}),e.jsx("p",{className:"text-[11px] text-mn-text-secondary",children:"This is the email you use to sign in."})]})]}),e.jsxs("div",{className:"rounded-md border border-dashed border-mn-border-subtle/70 bg-mn-bg/40 px-3 py-2 text-[11px] text-mn-text-secondary",children:[e.jsxs("div",{className:"flex items-center justify-between gap-3",children:[e.jsx("span",{className:"font-mono text-xs text-mn-text-primary",children:t.email??"No email on file"}),e.jsx("span",{className:"rounded-full bg-mn-bg px-2 py-0.5 text-[10px] uppercase tracking-[0.18em] text-mn-text-muted",children:"Primary"})]}),u&&e.jsxs("p",{className:"mt-1 text-[10px] text-mn-text-muted",children:["Joined on"," ",k(u,{year:"numeric",month:"short",day:"2-digit"})]})]})]}),e.jsxs("div",{className:"space-y-3 rounded-mn-card border border-mn-border-subtle/80 bg-mn-bg-elevated/80 p-4 shadow-mn-card",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("span",{className:"inline-flex h-8 w-8 items-center justify-center rounded-full bg-mn-border-subtle/50",children:e.jsx(h,{className:"h-4 w-4 text-mn-text-secondary","aria-hidden":"true"})}),e.jsxs("div",{className:"space-y-0.5",children:[e.jsx("h2",{className:"text-sm font-heading font-semibold text-mn-text-primary",children:"Password & security"}),e.jsx("p",{className:"text-[11px] text-mn-text-secondary",children:"Send yourself a reset link to change your MoviNesta password."})]})]}),e.jsxs("div",{className:"flex flex-col gap-2 rounded-md border border-mn-border-subtle/70 bg-mn-bg/60 px-3 py-2",children:[e.jsxs("p",{className:"text-[11px] text-mn-text-secondary",children:["We'll email a secure link to ",e.jsx("span",{className:"font-mono",children:t.email}),e.jsx("br",{}),"so you can choose a new password."]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsxs("button",{type:"button",onClick:y,disabled:r,className:"inline-flex items-center gap-1.5 rounded-full bg-mn-text-primary px-3 py-1.5 text-xs font-semibold text-mn-bg transition hover:bg-mn-text-primary/90 focus:outline-none focus:ring-2 focus:ring-mn-text-primary/30 disabled:opacity-70",children:[e.jsx(h,{className:"h-3.5 w-3.5","aria-hidden":"true"}),e.jsx("span",{children:r?"Sending link…":"Send reset link"})]}),e.jsx("button",{type:"button",onClick:()=>o("/auth/forgot-password",{state:{email:t.email}}),className:"text-[11px] font-medium text-mn-text-secondary underline-offset-4 transition hover:text-mn-text-primary hover:underline focus:outline-none focus:ring-2 focus:ring-mn-text-primary/30",children:"Open reset page"})]}),m&&e.jsxs("p",{className:"flex items-center gap-1.5 text-[11px] text-mn-success",children:[e.jsx("span",{"aria-hidden":"true",children:"•"}),e.jsx("span",{children:m})]})]})]}),e.jsxs("div",{className:"space-y-2 rounded-mn-card border border-mn-border-subtle/80 bg-mn-bg-elevated/80 p-4 shadow-mn-card",children:[e.jsxs("div",{className:"flex items-center justify-between gap-3",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx("h2",{className:"text-sm font-heading font-semibold text-mn-text-primary",children:"Sign out"}),e.jsx("p",{className:"text-[11px] text-mn-text-secondary",children:"You'll need to sign in again to use MoviNesta on this device."})]}),e.jsxs("button",{type:"button",onClick:f,disabled:a,className:"inline-flex items-center gap-1.5 rounded-full border border-mn-border-subtle/80 px-3 py-1.5 text-xs font-medium text-mn-text-secondary transition hover:border-mn-error/70 hover:bg-mn-error/10 hover:text-mn-error disabled:opacity-70",children:[e.jsx(R,{className:"h-3.5 w-3.5","aria-hidden":"true"}),e.jsx("span",{children:a?"Signing out…":"Sign out"})]})]}),d&&e.jsxs("p",{className:"mt-1 flex items-center gap-1.5 text-[11px] text-mn-error",children:[e.jsx(M,{className:"h-3.5 w-3.5","aria-hidden":"true"}),e.jsx("span",{children:d})]})]})]})]}):e.jsx("div",{className:"flex flex-1 flex-col items-center justify-center px-4",children:e.jsxs("div",{className:"max-w-md rounded-mn-card border border-mn-border-subtle/80 bg-mn-bg-elevated/80 px-4 py-6 text-center text-sm text-mn-text-primary shadow-mn-card",children:[e.jsx("h1",{className:"text-base font-heading font-semibold",children:"You're signed out"}),e.jsx("p",{className:"mt-2 text-xs text-mn-text-secondary",children:"Sign in to view and manage your account."})]})})};export{z as default};
