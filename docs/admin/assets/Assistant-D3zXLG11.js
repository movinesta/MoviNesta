import{r as O,j as e,L as H,f,B as M,y as ke,z as ze,A as Se,C as Ce}from"./index-RmnKeFJ0.js";import{u as G,E as V}from"./ErrorBox-CT9uctWi.js";import{u as Me}from"./useMutation-BNYkbyWO.js";import{S as T,R as me,X as xe,Y as ue,T as he,B as Z}from"./generateCategoricalChart-CBcHhIqz.js";import{C as z}from"./Card-BlxKcLs_.js";import{T as L,a as d,b as m}from"./Table-CrgI8WuL.js";import{E as Oe}from"./EmptyState-Cd3UWduY.js";import{B as Te}from"./BarChart-CQHnCUN6.js";import{L as Ae,a as Fe}from"./LineChart-DTW0VBKU.js";function Je(n){return e.jsx("div",{className:"mb-4 text-xl font-semibold tracking-tight",children:n.children})}function pe(n){return isFinite(n)?`${Math.round(n*100)}%`:"0%"}const ee=[{key:"temperature",label:"Temperature",type:"number",min:0,max:2,step:.05},{key:"top_p",label:"Top P",type:"number",min:0,max:1,step:.05},{key:"max_output_tokens",label:"Max output tokens",type:"number",min:1,max:32768,step:1},{key:"presence_penalty",label:"Presence penalty",type:"number",min:-2,max:2,step:.1},{key:"frequency_penalty",label:"Frequency penalty",type:"number",min:-2,max:2,step:.1},{key:"seed",label:"Seed",type:"number",min:0,max:2e9,step:1},{key:"stop",label:"Stop sequences",type:"string-array"},{key:"logprobs",label:"Logprobs",type:"boolean"},{key:"top_logprobs",label:"Top logprobs",type:"number",min:0,max:20,step:1},{key:"parallel_tool_calls",label:"Parallel tool calls",type:"boolean"},{key:"stream",label:"Stream",type:"boolean"},{key:"timeout_ms",label:"Timeout (ms)",type:"number",min:1e3,max:12e4,step:1e3},{key:"user",label:"User",type:"text"},{key:"metadata",label:"Metadata (JSON)",type:"json"},{key:"tools",label:"Tools (JSON)",type:"json"},{key:"tool_choice",label:"Tool choice (JSON)",type:"json"},{key:"response_format",label:"Response format (JSON)",type:"json"},{key:"plugins",label:"Plugins (JSON)",type:"json"}],be=n=>n.split(`
`).map(h=>h.trim()).filter(Boolean);function ge(n){return!!n&&typeof n=="object"&&!Array.isArray(n)}function D(n){return n===void 0?n:JSON.parse(JSON.stringify(n))}function c(n,h,S){let N=n;for(const J of h){if(!N||typeof N!="object")return S;N=N[J]}return N===void 0?S:N}function v(n,h,S){let N=n;for(let J=0;J<h.length-1;J++){const A=h[J];(!N[A]||typeof N[A]!="object")&&(N[A]={}),N=N[A]}N[h[h.length-1]]=S}function W(n){if(n===null)return"null";if(n===void 0)return"undefined";if(typeof n=="string")return n.length>120?`${n.slice(0,117)}…`:n;if(typeof n=="number"||typeof n=="boolean")return String(n);try{const h=JSON.stringify(n);return h.length>200?`${h.slice(0,197)}…`:h}catch{return String(n)}}function te(n,h,S=""){if(n===h)return[];const N=ge(n),J=ge(h);if(N&&J){const A=Array.from(new Set([...Object.keys(n),...Object.keys(h)])).sort(),i=[];for(const j of A){const q=S?`${S}.${j}`:j;i.push(...te(n[j],h[j],q))}return i}if(Array.isArray(n)&&Array.isArray(h)){const A=JSON.stringify(n),i=JSON.stringify(h);return A===i?[]:[{path:S||"(root)",a:n,b:h}]}return[{path:S||"(root)",a:n,b:h}]}function Ye(){var ne;const[n,h]=O.useState("metrics"),[S,N]=O.useState(14),[J,A]=O.useState(!1),[i,j]=O.useState(null),[q,$]=O.useState(null),[se,je]=O.useState(!1),[re,fe]=O.useState(!1),R=G({queryKey:["assistant-metrics",S],queryFn:()=>ze({days:S}),enabled:n==="metrics"}),K=G({queryKey:["assistant-health"],queryFn:()=>Se(),enabled:n==="diagnostics",refetchInterval:15e3}),E=G({queryKey:["assistant-settings"],queryFn:()=>Ce(),enabled:n==="settings"}),Y=Me({mutationFn:p=>ke(p),onSuccess:()=>{A(!1),E.refetch()}}),u=R.data,Ne=O.useMemo(()=>((u==null?void 0:u.series)??[]).map(p=>({...p,day:String(p.day).slice(5)})),[u]),ye=O.useMemo(()=>((u==null?void 0:u.trigger_series)??[]).map(p=>({...p,day:String(p.day).slice(5)})),[u]),ve=(u==null?void 0:u.by_surface_kind)??[],_e=(u==null?void 0:u.triggers)??[],l=K.data,P=E.data,o=P==null?void 0:P.assistant_settings,_=(ne=P==null?void 0:P.defaults)==null?void 0:ne.settings,x=(_==null?void 0:_.behavior)??{},g=O.useMemo(()=>{const p=((i==null?void 0:i.behavior_json)??"").trim();if(!p)return{ok:!0,value:D(x)};try{return{ok:!0,value:JSON.parse(p)}}catch(b){return{ok:!1,value:D(x),error:String((b==null?void 0:b.message)??b)}}},[i==null?void 0:i.behavior_json,x]),y=p=>{j(b=>{if(!b)return b;const w=(b.behavior_json??"").trim();let k;try{k=w?JSON.parse(w):D(x)}catch{return b}const F=D(k);return p(F),{...b,behavior_json:JSON.stringify(F,null,2)}})},Q=O.useMemo(()=>te(x??{},g.value??{}),[x,g.value]),U=O.useMemo(()=>{const p={rate_limit:(x??{}).rate_limit,orchestrator:(x??{}).orchestrator,router:(x??{}).router},b={rate_limit:(g.value??{}).rate_limit,orchestrator:(g.value??{}).orchestrator,router:(g.value??{}).router};return te(p,b)},[x,g.value]);O.useEffect(()=>{if(!o||J)return;const p=w=>{var F,I;const k=((F=o==null?void 0:o.params)==null?void 0:F[w])??((I=_==null?void 0:_.params)==null?void 0:I[w]);return k==null?"":Array.isArray(k)?k.join(`
`):typeof k=="object"?JSON.stringify(k,null,2):String(k)},b={};ee.forEach(w=>{b[w.key]=p(w.key)}),j({openrouter_base_url:(o==null?void 0:o.openrouter_base_url)??"",model_fast:(o==null?void 0:o.model_fast)??"",model_creative:(o==null?void 0:o.model_creative)??"",model_planner:(o==null?void 0:o.model_planner)??"",model_maker:(o==null?void 0:o.model_maker)??"",model_critic:(o==null?void 0:o.model_critic)??"",fallback_models:(o==null?void 0:o.fallback_models)??[],model_catalog:(o==null?void 0:o.model_catalog)??(_==null?void 0:_.model_catalog)??[],default_instructions:(o==null?void 0:o.default_instructions)??"",behavior_json:JSON.stringify((o==null?void 0:o.behavior)??(_==null?void 0:_.behavior)??{},null,2),params:b}),A(!0)},[o,_,J]);function ae(p){const b=Math.max(0,Math.floor(Number(p)||0)),w=Math.floor(b/60),k=b%60;if(w<=0)return`${k}s`;const F=Math.floor(w/60),I=w%60;return F<=0?`${w}m ${k}s`:`${F}h ${I}m`}function X(p){if(!p)return"";const b=new Date(p);return isFinite(b.getTime())?b.toISOString().replace("T"," ").slice(0,16):String(p)}const we=(()=>{var p,b,w,k,F,I,le,ie,oe,ce,de;return n==="metrics"?R.isLoading?e.jsx(H,{}):R.isError?e.jsx(V,{error:R.error}):u?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-1 gap-3 md:grid-cols-4",children:[e.jsx(T,{title:"Suggestions (created)",value:f(((p=u==null?void 0:u.totals)==null?void 0:p.created)??0)}),e.jsx(T,{title:"Accepted",value:f(((b=u==null?void 0:u.totals)==null?void 0:b.accepted)??0)}),e.jsx(T,{title:"Accept rate",value:pe(Number(((w=u==null?void 0:u.totals)==null?void 0:w.acceptRate)??0))}),e.jsx(T,{title:"Tokens (est.)",value:f(((k=u==null?void 0:u.totals)==null?void 0:k.tokens)??0)})]}),e.jsxs("div",{className:"mt-6 grid grid-cols-1 gap-4 lg:grid-cols-2",children:[e.jsxs(z,{children:[e.jsx("div",{className:"mb-2 text-sm font-semibold",children:"Suggestions over time"}),e.jsx("div",{className:"h-72",children:e.jsx(me,{width:"100%",height:"100%",children:e.jsxs(Te,{data:Ne,children:[e.jsx(xe,{dataKey:"day"}),e.jsx(ue,{}),e.jsx(he,{}),e.jsx(Z,{dataKey:"created"}),e.jsx(Z,{dataKey:"accepted"}),e.jsx(Z,{dataKey:"dismissed"})]})})}),e.jsxs("div",{className:"mt-2 text-xs text-zinc-500",children:["If this chart stays empty, run the rollup once: call edge function ",e.jsx("code",{children:"assistant-metrics-rollup"}),"."]})]}),e.jsxs(z,{children:[e.jsx("div",{className:"mb-2 text-sm font-semibold",children:"Trigger fires over time"}),e.jsx("div",{className:"h-72",children:e.jsx(me,{width:"100%",height:"100%",children:e.jsxs(Ae,{data:ye,children:[e.jsx(xe,{dataKey:"day"}),e.jsx(ue,{}),e.jsx(he,{}),e.jsx(Fe,{dataKey:"fires"})]})})}),e.jsx("div",{className:"mt-2 text-xs text-zinc-500",children:"Top triggers are shown below."})]})]}),e.jsxs("div",{className:"mt-6 grid grid-cols-1 gap-4 lg:grid-cols-2",children:[e.jsxs(z,{children:[e.jsx("div",{className:"mb-2 text-sm font-semibold",children:"By surface + kind"}),e.jsxs(L,{children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx(d,{children:"Day"}),e.jsx(d,{children:"Surface"}),e.jsx(d,{children:"Kind"}),e.jsx(d,{className:"text-right",children:"Created"}),e.jsx(d,{className:"text-right",children:"Accepted"}),e.jsx(d,{className:"text-right",children:"Dismissed"}),e.jsx(d,{className:"text-right",children:"Rate"})]})}),e.jsx("tbody",{children:ve.slice(0,150).map((t,r)=>{const a=Number(t.created_count??0),s=Number(t.accepted_count??0),C=a?s/a:0;return e.jsxs("tr",{className:"border-t border-zinc-100",children:[e.jsx(m,{children:String(t.day).slice(5)}),e.jsx(m,{children:t.surface}),e.jsx(m,{children:t.kind}),e.jsx(m,{className:"text-right",children:f(a)}),e.jsx(m,{className:"text-right",children:f(s)}),e.jsx(m,{className:"text-right",children:f(Number(t.dismissed_count??0))}),e.jsx(m,{className:"text-right",children:pe(C)})]},r)})})]})]}),e.jsxs(z,{children:[e.jsx("div",{className:"mb-2 text-sm font-semibold",children:"Top triggers"}),e.jsxs(L,{children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx(d,{children:"Trigger"}),e.jsx(d,{className:"text-right",children:"Fires"}),e.jsx(d,{className:"text-right",children:"Users"})]})}),e.jsx("tbody",{children:_e.map((t,r)=>e.jsxs("tr",{className:"border-t border-zinc-100",children:[e.jsx(m,{children:t.name}),e.jsx(m,{className:"text-right",children:f(Number(t.fires??0))}),e.jsx(m,{className:"text-right",children:f(Number(t.unique_users??0))})]},r))})]}),e.jsxs("div",{className:"mt-3 text-xs text-zinc-500",children:["Tip: You can disable noisy triggers by setting ",e.jsx("code",{children:"assistant_triggers.enabled = false"}),"."]})]})]})]}):e.jsx(Oe,{title:"No metrics yet",message:"No assistant metrics were returned."}):n==="diagnostics"?K.isLoading?e.jsx(H,{}):K.isError?e.jsx(V,{error:R.error}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"mt-2 text-xs text-zinc-500",children:["Snapshot: ",X(l==null?void 0:l.ts)]}),e.jsxs("div",{className:"mt-4 grid grid-cols-1 gap-3 md:grid-cols-4",children:[e.jsx(T,{title:"Pending",value:f(Number(((F=l==null?void 0:l.counts)==null?void 0:F.pending)??0))}),e.jsx(T,{title:"Processing",value:f(Number(((I=l==null?void 0:l.counts)==null?void 0:I.processing)??0))}),e.jsx(T,{title:"Failed",value:f(Number(((le=l==null?void 0:l.counts)==null?void 0:le.failed)??0))}),e.jsx(T,{title:"Done",value:f(Number(((ie=l==null?void 0:l.counts)==null?void 0:ie.done)??0))})]}),e.jsxs("div",{className:"mt-6 grid grid-cols-1 gap-4 lg:grid-cols-2",children:[e.jsxs(z,{children:[e.jsx("div",{className:"mb-2 text-sm font-semibold",children:"Queue age"}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsx(T,{title:"Oldest pending",value:ae(Number((l==null?void 0:l.oldestPendingSec)??0))}),e.jsx(T,{title:"Oldest processing",value:ae(Number((l==null?void 0:l.oldestProcessingSec)??0))})]}),e.jsx("div",{className:"mt-2 text-xs text-zinc-500",children:"If queue age keeps growing, check runner health and rate limits."})]}),e.jsxs(z,{children:[e.jsx("div",{className:"mb-2 text-sm font-semibold",children:"Last 24h"}),e.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[e.jsx(T,{title:"Created",value:f(Number(((oe=l==null?void 0:l.last24h)==null?void 0:oe.created)??0))}),e.jsx(T,{title:"Done",value:f(Number(((ce=l==null?void 0:l.last24h)==null?void 0:ce.done)??0))}),e.jsx(T,{title:"Failed",value:f(Number(((de=l==null?void 0:l.last24h)==null?void 0:de.failed)??0))})]})]})]}),e.jsxs("div",{className:"mt-6 grid grid-cols-1 gap-4 lg:grid-cols-2",children:[e.jsxs(z,{children:[e.jsx("div",{className:"mb-2 text-sm font-semibold",children:"Jobs by kind"}),e.jsxs(L,{children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx(d,{children:"Kind"}),e.jsx(d,{className:"text-right",children:"Pending"}),e.jsx(d,{className:"text-right",children:"Processing"}),e.jsx(d,{className:"text-right",children:"Failed"}),e.jsx(d,{className:"text-right",children:"Done"}),e.jsx(d,{className:"text-right",children:"Total"})]})}),e.jsx("tbody",{children:Object.entries((l==null?void 0:l.byKind)??{}).map(([t,r])=>e.jsxs("tr",{className:"border-t border-zinc-100",children:[e.jsx(m,{children:t}),e.jsx(m,{className:"text-right",children:f(Number((r==null?void 0:r.pending)??0))}),e.jsx(m,{className:"text-right",children:f(Number((r==null?void 0:r.processing)??0))}),e.jsx(m,{className:"text-right",children:f(Number((r==null?void 0:r.failed)??0))}),e.jsx(m,{className:"text-right",children:f(Number((r==null?void 0:r.done)??0))}),e.jsx(m,{className:"text-right",children:f(Number((r==null?void 0:r.total)??0))})]},t))})]})]}),e.jsxs(z,{children:[e.jsx("div",{className:"mb-2 text-sm font-semibold",children:"Recent cron invocations"}),e.jsxs(L,{children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx(d,{children:"When"}),e.jsx(d,{children:"Job"}),e.jsx(d,{children:"Request ID"})]})}),e.jsx("tbody",{children:((l==null?void 0:l.recentCron)??[]).map(t=>e.jsxs("tr",{className:"border-t border-zinc-100",children:[e.jsx(m,{children:X(t.createdAt)}),e.jsx(m,{children:t.job}),e.jsx(m,{className:"font-mono text-xs",children:t.requestId??""})]},t.id))})]})]})]}),e.jsx("div",{className:"mt-6",children:e.jsxs(z,{children:[e.jsx("div",{className:"mb-2 text-sm font-semibold",children:"Recent failures"}),e.jsxs(L,{children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx(d,{children:"When"}),e.jsx(d,{children:"Kind"}),e.jsx(d,{children:"Conversation"}),e.jsx(d,{className:"text-right",children:"Attempts"}),e.jsx(d,{children:"Error"})]})}),e.jsx("tbody",{children:((l==null?void 0:l.recentFailures)??[]).map(t=>e.jsxs("tr",{className:"border-t border-zinc-100",children:[e.jsx(m,{children:X(t.updatedAt)}),e.jsx(m,{children:t.jobKind}),e.jsx(m,{className:"font-mono text-xs",children:t.conversationId}),e.jsx(m,{className:"text-right",children:f(Number(t.attempts??0))}),e.jsx(m,{className:"max-w-[520px] truncate",title:t.lastError,children:t.lastError})]},t.id))})]}),((l==null?void 0:l.recentFailures)??[]).length===0?e.jsx("div",{className:"mt-2 text-xs text-zinc-500",children:"No recent failures."}):null]})})]}):e.jsx("div",{className:"mt-4",children:E.isLoading||!i?e.jsx(H,{}):E.isError?e.jsx(V,{error:E.error}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-1 gap-4 lg:grid-cols-2",children:[e.jsxs(z,{children:[e.jsx("div",{className:"mb-2 text-sm font-semibold",children:"OpenRouter base URL"}),e.jsx("input",{value:i.openrouter_base_url,onChange:t=>j(r=>r&&{...r,openrouter_base_url:t.target.value}),placeholder:"https://openrouter.ai/api/v1",className:"w-full rounded-lg border border-zinc-200 px-3 py-2 text-sm"}),e.jsx("div",{className:"mt-2 text-xs text-zinc-500",children:"Leave blank to use the environment default."})]}),e.jsxs(z,{children:[e.jsx("div",{className:"mb-2 text-sm font-semibold",children:"Default instructions"}),e.jsx("textarea",{value:i.default_instructions,onChange:t=>j(r=>r&&{...r,default_instructions:t.target.value}),placeholder:"Optional system instructions applied to every call.",className:"h-28 w-full rounded-lg border border-zinc-200 px-3 py-2 text-sm"})]})]}),e.jsxs("div",{className:"mt-6 grid grid-cols-1 gap-4 lg:grid-cols-2",children:[e.jsxs(z,{children:[e.jsx("div",{className:"mb-2 text-sm font-semibold",children:"Models (primary)"}),e.jsx("div",{className:"grid grid-cols-1 gap-3 md:grid-cols-2",children:[{key:"model_fast",label:"Fast"},{key:"model_creative",label:"Creative"},{key:"model_planner",label:"Planner"},{key:"model_maker",label:"Maker"},{key:"model_critic",label:"Critic"}].map(t=>{const r=Array.from(new Set([...i.model_catalog??[],i[t.key]].filter(Boolean)));return e.jsxs("label",{className:"flex flex-col gap-1 text-sm",children:[e.jsx("span",{className:"text-xs font-semibold text-zinc-600",children:t.label}),e.jsxs("select",{value:i[t.key]??"",onChange:a=>j(s=>s&&{...s,[t.key]:a.target.value}),className:"rounded-lg border border-zinc-200 px-3 py-2 text-sm",children:[e.jsx("option",{value:"",children:"—"}),r.map(a=>e.jsx("option",{value:a,children:a},a))]})]},t.key)})})]}),e.jsxs(z,{children:[e.jsx("div",{className:"mb-2 text-sm font-semibold",children:"Fallback models"}),e.jsx("div",{className:"grid grid-cols-1 gap-2 text-sm",children:Array.from(new Set([...i.model_catalog??[],...i.fallback_models??[]])).map(t=>{const r=i.fallback_models.includes(t);return e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:r,onChange:a=>j(s=>s&&{...s,fallback_models:a.target.checked?Array.from(new Set([...s.fallback_models,t])):s.fallback_models.filter(C=>C!==t)})}),e.jsx("span",{className:"text-xs text-zinc-700",children:t})]},t)})}),e.jsx("div",{className:"mt-2 text-xs text-zinc-500",children:"These are used when the primary models fail."})]})]}),e.jsx("div",{className:"mt-6",children:e.jsxs(z,{children:[e.jsx("div",{className:"mb-2 text-sm font-semibold",children:"Model catalog"}),e.jsx("textarea",{value:(i.model_catalog??[]).join(`
`),onChange:t=>j(r=>r&&{...r,model_catalog:be(t.target.value)}),placeholder:"One model per line",className:"h-40 w-full rounded-lg border border-zinc-200 px-3 py-2 text-sm font-mono"}),e.jsx("div",{className:"mt-2 text-xs text-zinc-500",children:"This list powers the dropdowns and fallback checkboxes."})]})}),e.jsx("div",{className:"mt-6",children:e.jsxs(z,{children:[e.jsx("div",{className:"mb-2 text-sm font-semibold",children:"Assistant behavior (prompts & chunking)"}),e.jsxs("div",{className:"mb-2 text-xs text-zinc-500",children:["Stored in ",e.jsx("span",{className:"font-mono",children:"assistant_settings.behavior"}),". Supports placeholders:",e.jsx("span",{className:"ml-1 font-mono",children:"{{name}}"}),", ",e.jsx("span",{className:"font-mono",children:"{{bioLine}}"}),",",e.jsx("span",{className:"font-mono",children:"{{toolProtocol}}"}),"."]}),g.ok?e.jsxs("div",{className:"mb-3 rounded-lg border border-zinc-200 bg-zinc-50 px-3 py-3",children:[e.jsxs("div",{className:"mb-2 flex flex-wrap items-center justify-between gap-2",children:[e.jsx("div",{className:"text-xs font-semibold text-zinc-700",children:"Behavior controls (safe knobs)"}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsx(M,{variant:"secondary",type:"button",className:"rounded-lg border border-zinc-200 bg-white px-3 py-2 text-xs",onClick:()=>y(t=>{t.rate_limit=D((x??{}).rate_limit),t.orchestrator=D((x??{}).orchestrator),v(t,["router","attribution"],D(c(x??{},["router","attribution"],{})))}),children:"Reset proactivity controls"}),e.jsxs(M,{variant:"secondary",type:"button",className:"rounded-lg border border-zinc-200 bg-white px-3 py-2 text-xs",onClick:()=>fe(t=>!t),children:[re?"Hide":"Show"," proactivity diff"]}),e.jsxs(M,{variant:"secondary",type:"button",className:"rounded-lg border border-zinc-200 bg-white px-3 py-2 text-xs",onClick:()=>je(t=>!t),children:[se?"Hide":"Show"," full diff"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2",children:[e.jsxs("div",{className:"rounded-lg border border-zinc-200 bg-white p-3",children:[e.jsx("div",{className:"mb-2 text-[11px] font-semibold text-zinc-600",children:"OpenRouter attribution"}),e.jsxs("label",{className:"flex flex-col gap-1",children:[e.jsx("span",{className:"text-[11px] text-zinc-500",children:"HTTP-Referer"}),e.jsx("input",{type:"text",value:String(c(g.value,["router","attribution","http_referer"],"")),onChange:t=>y(r=>v(r,["router","attribution","http_referer"],t.target.value)),className:"rounded-lg border border-zinc-200 px-3 py-2 text-sm",placeholder:String(c(x,["router","attribution","http_referer"],""))})]}),e.jsxs("label",{className:"mt-2 flex flex-col gap-1",children:[e.jsx("span",{className:"text-[11px] text-zinc-500",children:"X-Title"}),e.jsx("input",{type:"text",value:String(c(g.value,["router","attribution","x_title"],"")),onChange:t=>y(r=>v(r,["router","attribution","x_title"],t.target.value)),className:"rounded-lg border border-zinc-200 px-3 py-2 text-sm",placeholder:String(c(x,["router","attribution","x_title"],""))})]})]}),e.jsxs("div",{className:"rounded-lg border border-zinc-200 bg-white p-3",children:[e.jsx("div",{className:"mb-2 text-[11px] font-semibold text-zinc-600",children:"Chat reply rate limit"}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("label",{className:"flex flex-col gap-1",children:[e.jsx("span",{className:"text-[11px] text-zinc-500",children:"Limit"}),e.jsx("input",{type:"number",min:1,max:100,step:1,value:String(c(g.value,["rate_limit","chat_reply","limit"],"")),onChange:t=>{const r=t.target.value;y(a=>{const s=r===""?void 0:Math.max(1,Math.min(100,Number(r)));v(a,["rate_limit","chat_reply","limit"],isFinite(Number(s))?s:void 0)})},className:"rounded-lg border border-zinc-200 px-3 py-2 text-sm",placeholder:String(c(x,["rate_limit","chat_reply","limit"],6))})]}),e.jsxs("label",{className:"flex flex-col gap-1",children:[e.jsx("span",{className:"text-[11px] text-zinc-500",children:"Window (seconds)"}),e.jsx("input",{type:"number",min:5,max:3600,step:1,value:String(c(g.value,["rate_limit","chat_reply","window_seconds"],"")),onChange:t=>{const r=t.target.value;y(a=>{const s=r===""?void 0:Math.max(5,Math.min(3600,Number(r)));v(a,["rate_limit","chat_reply","window_seconds"],isFinite(Number(s))?s:void 0)})},className:"rounded-lg border border-zinc-200 px-3 py-2 text-sm",placeholder:String(c(x,["rate_limit","chat_reply","window_seconds"],60))})]})]}),e.jsxs("div",{className:"mt-2 text-[11px] text-zinc-500",children:["Stored at ",e.jsx("span",{className:"font-mono",children:"behavior.rate_limit.chat_reply"}),"."]})]})]}),e.jsxs("div",{className:"mt-4 rounded-lg border border-zinc-200 bg-white p-3",children:[e.jsx("div",{className:"mb-2 text-[11px] font-semibold text-zinc-600",children:"Orchestrator (proactive suggestions)"}),e.jsxs("div",{className:"grid grid-cols-1 gap-3 md:grid-cols-4",children:[e.jsxs("label",{className:"flex flex-col gap-1",children:[e.jsx("span",{className:"text-[11px] text-zinc-500",children:"Default verbosity"}),e.jsx("input",{type:"number",min:.1,max:.9,step:.05,value:String(c(g.value,["orchestrator","default_verbosity"],"")),onChange:t=>{const r=t.target.value;y(a=>{const s=r===""?void 0:Math.max(.1,Math.min(.9,Number(r)));v(a,["orchestrator","default_verbosity"],isFinite(Number(s))?s:void 0)})},className:"rounded-lg border border-zinc-200 px-3 py-2 text-sm",placeholder:String(c(x,["orchestrator","default_verbosity"],.45))})]}),e.jsxs("label",{className:"flex flex-col gap-1",children:[e.jsx("span",{className:"text-[11px] text-zinc-500",children:"Default suggestions limit"}),e.jsx("input",{type:"number",min:1,max:6,step:1,value:String(c(g.value,["orchestrator","default_suggestions_limit"],"")),onChange:t=>{const r=t.target.value;y(a=>{const s=r===""?void 0:Math.max(1,Math.min(6,Number(r)));v(a,["orchestrator","default_suggestions_limit"],isFinite(Number(s))?s:void 0)})},className:"rounded-lg border border-zinc-200 px-3 py-2 text-sm",placeholder:String(c(x,["orchestrator","default_suggestions_limit"],3))})]}),e.jsxs("label",{className:"flex flex-col gap-1",children:[e.jsx("span",{className:"text-[11px] text-zinc-500",children:"Max suggestions limit"}),e.jsx("input",{type:"number",min:1,max:6,step:1,value:String(c(g.value,["orchestrator","max_suggestions_limit"],"")),onChange:t=>{const r=t.target.value;y(a=>{const s=r===""?void 0:Math.max(1,Math.min(6,Number(r)));v(a,["orchestrator","max_suggestions_limit"],isFinite(Number(s))?s:void 0)})},className:"rounded-lg border border-zinc-200 px-3 py-2 text-sm",placeholder:String(c(x,["orchestrator","max_suggestions_limit"],6))})]}),e.jsxs("label",{className:"flex flex-col gap-1",children:[e.jsx("span",{className:"text-[11px] text-zinc-500",children:"Daily cap (level2)"}),e.jsx("input",{type:"number",min:0,max:200,step:1,value:String(c(g.value,["orchestrator","daily_cap","level2"],"")),onChange:t=>{const r=t.target.value;y(a=>{const s=r===""?void 0:Math.max(0,Math.min(200,Number(r)));v(a,["orchestrator","daily_cap","level2"],isFinite(Number(s))?s:void 0)})},className:"rounded-lg border border-zinc-200 px-3 py-2 text-sm",placeholder:String(c(x,["orchestrator","daily_cap","level2"],20))})]}),e.jsxs("label",{className:"flex flex-col gap-1",children:[e.jsx("span",{className:"text-[11px] text-zinc-500",children:"Daily cap (level1)"}),e.jsx("input",{type:"number",min:0,max:200,step:1,value:String(c(g.value,["orchestrator","daily_cap","level1"],"")),onChange:t=>{const r=t.target.value;y(a=>{const s=r===""?void 0:Math.max(0,Math.min(200,Number(r)));v(a,["orchestrator","daily_cap","level1"],isFinite(Number(s))?s:void 0)})},className:"rounded-lg border border-zinc-200 px-3 py-2 text-sm",placeholder:String(c(x,["orchestrator","daily_cap","level1"],12))})]}),e.jsxs("label",{className:"flex flex-col gap-1",children:[e.jsx("span",{className:"text-[11px] text-zinc-500",children:"Daily cap (level0)"}),e.jsx("input",{type:"number",min:0,max:200,step:1,value:String(c(g.value,["orchestrator","daily_cap","level0"],"")),onChange:t=>{const r=t.target.value;y(a=>{const s=r===""?void 0:Math.max(0,Math.min(200,Number(r)));v(a,["orchestrator","daily_cap","level0"],isFinite(Number(s))?s:void 0)})},className:"rounded-lg border border-zinc-200 px-3 py-2 text-sm",placeholder:String(c(x,["orchestrator","daily_cap","level0"],0))})]})]}),e.jsx("div",{className:"mt-4 grid grid-cols-2 gap-3 md:grid-cols-4",children:["home","swipe","messages","search","title","diary","default"].map(t=>e.jsxs("label",{className:"flex flex-col gap-1",children:[e.jsxs("span",{className:"text-[11px] text-zinc-500",children:["TTL ",t," (min)"]}),e.jsx("input",{type:"number",min:1,max:1440,step:1,value:String(c(g.value,["orchestrator","ttl_minutes",t],"")),onChange:r=>{const a=r.target.value;y(s=>{const C=a===""?void 0:Math.max(1,Math.min(1440,Number(a)));v(s,["orchestrator","ttl_minutes",t],isFinite(Number(C))?C:void 0)})},className:"rounded-lg border border-zinc-200 px-3 py-2 text-sm",placeholder:String(c(x,["orchestrator","ttl_minutes",t],""))})]},t))}),e.jsxs("div",{className:"mt-4 rounded-lg border border-zinc-200 bg-zinc-50 p-3",children:[e.jsx("div",{className:"mb-2 text-[11px] font-semibold text-zinc-600",children:"Dismiss cooldown (minutes)"}),e.jsxs("div",{className:"grid grid-cols-1 gap-3 md:grid-cols-3",children:[e.jsxs("div",{className:"rounded-lg border border-zinc-200 bg-white p-3",children:[e.jsx("div",{className:"mb-2 text-[11px] font-semibold text-zinc-600",children:"Level 2"}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("label",{className:"flex flex-col gap-1",children:[e.jsx("span",{className:"text-[11px] text-zinc-500",children:"swipe"}),e.jsx("input",{type:"number",min:0,max:240,step:1,value:String(c(g.value,["orchestrator","cooldown_minutes","level2","swipe"],"")),onChange:t=>{const r=t.target.value;y(a=>{const s=r===""?void 0:Math.max(0,Math.min(240,Number(r)));v(a,["orchestrator","cooldown_minutes","level2","swipe"],isFinite(Number(s))?s:void 0)})},className:"rounded-lg border border-zinc-200 px-3 py-2 text-sm",placeholder:String(c(x,["orchestrator","cooldown_minutes","level2","swipe"],""))})]}),e.jsxs("label",{className:"flex flex-col gap-1",children:[e.jsx("span",{className:"text-[11px] text-zinc-500",children:"default"}),e.jsx("input",{type:"number",min:0,max:240,step:1,value:String(c(g.value,["orchestrator","cooldown_minutes","level2","default"],"")),onChange:t=>{const r=t.target.value;y(a=>{const s=r===""?void 0:Math.max(0,Math.min(240,Number(r)));v(a,["orchestrator","cooldown_minutes","level2","default"],isFinite(Number(s))?s:void 0)})},className:"rounded-lg border border-zinc-200 px-3 py-2 text-sm",placeholder:String(c(x,["orchestrator","cooldown_minutes","level2","default"],""))})]})]})]}),e.jsxs("div",{className:"rounded-lg border border-zinc-200 bg-white p-3",children:[e.jsx("div",{className:"mb-2 text-[11px] font-semibold text-zinc-600",children:"Level 1"}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("label",{className:"flex flex-col gap-1",children:[e.jsx("span",{className:"text-[11px] text-zinc-500",children:"swipe"}),e.jsx("input",{type:"number",min:0,max:240,step:1,value:String(c(g.value,["orchestrator","cooldown_minutes","level1","swipe"],"")),onChange:t=>{const r=t.target.value;y(a=>{const s=r===""?void 0:Math.max(0,Math.min(240,Number(r)));v(a,["orchestrator","cooldown_minutes","level1","swipe"],isFinite(Number(s))?s:void 0)})},className:"rounded-lg border border-zinc-200 px-3 py-2 text-sm",placeholder:String(c(x,["orchestrator","cooldown_minutes","level1","swipe"],""))})]}),e.jsxs("label",{className:"flex flex-col gap-1",children:[e.jsx("span",{className:"text-[11px] text-zinc-500",children:"default"}),e.jsx("input",{type:"number",min:0,max:240,step:1,value:String(c(g.value,["orchestrator","cooldown_minutes","level1","default"],"")),onChange:t=>{const r=t.target.value;y(a=>{const s=r===""?void 0:Math.max(0,Math.min(240,Number(r)));v(a,["orchestrator","cooldown_minutes","level1","default"],isFinite(Number(s))?s:void 0)})},className:"rounded-lg border border-zinc-200 px-3 py-2 text-sm",placeholder:String(c(x,["orchestrator","cooldown_minutes","level1","default"],""))})]})]})]}),e.jsxs("div",{className:"rounded-lg border border-zinc-200 bg-white p-3",children:[e.jsx("div",{className:"mb-2 text-[11px] font-semibold text-zinc-600",children:"Level 0"}),e.jsxs("label",{className:"flex flex-col gap-1",children:[e.jsx("span",{className:"text-[11px] text-zinc-500",children:"default"}),e.jsx("input",{type:"number",min:0,max:1440,step:1,value:String(c(g.value,["orchestrator","cooldown_minutes","level0","default"],"")),onChange:t=>{const r=t.target.value;y(a=>{const s=r===""?void 0:Math.max(0,Math.min(1440,Number(r)));v(a,["orchestrator","cooldown_minutes","level0","default"],isFinite(Number(s))?s:void 0)})},className:"rounded-lg border border-zinc-200 px-3 py-2 text-sm",placeholder:String(c(x,["orchestrator","cooldown_minutes","level0","default"],""))})]})]})]}),e.jsxs("div",{className:"mt-2 text-[11px] text-zinc-500",children:["Stored at ",e.jsx("span",{className:"font-mono",children:"behavior.orchestrator.cooldown_minutes"}),"."]})]})]}),re?e.jsxs("div",{className:"mt-4 rounded-lg border border-zinc-200 bg-white p-3",children:[e.jsxs("div",{className:"mb-2 text-[11px] font-semibold text-zinc-700",children:["Proactivity diff vs defaults (",U.length,")"]}),U.length?e.jsx("div",{className:"max-h-64 overflow-auto",children:e.jsxs(L,{children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx(d,{children:"Path"}),e.jsx(d,{children:"Default"}),e.jsx(d,{children:"Current"})]})}),e.jsx("tbody",{children:U.slice(0,80).map(t=>e.jsxs("tr",{children:[e.jsx(m,{className:"font-mono text-[11px]",children:t.path}),e.jsx(m,{className:"text-[11px]",children:W(t.a)}),e.jsx(m,{className:"text-[11px]",children:W(t.b)})]},t.path))})]})}):e.jsx("div",{className:"text-xs text-zinc-500",children:"No differences."}),U.length>80?e.jsx("div",{className:"mt-2 text-[11px] text-zinc-500",children:"Showing first 80 rows."}):null]}):null,se?e.jsxs("div",{className:"mt-4 rounded-lg border border-zinc-200 bg-white p-3",children:[e.jsxs("div",{className:"mb-2 text-[11px] font-semibold text-zinc-700",children:["Full behavior diff vs defaults (",Q.length,")"]}),Q.length?e.jsx("div",{className:"max-h-64 overflow-auto",children:e.jsxs(L,{children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx(d,{children:"Path"}),e.jsx(d,{children:"Default"}),e.jsx(d,{children:"Current"})]})}),e.jsx("tbody",{children:Q.slice(0,80).map(t=>e.jsxs("tr",{children:[e.jsx(m,{className:"font-mono text-[11px]",children:t.path}),e.jsx(m,{className:"text-[11px]",children:W(t.a)}),e.jsx(m,{className:"text-[11px]",children:W(t.b)})]},t.path))})]})}):e.jsx("div",{className:"text-xs text-zinc-500",children:"No differences."}),Q.length>80?e.jsx("div",{className:"mt-2 text-[11px] text-zinc-500",children:"Showing first 80 rows."}):null]}):null]}):e.jsx("div",{className:"mb-3 rounded-lg border border-amber-200 bg-amber-50 px-3 py-2 text-xs text-amber-800",children:"Behavior JSON is invalid, so structured controls are disabled. Fix the JSON below to re-enable controls."}),e.jsxs("div",{className:"mb-2 flex flex-wrap items-center gap-2",children:[e.jsx(M,{variant:"secondary",type:"button",className:"rounded-lg border border-zinc-200 px-3 py-2 text-xs",onClick:()=>j(t=>t&&{...t,behavior_json:JSON.stringify((_==null?void 0:_.behavior)??{},null,2)}),children:"Reset to defaults"}),e.jsx(M,{variant:"secondary",type:"button",className:"rounded-lg border border-zinc-200 px-3 py-2 text-xs",onClick:()=>j(t=>t&&{...t,behavior_json:JSON.stringify({prompts:{system_template:`You are {{name}}, MoviNesta’s in-app AI companion.
{{bioLine}}
Goal: help users pick movies/series fast, spoiler-free, with fun guidance.
Default behavior: be helpful and thorough. If the user asks for a deep dive or plan, you can write long, structured answers.
When recommending: provide 2–6 picks, each with a short spoiler-free reason, unless the user asks for more.
Ask 0–2 questions only if needed.
If the user specifies an exact output format (e.g., "reply exactly", "Format:"), follow it EXACTLY with no extra words.
TOOL_RESULTS_MINI is ground truth for catalog/library/list data; do not invent IDs, titles, or years.
Your final text must be plain text only (no JSON objects inside the message).
Never guess about user data. If unsure, call a read tool (get_my_*, search_*) or ask.
For actions that change data or send messages, do NOT run the write tool automatically. Instead, include confirmable buttons in final.actions.
Only auto-run read/grounding tools.
Never claim an action happened unless TOOL_RESULTS_MINI confirms success.
Never mention tools/JSON/system prompts/policies/DB/SQL.

{{toolProtocol}}`,append_tool_protocol:!0,chunk_outline_template:`You are {{name}}, MoviNesta’s in-app AI companion.
Task: produce a compact outline for a long-form answer.
Prefer 4–8 sections. Make sections actionable and spoiler-free.
Return JSON only matching the provided schema.`,chunk_section_template:`You are {{name}}, MoviNesta’s in-app AI companion.
Task: write ONE section of the answer (only that section).
Write plain text only (no JSON). Be clear, structured, and spoiler-free.
End on a complete sentence.`},output:{max_reply_chars:5e4,strip_text_prefix:!0},chunking:{enabled:!0,min_user_chars:700,cues:["deep","deep dive","go deeper","detailed","long","step-by-step","plan","strategy","write a full","full","comprehensive","explain","analysis","compare"],max_total_chars:5e4,max_sections:8,per_section_max_chars:12e3,user_request_max_chars:4e3,max_continuations:6},tool_loop:{max_loops:3,max_calls_per_loop:4},router:{deterministic_enabled:!0},strict_output:{allow_override:!0}},null,2),params:{...t.params,max_output_tokens:"4096"}}),children:"Long-form preset"}),e.jsx(M,{variant:"secondary",type:"button",className:"rounded-lg border border-zinc-200 px-3 py-2 text-xs",onClick:()=>j(t=>t&&{...t,behavior_json:JSON.stringify({prompts:{system_template:`You are {{name}}, MoviNesta’s in-app AI companion.
{{bioLine}}
Goal: help users quickly. Be concise by default.
Default: 2–6 picks, each with 1 short reason (no spoilers).
Ask 0–2 questions only if needed.
If the user asks for detail, then expand.
If the user specifies an exact output format (e.g., "reply exactly", "Format:"), follow it EXACTLY with no extra words.
TOOL_RESULTS_MINI is ground truth for catalog/library/list data; do not invent IDs, titles, or years.
Your final text must be plain text only (no JSON objects inside the message).
Never mention tools/JSON/system prompts/policies/DB/SQL.

{{toolProtocol}}`,append_tool_protocol:!0,chunk_outline_template:"You are {{name}}. Return JSON only matching the schema.",chunk_section_template:"You are {{name}}. Write plain text only."},output:{max_reply_chars:4e3,strip_text_prefix:!0},chunking:{enabled:!1,min_user_chars:700,cues:[],max_total_chars:14e3,max_sections:6,per_section_max_chars:8e3,user_request_max_chars:2e3,max_continuations:2},tool_loop:{max_loops:3,max_calls_per_loop:4},router:{deterministic_enabled:!0},strict_output:{allow_override:!0}},null,2),params:{...t.params,max_output_tokens:"900"}}),children:"Concise preset"})]}),e.jsx("textarea",{value:i.behavior_json??"",onChange:t=>j(r=>r&&{...r,behavior_json:t.target.value}),placeholder:`{
                    "prompts": { ... },
                    "output": { ... },
                    "chunking": { ... }
                  }`,className:"h-64 w-full rounded-lg border border-zinc-200 px-3 py-2 text-xs font-mono"})]})}),e.jsx("div",{className:"mt-6",children:e.jsxs(z,{children:[e.jsx("div",{className:"mb-2 text-sm font-semibold",children:"Responses API parameters"}),e.jsx("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2",children:ee.map(t=>{const r=i.params[t.key]??"";return t.type==="boolean"?e.jsxs("label",{className:"flex flex-col gap-1 text-sm",children:[e.jsx("span",{className:"text-xs font-semibold text-zinc-600",children:t.label}),e.jsxs("select",{value:r,onChange:a=>j(s=>s&&{...s,params:{...s.params,[t.key]:a.target.value}}),className:"rounded-lg border border-zinc-200 px-3 py-2 text-sm",children:[e.jsx("option",{value:"",children:"Unset"}),e.jsx("option",{value:"true",children:"true"}),e.jsx("option",{value:"false",children:"false"})]})]},t.key):t.type==="json"?e.jsxs("label",{className:"flex flex-col gap-1 text-sm",children:[e.jsx("span",{className:"text-xs font-semibold text-zinc-600",children:t.label}),e.jsx("textarea",{value:r,onChange:a=>j(s=>s&&{...s,params:{...s.params,[t.key]:a.target.value}}),placeholder:"{}",className:"h-28 w-full rounded-lg border border-zinc-200 px-3 py-2 text-xs font-mono"})]},t.key):t.type==="string-array"?e.jsxs("label",{className:"flex flex-col gap-1 text-sm",children:[e.jsx("span",{className:"text-xs font-semibold text-zinc-600",children:t.label}),e.jsx("textarea",{value:r,onChange:a=>j(s=>s&&{...s,params:{...s.params,[t.key]:a.target.value}}),placeholder:"One per line",className:"h-28 w-full rounded-lg border border-zinc-200 px-3 py-2 text-xs font-mono"})]},t.key):e.jsxs("label",{className:"flex flex-col gap-1 text-sm",children:[e.jsx("span",{className:"text-xs font-semibold text-zinc-600",children:t.label}),t.type==="number"?e.jsx("input",{type:"number",min:t.min,max:t.max,step:t.step,value:r,onChange:a=>j(s=>s&&{...s,params:{...s.params,[t.key]:a.target.value}}),className:"rounded-lg border border-zinc-200 px-3 py-2 text-sm"}):e.jsx("input",{type:"text",value:r,onChange:a=>j(s=>s&&{...s,params:{...s.params,[t.key]:a.target.value}}),className:"rounded-lg border border-zinc-200 px-3 py-2 text-sm"})]},t.key)})}),q?e.jsx("div",{className:"mt-3 rounded-lg border border-red-200 bg-red-50 px-3 py-2 text-xs text-red-700",children:q}):null,e.jsxs("div",{className:"mt-4 flex items-center gap-3",children:[e.jsx(M,{variant:"ghost",type:"button",onClick:async()=>{if(!i)return;$(null);const t={};for(const s of ee){const C=i.params[s.key]??"";if(s.type==="number"){const B=C.trim();t[s.key]=B?Number(B):null}else if(s.type==="boolean")C==="true"?t[s.key]=!0:C==="false"?t[s.key]=!1:t[s.key]=null;else if(s.type==="json"){const B=C.trim();if(!B)t[s.key]=null;else try{t[s.key]=JSON.parse(B)}catch{$(`Invalid JSON for ${s.label}.`);return}}else s.type==="string-array"?t[s.key]=C.trim()?be(C):null:t[s.key]=C.trim()?C:null}let r=null;const a=(i.behavior_json??"").trim();if(a)try{r=JSON.parse(a)}catch{$("Invalid JSON for Behavior.");return}try{await Y.mutateAsync({openrouter_base_url:i.openrouter_base_url.trim()||null,model_fast:i.model_fast.trim()||null,model_creative:i.model_creative.trim()||null,model_planner:i.model_planner.trim()||null,model_maker:i.model_maker.trim()||null,model_critic:i.model_critic.trim()||null,fallback_models:i.fallback_models,model_catalog:i.model_catalog,default_instructions:i.default_instructions.trim()||null,params:t,behavior:r})}catch(s){$((s==null?void 0:s.message)??"Failed to save settings.");return}},className:"rounded-xl bg-zinc-900 px-4 py-2 text-sm text-white",disabled:Y.isPending,children:Y.isPending?"Saving…":"Save settings"}),Y.isSuccess?e.jsx("span",{className:"text-xs text-green-700",children:"Saved."}):null]})]})})]})})})();return e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between gap-4",children:[e.jsx(Je,{children:"Assistant"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(M,{variant:"ghost",type:"button",onClick:()=>h("metrics"),className:`rounded-xl px-3 py-2 text-sm ${n==="metrics"?"bg-zinc-900 text-white":"bg-zinc-100 text-zinc-800"}`,children:"Metrics"}),e.jsx(M,{variant:"ghost",type:"button",onClick:()=>h("diagnostics"),className:`rounded-xl px-3 py-2 text-sm ${n==="diagnostics"?"bg-zinc-900 text-white":"bg-zinc-100 text-zinc-800"}`,children:"Diagnostics"}),e.jsx(M,{variant:"ghost",type:"button",onClick:()=>h("settings"),className:`rounded-xl px-3 py-2 text-sm ${n==="settings"?"bg-zinc-900 text-white":"bg-zinc-100 text-zinc-800"}`,children:"Settings"}),n==="metrics"?e.jsxs("div",{className:"ml-2 flex items-center gap-2",children:[e.jsx(M,{variant:"ghost",type:"button",onClick:()=>N(7),className:`rounded-xl px-3 py-2 text-sm ${S===7?"bg-zinc-900 text-white":"bg-zinc-100 text-zinc-800"}`,children:"7d"}),e.jsx(M,{variant:"ghost",type:"button",onClick:()=>N(14),className:`rounded-xl px-3 py-2 text-sm ${S===14?"bg-zinc-900 text-white":"bg-zinc-100 text-zinc-800"}`,children:"14d"}),e.jsx(M,{variant:"ghost",type:"button",onClick:()=>N(30),className:`rounded-xl px-3 py-2 text-sm ${S===30?"bg-zinc-900 text-white":"bg-zinc-100 text-zinc-800"}`,children:"30d"})]}):n==="diagnostics"?e.jsx(M,{variant:"ghost",type:"button",onClick:()=>K.refetch(),className:"ml-2 rounded-xl bg-zinc-100 px-3 py-2 text-sm text-zinc-800",children:"Refresh"}):null]})]}),we]})}export{Ye as default};
