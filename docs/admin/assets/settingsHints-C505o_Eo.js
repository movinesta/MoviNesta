import{j as e,i as N,r as R,B as _}from"./index-CRBf6KpQ.js";function I(t){return e.jsx("button",{type:"button",title:t.title??"Hint","aria-label":t.title??"Hint",onClick:t.onClick,className:N("inline-flex h-7 w-7 items-center justify-center rounded-full border border-zinc-200 bg-white text-[12px] font-bold text-zinc-600 shadow-sm hover:bg-zinc-50","focus:outline-none focus:ring-2 focus:ring-zinc-300",t.className),children:"i"})}function y(t){try{return JSON.stringify(t,null,2)}catch{return String(t)}}function M(t){if(!t)return"";const s=new Date(t);return Number.isFinite(s.getTime())?s.toLocaleString():String(t)}function z(t){return(t.split(".").filter(Boolean).slice(-1)[0]??t).replace(/_/g," ").replace(/\w/g,a=>a.toUpperCase())}function L(t){var S;const{open:s,settingKey:a,entry:i,row:w,status:l,hint:r,effectiveValue:n,draftValue:d,recentHistory:c,onClose:m,onCopyKey:f,onOpenHistory:g,onApplyValue:b,onNavigateToKey:p}=t;if(R.useEffect(()=>{if(!s)return;const o=j=>{j.key==="Escape"&&m()};return window.addEventListener("keydown",o),()=>window.removeEventListener("keydown",o)},[s,m]),!s)return null;const u=(r==null?void 0:r.impacts)??{},k=Object.keys(u).filter(o=>!!u[o]),h=[];return r&&r.recommended!==void 0&&h.push({label:"Recommended",value:r.recommended,why:r.recommended_why??null}),r&&r.recommended_safe!==void 0&&h.push({label:"Safe",value:r.recommended_safe,why:r.recommended_safe_why??null}),r&&r.recommended_aggressive!==void 0&&h.push({label:"Aggressive",value:r.recommended_aggressive,why:r.recommended_aggressive_why??null}),e.jsxs("div",{className:"fixed inset-0 z-50",children:[e.jsx("button",{type:"button","aria-label":"Close",className:"absolute inset-0 bg-black/30",onClick:m}),e.jsxs("div",{className:"absolute right-0 top-0 flex h-full w-full max-w-2xl flex-col bg-white shadow-2xl",role:"dialog","aria-modal":"true",children:[e.jsxs("div",{className:"flex items-start justify-between gap-3 border-b border-zinc-200 px-4 py-3",children:[e.jsxs("div",{className:"min-w-0",children:[e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsx("div",{className:"truncate font-mono text-xs text-zinc-900",children:a??"Setting"}),i?e.jsx("span",{className:N("rounded-lg px-2 py-1 text-xs font-semibold",i.scope==="public"&&"bg-emerald-100 text-emerald-800",i.scope==="admin"&&"bg-zinc-200 text-zinc-800",i.scope==="server_only"&&"bg-blue-100 text-blue-800"),children:i.scope}):null,l?e.jsx("span",{className:N("rounded-full px-2 py-0.5 text-[10px] font-semibold",l==="default"&&"bg-zinc-100 text-zinc-700",l==="overridden"&&"bg-amber-100 text-amber-900",l==="redundant"&&"bg-purple-100 text-purple-900"),children:l}):null]}),(r==null?void 0:r.title)??(a?z(a):null)?e.jsx("div",{className:"mt-1 text-sm font-semibold text-zinc-900",children:(r==null?void 0:r.title)??(a?z(a):"")}):null,i!=null&&i.description?e.jsx("div",{className:"mt-1 text-sm text-zinc-700",children:i.description}):null]}),e.jsxs("div",{className:"flex items-center gap-2",children:[f?e.jsx(_,{variant:"ghost",onClick:f,children:"Copy key"}):null,g?e.jsx(_,{variant:"ghost",onClick:g,children:"History"}):null,e.jsx(_,{type:"button",variant:"ghost",className:"rounded-lg border border-zinc-200 bg-white px-2 py-1 text-xs font-semibold text-zinc-700 hover:bg-zinc-50",onClick:m,children:"Close"})]})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-4",children:[e.jsxs("div",{className:"rounded-2xl border border-zinc-200 bg-zinc-50 p-4",children:[e.jsx("div",{className:"text-xs font-semibold text-zinc-700",children:"What it does"}),e.jsx("div",{className:"mt-2 whitespace-pre-wrap text-sm text-zinc-700",children:(r==null?void 0:r.details)??(i==null?void 0:i.description)??"No documentation for this setting yet."}),r!=null&&r.caution?e.jsxs("div",{className:"mt-3 text-sm font-medium text-amber-700",children:["⚠ ",r.caution]}):null,k.length?e.jsxs("div",{className:"mt-3",children:[e.jsx("div",{className:"text-xs font-semibold text-zinc-700",children:"Impact"}),e.jsx("div",{className:"mt-2 flex flex-wrap gap-2",children:k.map(o=>e.jsxs("span",{className:"rounded-full bg-white px-3 py-1 text-[11px] font-semibold text-zinc-700 ring-1 ring-zinc-200",children:[String(o),u[o]?e.jsx("span",{className:"ml-2 font-normal text-zinc-500",children:String(u[o])}):null]},String(o)))})]}):null]}),e.jsxs("div",{className:"mt-4 grid grid-cols-1 gap-3 md:grid-cols-3",children:[e.jsxs("div",{className:"rounded-2xl border border-zinc-200 bg-white p-4",children:[e.jsx("div",{className:"text-xs font-semibold text-zinc-700",children:"Current (effective)"}),e.jsx("pre",{className:"mt-2 max-h-40 overflow-auto rounded-xl border border-zinc-200 bg-zinc-50 p-2 text-xs",children:y(n)})]}),e.jsxs("div",{className:"rounded-2xl border border-zinc-200 bg-white p-4",children:[e.jsx("div",{className:"text-xs font-semibold text-zinc-700",children:"Draft (will save)"}),e.jsx("pre",{className:"mt-2 max-h-40 overflow-auto rounded-xl border border-zinc-200 bg-zinc-50 p-2 text-xs",children:y(d)})]}),e.jsxs("div",{className:"rounded-2xl border border-zinc-200 bg-white p-4",children:[e.jsx("div",{className:"text-xs font-semibold text-zinc-700",children:"Default"}),e.jsx("pre",{className:"mt-2 max-h-40 overflow-auto rounded-xl border border-zinc-200 bg-zinc-50 p-2 text-xs",children:y(i==null?void 0:i.default)})]})]}),e.jsxs("div",{className:"mt-4 rounded-2xl border border-zinc-200 bg-white p-4",children:[e.jsx("div",{className:"text-xs font-semibold text-zinc-700",children:"Real-life examples"}),e.jsx("div",{className:"mt-3 space-y-3",children:((r==null?void 0:r.examples)??[]).length?((r==null?void 0:r.examples)??[]).map((o,j)=>e.jsxs("div",{className:"rounded-xl border border-zinc-200 bg-zinc-50 p-3",children:[e.jsx("div",{className:"text-xs font-semibold text-zinc-800",children:o.scenario}),e.jsx("div",{className:"mt-1 text-sm text-zinc-700",children:o.effect})]},j)):e.jsx("div",{className:"text-sm text-zinc-500",children:"No examples available for this setting yet."})})]}),e.jsxs("div",{className:"mt-4 rounded-2xl border border-zinc-200 bg-white p-4",children:[e.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-2",children:[e.jsx("div",{className:"text-xs font-semibold text-zinc-700",children:"Recommended values"}),b&&h.length?e.jsx("div",{className:"text-xs text-zinc-500",children:"Apply will update the draft (don’t forget to Save)."}):null]}),h.length?e.jsx("div",{className:"mt-3 space-y-3",children:h.map(o=>e.jsxs("div",{className:"rounded-xl border border-zinc-200 bg-zinc-50 p-3",children:[e.jsxs("div",{className:"flex flex-wrap items-start justify-between gap-3",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-xs font-semibold text-zinc-800",children:o.label}),o.why?e.jsx("div",{className:"mt-1 text-xs text-zinc-600",children:o.why}):null]}),b?e.jsx(_,{variant:"ghost",onClick:()=>b(o.value),children:"Apply"}):null]}),e.jsx("pre",{className:"mt-2 max-h-44 overflow-auto rounded-xl border border-zinc-200 bg-white p-2 text-xs",children:y(o.value)})]},o.label))}):e.jsx("div",{className:"mt-2 text-sm text-zinc-500",children:"No curated recommendations for this setting yet."})]}),(S=r==null?void 0:r.related)!=null&&S.length?e.jsxs("div",{className:"mt-4 rounded-2xl border border-zinc-200 bg-white p-4",children:[e.jsx("div",{className:"text-xs font-semibold text-zinc-700",children:"Related settings"}),e.jsx("div",{className:"mt-3 flex flex-wrap gap-2",children:r.related.map(o=>e.jsx(_,{type:"button",variant:"ghost",onClick:()=>p==null?void 0:p(o),className:"rounded-full border border-zinc-200 bg-white px-3 py-1 text-xs font-semibold text-zinc-700 hover:bg-zinc-50",children:o},o))})]}):null,e.jsxs("div",{className:"mt-4 rounded-2xl border border-zinc-200 bg-white p-4",children:[e.jsxs("div",{className:"flex items-center justify-between gap-2",children:[e.jsx("div",{className:"text-xs font-semibold text-zinc-700",children:"Change history"}),g?e.jsx(_,{variant:"ghost",onClick:g,children:"View all"}):null]}),e.jsx("div",{className:"mt-3 space-y-2",children:(c??[]).length?(c??[]).slice(0,5).map(o=>e.jsxs("div",{className:"rounded-xl border border-zinc-200 bg-zinc-50 p-3",children:[e.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-2",children:[e.jsx("div",{className:"text-xs font-semibold text-zinc-800",children:M(o.changed_at)}),e.jsx("div",{className:"text-[11px] text-zinc-500",children:o.request_id?`req ${o.request_id}`:""})]}),o.change_reason?e.jsx("div",{className:"mt-1 text-xs text-zinc-600",children:o.change_reason}):null,e.jsxs("div",{className:"mt-2 grid grid-cols-1 gap-2 md:grid-cols-2",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-[11px] font-semibold text-zinc-600",children:"Old"}),e.jsx("pre",{className:"mt-1 max-h-28 overflow-auto rounded-lg border border-zinc-200 bg-white p-2 text-[11px]",children:y(o.old_value)})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-[11px] font-semibold text-zinc-600",children:"New"}),e.jsx("pre",{className:"mt-1 max-h-28 overflow-auto rounded-lg border border-zinc-200 bg-white p-2 text-[11px]",children:y(o.new_value)})]})]})]},o.id)):e.jsx("div",{className:"text-sm text-zinc-500",children:"No history rows found for this key."})})]}),e.jsx("div",{className:"h-6"})]})]})]})}const q={"ux.presence.heartbeat_ms":{title:"Presence heartbeat",details:"How often the client broadcasts presence heartbeats (ms). Smaller values feel more ‘live’ but create more realtime traffic.",examples:[{scenario:"Set to 10000ms",effect:"Faster updates; higher Realtime traffic + battery use."},{scenario:"Set to 30000ms",effect:"Lower traffic; presence may lag slightly."}],recommended:2e4,recommended_why:"Balanced default: responsive without being too chatty.",recommended_safe:25e3,recommended_safe_why:"Slightly less Realtime traffic, still responsive.",recommended_aggressive:1e4,recommended_aggressive_why:"Very snappy presence, but higher traffic.",impacts:{ux:"presence freshness",performance:"realtime traffic"},caution:"Very low values can increase Realtime load and mobile battery usage.",related:["ux.presence.online_ttl_ms","ux.presence.db_touch_min_interval_ms"]},"ux.presence.online_ttl_ms":{title:"Online TTL window",details:"A user is shown as ‘online’ if their last_seen timestamp is within this window (ms).",examples:[{scenario:"Lower it (e.g., 20000ms)",effect:"Online clears faster when users disconnect abruptly."},{scenario:"Raise it (e.g., 90000ms)",effect:"Users stay online longer; less accurate."}],recommended:45e3,recommended_why:"Default: responsive but tolerant of mobile networks.",impacts:{ux:"online accuracy"},related:["ux.presence.heartbeat_ms","ux.presence.db_touch_min_interval_ms"]},"ux.presence.away_ttl_ms":{title:"Away TTL window",details:"A user is shown as ‘away’ (recently active) if last_seen is within this window (ms).",examples:[{scenario:"Set to 60000ms",effect:"Away expires quickly; users move to ‘offline’ sooner."},{scenario:"Set to 600000ms",effect:"Away lasts longer; more forgiving but less precise."}],recommended:12e4,recommended_why:"Good UX default: not too aggressive on offline transitions.",impacts:{ux:"presence labels"},related:["ux.presence.online_ttl_ms"]},"ux.presence.db_touch_min_interval_ms":{title:"DB last_seen write interval",details:"Minimum interval between writing last_seen to the database (ms). Throttles DB writes while preserving UX.",examples:[{scenario:"Set to 30000ms",effect:"More accurate timestamps; more DB writes."},{scenario:"Set to 120000ms",effect:"Fewer DB writes; less granular last_seen."}],recommended:6e4,recommended_why:"Default throttle to protect DB while keeping timestamps useful.",impacts:{performance:"db write volume",ops:"db load"},related:["ux.presence.heartbeat_ms"]},"ux.presence.initial_sync_delay_ms":{title:"Presence initial sync delay",details:"Delay before forcing the first presence sync after subscribing (ms). Helps avoid bursts during initial load.",examples:[{scenario:"Set to 0",effect:"Fastest initial presence; can burst on load."},{scenario:"Set to 200",effect:"Smoother load; tiny UX delay."}],recommended:150,recommended_why:"Small delay that reduces burstiness while feeling instant.",impacts:{performance:"burst control",ux:"first load"},related:["ux.presence.heartbeat_ms"]},"ux.typing.remote_ttl_ms":{title:"Remote typing TTL",details:"How long to keep showing a remote user as typing if no new typing heartbeat arrives (ms).",examples:[{scenario:"Set to 3000ms",effect:"Typing clears quickly; can feel unstable on poor networks."},{scenario:"Set to 10000ms",effect:"More forgiving; may feel stale."}],recommended:5e3,recommended_why:"Good balance for mobile networks without feeling stale.",impacts:{ux:"typing stability"},related:["ux.typing.heartbeat_ms","ux.typing.inactivity_ms"]},"ux.typing.inactivity_ms":{title:"Typing inactivity cutoff",details:"Stops sending ‘typing’ after this many ms without local input.",examples:[{scenario:"Set to 1500ms",effect:"Typing clears quickly; can be ‘flickery’."},{scenario:"Set to 6000ms",effect:"More stable; slower to disappear."}],recommended:3e3,recommended_why:"A natural ‘typing pause’ threshold.",impacts:{ux:"typing feel"},related:["ux.typing.remote_ttl_ms"]},"ux.typing.heartbeat_ms":{title:"Typing heartbeat",details:"Maximum frequency for broadcasting typing updates (ms).",examples:[{scenario:"Set to 1000ms",effect:"More realtime updates; higher traffic."},{scenario:"Set to 4000ms",effect:"Lower traffic; typing may lag slightly."}],recommended:2e3,recommended_why:"Responsive without being too chatty.",impacts:{ux:"typing freshness",performance:"realtime traffic"},related:["ux.typing.remote_ttl_ms"]},"ux.messages.max_message_chars":{title:"Max message length",details:"Maximum characters allowed in the message composer.",examples:[{scenario:"Set to 500",effect:"Forces short messages; can frustrate long-form users."},{scenario:"Set to 5000",effect:"Supports long messages; increases AI prompt cost."}],recommended:2e3,recommended_why:"Default supports natural chat while preventing extremely long messages.",impacts:{ux:"composer limits",cost:"ai tokens"},caution:"Very large values can increase AI costs and slow rendering on large threads.",related:["assistant.reply_runner.max_context_messages"]},"ux.messages.composer_max_height_px":{title:"Composer max height",details:"Maximum auto-resize height for the composer textarea (px).",examples:[{scenario:"Set to 100px",effect:"More compact UI; users scroll sooner."},{scenario:"Set to 300px",effect:"Easier long editing; uses more vertical space."}],recommended:140,recommended_why:"Default keeps UI tidy while allowing multi-line editing.",impacts:{ux:"layout density"}},"ux.attachments.max_image_bytes":{title:"Max image upload size",details:"Client-side limit for chat image upload size (bytes). Prevents huge uploads before the server rejects them.",examples:[{scenario:"Set to 5MB",effect:"Faster uploads; fewer large images allowed."},{scenario:"Set to 20MB",effect:"Allows bigger images; slower uploads and higher storage/bandwidth."}],recommended:10*1024*1024,recommended_why:"10MB is a practical balance for mobile images.",impacts:{ux:"upload success",cost:"storage/bandwidth"},caution:"Raising this increases storage and bandwidth costs."},"ux.search.min_query_chars":{title:"Search min query length",details:"Minimum query length to enable search. Prevents expensive queries for tiny inputs.",examples:[{scenario:"Set to 1",effect:"Search triggers quickly; more query load."},{scenario:"Set to 3",effect:"Less load; users type more before results."}],recommended:2,recommended_why:"Good balance between responsiveness and avoiding noisy queries.",impacts:{performance:"query load",ux:"search responsiveness"},related:["ux.search.page_size","ops.search.timeout_ms"]},"ux.search.page_size":{title:"Search page size",details:"How many results per page for search. Higher values return more results but can be slower.",examples:[{scenario:"Set to 10",effect:"Faster responses; more pagination."},{scenario:"Set to 50",effect:"Fewer pages; heavier payload and slower."}],recommended:20,recommended_why:"Useful results while staying fast.",impacts:{performance:"payload size",ux:"scroll depth"}},"ux.search.stale_time_ms":{title:"Search cache staleTime",details:"React Query staleTime for search (ms). Higher values mean fewer refetches, but more stale results.",examples:[{scenario:"Set to 0",effect:"Always refetch; freshest but more requests."},{scenario:"Set to 30 minutes",effect:"Fewer calls; results can lag new content."}],recommended:1e3*60*30,recommended_why:"Default reduces repeated calls while keeping results reasonably fresh.",impacts:{performance:"request volume",ux:"perceived speed"}},"ux.search.gc_time_ms":{title:"Search cache gcTime",details:"How long to keep unused search results in cache (ms).",examples:[{scenario:"Set to 5 minutes",effect:"Lower memory; more refetches."},{scenario:"Set to 2 hours",effect:"Fewer refetches; more memory usage."}],recommended:1e3*60*60,recommended_why:"Keeps common searches warm without keeping data forever.",impacts:{performance:"memory usage"}},"ux.search.batch_sync_limit":{title:"Search background sync batch size",details:"How many records the client syncs per batch (when doing background search index sync).",examples:[{scenario:"Set to 200",effect:"Smoother but slower overall sync."},{scenario:"Set to 2000",effect:"Faster sync; can spike CPU/network."}],recommended:800,recommended_why:"Default avoids spikes on mid-range devices.",impacts:{performance:"sync burst",ux:"background smoothness"}},"ops.rate_limits":{title:"Per-action rate limits",details:"Server-only throttle settings used by Edge Functions to limit abusive/high-cost operations.",examples:[{scenario:"Lower catalog-sync to 30/min",effect:"Prevents bursts; slower bulk sync for users."},{scenario:"Raise to 120/min",effect:"Faster sync, but higher DB/API pressure."}],recommended:{actions:{"catalog-sync":60}},recommended_why:"Keeps sync responsive while preventing accidental tight loops.",recommended_safe:{actions:{"catalog-sync":30}},recommended_safe_why:"More conservative; better during outages or heavy load.",recommended_aggressive:{actions:{"catalog-sync":120}},recommended_aggressive_why:"Faster bursts; higher DB/API pressure.",impacts:{ops:"throttling",performance:"DB/API load",cost:"upstream usage"},caution:"High values can amplify costs and rate-limit upstream services."},"assistant.tool_result_truncation":{title:"Assistant tool result truncation",details:"Caps tool outputs returned to the assistant/client so huge payloads don’t blow up tokens or UI.",examples:[{scenario:"Increase maxString to 2500",effect:"More context in tool results; higher token usage."},{scenario:"Reduce maxArray to 20",effect:"Smaller payloads; might hide useful list items."}],recommended:{defaults:{maxString:1200,maxArray:40,maxObjectKeys:60},caps:{maxString:4e3,maxArray:200,maxObjectKeys:200},maxDepth:4},recommended_why:"Keeps most tool responses usable while preventing huge token spikes.",recommended_safe:{defaults:{maxString:800,maxArray:30,maxObjectKeys:40},caps:{maxString:2500,maxArray:120,maxObjectKeys:120},maxDepth:4},recommended_safe_why:"More conservative payload sizes; reduces token/cost risk.",recommended_aggressive:{defaults:{maxString:2e3,maxArray:60,maxObjectKeys:80},caps:{maxString:6e3,maxArray:300,maxObjectKeys:300},maxDepth:5},recommended_aggressive_why:"More context in tool results; higher token usage risk.",impacts:{cost:"tokens",performance:"payload size",ux:"assistant quality"}},"assistant.reply_runner.backoff":{title:"Assistant reply runner backoff",details:"How the background worker spaces retries after failures (exponential backoff + jitter).",examples:[{scenario:"Increase base_seconds to 20",effect:"Slower retries; reduces contention during outages."},{scenario:"Reduce max_seconds to 600",effect:"Faster recovery after transient errors; more retry load."}],recommended:{base_seconds:10,max_exp:10,max_seconds:3600,jitter_seconds:5},recommended_why:"Balances resilience (keeps trying) without hammering providers.",recommended_safe:{base_seconds:15,max_exp:10,max_seconds:7200,jitter_seconds:8},recommended_safe_why:"Slower retries; safer during provider issues/outages.",recommended_aggressive:{base_seconds:5,max_exp:9,max_seconds:1200,jitter_seconds:3},recommended_aggressive_why:"Faster recovery from transient errors; more retry pressure.",impacts:{ops:"retries",performance:"queue pressure",cost:"provider usage"}},"admin.users.page_limit":{title:"Admin Users list page size",details:"Controls how many users the Admin Users page fetches per request.",examples:[{scenario:"Set to 25",effect:"Faster load, less scrolling; more pagination."},{scenario:"Set to 200",effect:"Fewer pages; can slow load for large accounts."}],recommended:50,recommended_why:"Good balance between speed and admin convenience.",recommended_safe:25,recommended_safe_why:"Faster loads on big accounts; more pagination.",recommended_aggressive:150,recommended_aggressive_why:"Fewer pages; heavier response payloads.",impacts:{ux:"admin speed",performance:"endpoint load"},caution:"Very high values can stress admin endpoints."},"admin.audit.default_limit":{title:"Audit default limit",details:"Default row count returned by Admin Audit if no limit is provided.",examples:[{scenario:"Set to 20",effect:"Quick glance view; less scrolling."},{scenario:"Set to 150",effect:"More history visible; heavier response payload."}],recommended:50,recommended_why:"Enough rows for investigation without huge payloads.",recommended_safe:25,recommended_safe_why:"Quicker load; smaller payload.",recommended_aggressive:150,recommended_aggressive_why:"More rows visible; heavier responses.",impacts:{ux:"investigation speed",performance:"endpoint load"}},"assistant.reply_runner.claim_limit_default":{title:"Runner claim limit",details:"How many pending assistant-reply jobs a single runner invocation claims by default. Higher values increase throughput, but can cause bigger traffic bursts and increase the chance of timeouts.",examples:[{scenario:"Set to 10",effect:"Smoother load; slower backlog drain during spikes."},{scenario:"Set to 50",effect:"Faster backlog drain; more bursty provider usage and higher risk of hitting rate limits."}],recommended:20,recommended_why:"A balanced default: drains normal queues quickly without creating huge bursts.",recommended_safe:10,recommended_safe_why:"Lower burst risk; good for smaller deployments or tight provider limits.",recommended_aggressive:50,recommended_aggressive_why:"Maximizes throughput if you have headroom and strong rate-limit handling.",impacts:{performance:"throughput vs burstiness",cost:"provider usage spikes",ops:"queue stability"},caution:"If set too high, one invocation may spend its entire time budget processing claims and leave jobs half-finished.",related:["assistant.reply_runner.max_attempts_default","assistant.reply_runner.backoff","assistant.reply_runner.stuck_minutes"]},"assistant.reply_runner.max_attempts_default":{title:"Runner max attempts",details:"Default maximum retry attempts for a job. More attempts improves resilience during transient failures, but can turn outages into repeated retries.",examples:[{scenario:"Set to 3",effect:"Quicker failure; fewer retries during outages; less wasted cost."},{scenario:"Set to 7",effect:"More persistent retries; better recovery, but more load while degraded."}],recommended:5,recommended_why:"Good resilience without endless retries.",recommended_safe:3,recommended_safe_why:"Minimizes retry cost during provider outages.",recommended_aggressive:7,recommended_aggressive_why:"More persistent recovery when failures are usually transient.",impacts:{ops:"retry behavior",cost:"extra generations",safety:"stability under outages"},caution:"If retries are too high, a provider outage can create a retry storm.",related:["assistant.reply_runner.backoff","assistant.reply_runner.claim_limit_default"]},"assistant.reply_runner.stuck_minutes":{title:"Stuck job detection window",details:"How long a job can be ‘in progress’ without updates before it’s considered stuck and eligible for recovery.",examples:[{scenario:"Set to 5 minutes",effect:"Faster recovery from crashed workers; higher chance of false positives on slow runs."},{scenario:"Set to 20 minutes",effect:"Fewer false positives; slower recovery when a worker dies."}],recommended:10,recommended_why:"Enough time for normal work, while still recovering quickly from crashes.",recommended_safe:15,recommended_safe_why:"Reduces false positives if jobs sometimes take longer (slow providers).",recommended_aggressive:5,recommended_aggressive_why:"Fastest recovery if you prioritize responsiveness.",impacts:{ops:"job recovery speed",performance:"queue latency",cost:"duplicate work risk"},caution:"Too low can cause duplicate processing (two workers may re-run the same job).",related:["assistant.reply_runner.max_attempts_default","assistant.reply_runner.backoff"]},"assistant.reply_runner.max_context_messages":{title:"Max context messages",details:"How many recent messages are included as context when generating a reply. More context can improve quality, but increases tokens and latency.",examples:[{scenario:"Set to 8",effect:"Cheaper/faster replies; may lose important earlier context."},{scenario:"Set to 20",effect:"Better continuity; higher token cost and higher risk of long prompts."}],recommended:12,recommended_why:"Typically enough to keep conversation coherent without bloating prompts.",recommended_safe:10,recommended_safe_why:"Saves cost while staying coherent for most chats.",recommended_aggressive:18,recommended_aggressive_why:"More context for complex conversations (higher cost).",impacts:{ux:"assistant coherence",cost:"token usage",performance:"latency"},caution:"Very high values can lead to long prompts and more frequent provider length limits.",related:["assistant.tool_result_truncation"]},"ml.rerank.provider":{title:"Rerank provider",details:'Which provider is used for reranking. In this project, only "voyage" is supported right now.',examples:[{scenario:"Keep default: voyage",effect:"Rerank works as expected."},{scenario:"Change to something else",effect:"Will likely fail validation/server calls because only voyage is supported."}],recommended:"voyage",recommended_why:"Only supported option at the moment.",recommended_safe:"voyage",recommended_safe_why:"Same as recommended.",recommended_aggressive:"voyage",recommended_aggressive_why:"Same as recommended.",impacts:{ux:"ranking quality",performance:"latency",cost:"provider usage",ops:"stability"},caution:"If you want a different provider, add support in the server implementation + schema first.",related:["ml.rerank.model","ops.rerank.adaptive_topk","ops.rerank.cache_ttl_seconds"]},"ml.rerank.model":{title:"Voyage rerank model",details:'The Voyage model name used for reranking (example: "rerank-2.5"). This controls quality vs latency/cost.',examples:[{scenario:"rerank-2.5",effect:"Balanced default for quality and speed."},{scenario:"Other Voyage model",effect:"May change quality/cost; check Voyage docs for supported model names."}],recommended:"rerank-2.5",recommended_why:"Project default; a good balance for most catalogs.",recommended_safe:"rerank-2.5",recommended_safe_why:"Stick to the known-good default unless you’ve tested alternatives.",recommended_aggressive:"rerank-2.5",recommended_aggressive_why:"Aggressive tuning is usually done via candidate sizing, not model name.",impacts:{ux:"ranking quality",performance:"latency",cost:"provider usage"},caution:"If the model name is wrong/unsupported, rerank calls may error. Always test in staging.",related:["ml.rerank.provider","ops.rerank.adaptive_topk","ops.rerank.fresh_window_seconds"]},"admin.overview.recent_errors_limit":{title:"Recent errors limit",details:"How many recent errors the Overview page fetches and displays. Higher values can help investigation but increases payload size.",examples:[{scenario:"Set to 20",effect:"Faster overview load; shorter error list."},{scenario:"Set to 200",effect:"More investigation context; bigger payload and slower load."}],recommended:50,recommended_why:"Enough context for triage without making the overview heavy.",recommended_safe:25,recommended_safe_why:"Lightweight overview for smaller admin devices.",recommended_aggressive:150,recommended_aggressive_why:"More context for ops-heavy workflows.",impacts:{ux:"triage speed",performance:"overview load time",ops:"debugging depth"},related:["admin.overview.last_job_runs_limit","admin.audit.default_limit"]},"admin.overview.last_job_runs_limit":{title:"Last job runs limit",details:"How many recent job runs the Overview page shows (cron / background tasks).",examples:[{scenario:"Set to 10",effect:"Quick snapshot; less historical context."},{scenario:"Set to 50",effect:"More history; slightly heavier payload."}],recommended:20,recommended_why:"Clear overview without long tables.",recommended_safe:10,recommended_safe_why:"Minimal payload; good on low bandwidth.",recommended_aggressive:50,recommended_aggressive_why:"More context if you rely on Overview for historical checks.",impacts:{ux:"monitoring convenience",performance:"payload size"},related:["admin.overview.recent_errors_limit","admin.audit.default_limit"]},"admin.users.ban_duration_days":{title:"Default ban duration (days)",details:"How long a ban lasts when you ban a user from the admin dashboard. This is used to set banned_until.",examples:[{scenario:"Set to 7",effect:"Short suspensions; users can return automatically."},{scenario:"Set to 365",effect:"Long bans; still reversible by unbanning."},{scenario:"Set to 18,250 (~50 years)",effect:"Effectively permanent bans unless manually reversed."}],recommended:18250,recommended_why:"Treat bans as ‘permanent’ by default so serious abuse doesn’t auto-expire.",recommended_safe:365,recommended_safe_why:"Long but not permanent; good if you prefer auto-expiring bans.",recommended_aggressive:30,recommended_aggressive_why:"Shorter bans to reduce support friction (manual escalation for repeat abuse).",impacts:{safety:"abuse mitigation",ops:"moderation workflow",ux:"support burden"},caution:"Very short bans can make abuse recurring unless you monitor closely.",related:["admin.users.page_limit"]},"ops.frontend.function_timeout_ms":{title:"Frontend function timeout",details:"Client-side timeout for calling Edge Functions. If the function doesn’t respond before this, the UI reports an error.",examples:[{scenario:"Set to 12s",effect:"Fails fast; better UX during incidents; higher chance of false timeouts on slow networks."},{scenario:"Set to 30s",effect:"Fewer false timeouts; users wait longer when something is stuck."}],recommended:2e4,recommended_why:"Good balance for most Edge Function calls.",recommended_safe:3e4,recommended_safe_why:"Better for slow networks or heavier functions; users wait longer.",recommended_aggressive:12e3,recommended_aggressive_why:"Fast failure for snappy UX and faster incident detection.",impacts:{ux:"perceived responsiveness",ops:"incident detection",performance:"hanging requests"},related:["ops.search.timeout_ms","integrations.tmdb_proxy.timeout_ms"]},"ops.search.timeout_ms":{title:"Search timeout (ms)",details:"Timeout budget for search-related server calls. If exceeded, the request fails to protect UX and costs.",examples:[{scenario:"Set to 10s",effect:"Search fails faster during slowness; fewer long tail requests."},{scenario:"Set to 45s",effect:"More searches succeed under load; users may wait too long."}],recommended:2e4,recommended_why:"Prevents long tail waits while still allowing normal success.",recommended_safe:3e4,recommended_safe_why:"Better success rate under moderate load at the cost of slower UX.",recommended_aggressive:12e3,recommended_aggressive_why:"Snappier UX; good if your search infra is consistently fast.",impacts:{ux:"search latency",cost:"long tail compute",ops:"SLO protection"},related:["ops.frontend.function_timeout_ms"]},"ops.rerank.cache_ttl_seconds":{title:"Rerank cache TTL (seconds)",details:"How long rerank responses are cached. Higher TTL reduces provider calls and cost, but can serve slightly older results.",examples:[{scenario:"Set to 300 (5m)",effect:"Fresher results; more provider calls."},{scenario:"Set to 1800 (30m)",effect:"Lower cost; can reuse cached reranks longer."}],recommended:600,recommended_why:"Great cost/quality balance for most workloads.",recommended_safe:300,recommended_safe_why:"Prioritizes freshness if your catalog changes frequently.",recommended_aggressive:1800,recommended_aggressive_why:"Prioritizes cost reduction if rerank calls are expensive.",impacts:{cost:"provider usage",performance:"latency",ux:"freshness"},related:["ops.rerank.fresh_window_seconds","ops.rerank.cooldown_429_seconds"]},"ops.rerank.fresh_window_seconds":{title:"Rerank freshness window (seconds)",details:"If a title/user signal is considered ‘fresh’, rerank may prefer recalculating instead of using older cache. Lower values mean more cache hits; higher values mean more fresh recompute.",examples:[{scenario:"Set to 4h",effect:"More cache hits; cheaper; slightly less reactive to rapid preference changes."},{scenario:"Set to 12h",effect:"More recompute; more reactive; higher cost."}],recommended:21600,recommended_why:"6 hours balances responsiveness with cost.",recommended_safe:14400,recommended_safe_why:"Cheaper default if preferences don’t change rapidly.",recommended_aggressive:43200,recommended_aggressive_why:"More recompute window to capture preference shifts.",impacts:{ux:"recommendation responsiveness",cost:"rerank calls"},related:["ops.rerank.cache_ttl_seconds"]},"ops.rerank.cooldown_429_seconds":{title:"Rerank 429 cooldown (seconds)",details:"When the rerank provider returns rate-limited (HTTP 429), the system pauses rerank calls for this cooldown window to avoid repeated failures.",examples:[{scenario:"Set to 120 (2m)",effect:"Retries sooner; may keep hitting 429 if limits are tight."},{scenario:"Set to 900 (15m)",effect:"Backs off harder; fewer 429 loops but slower recovery."}],recommended:300,recommended_why:"A practical default that avoids 429 loops without stalling too long.",recommended_safe:600,recommended_safe_why:"More conservative; better if provider limits are strict.",recommended_aggressive:120,recommended_aggressive_why:"Faster recovery if 429s are rare and short-lived.",impacts:{ops:"rate-limit stability",cost:"wasted calls",performance:"recovery time"},related:["ops.rerank.cache_ttl_seconds","ops.rate_limits"]},"integrations.tmdb_proxy.default_language":{title:"TMDB default language",details:"Default language passed to TMDB when the client does not specify one (e.g., UI language).",examples:[{scenario:"en-US",effect:"English titles/overviews by default."},{scenario:"ar-IQ",effect:"Arabic titles/overviews when available."}],recommended:"en-US",recommended_why:"Matches most catalogs; override per-request for localized UX.",impacts:{ux:"localization"},related:["integrations.tmdb_proxy.max_query_len","integrations.tmdb_proxy.timeout_ms"]},"integrations.tmdb_proxy.max_query_len":{title:"TMDB max query length",details:"Maximum allowed length for TMDB search queries. Prevents abuse (huge payloads) and avoids pathological search queries.",examples:[{scenario:"Set to 100",effect:"Stricter input; may reject very long pasted text."},{scenario:"Set to 400",effect:"More permissive; slightly higher abuse surface."}],recommended:200,recommended_why:"Allows normal queries while blocking obvious abuse and giant payloads.",recommended_safe:120,recommended_safe_why:"More conservative if you’ve seen abuse.",recommended_aggressive:300,recommended_aggressive_why:"More permissive UX at the cost of a slightly larger attack surface.",impacts:{safety:"abuse prevention",ops:"input guardrails",ux:"search flexibility"},related:["integrations.tmdb_proxy.max_per_minute"]},"integrations.tmdb_proxy.max_page":{title:"TMDB max page",details:"Maximum page number allowed for TMDB pagination. Limits deep crawling and abuse.",examples:[{scenario:"Set to 10",effect:"Restricts deep paging; faster typical usage."},{scenario:"Set to 100",effect:"Allows deep paging; can increase TMDB usage."}],recommended:50,recommended_why:"Supports real browsing while preventing deep crawling.",recommended_safe:25,recommended_safe_why:"More conservative usage if you want to minimize external traffic.",recommended_aggressive:80,recommended_aggressive_why:"More browsing depth if admins rely on deep pagination.",impacts:{cost:"external API usage",ops:"abuse prevention"},related:["integrations.tmdb_proxy.max_per_minute"]},"integrations.tmdb_proxy.timeout_ms":{title:"TMDB timeout (ms)",details:"Timeout for TMDB proxy requests. Protects your Edge Function budget and keeps UI responsive.",examples:[{scenario:"Set to 4s",effect:"Fast failure; fewer hung requests; may fail on slow TMDB responses."},{scenario:"Set to 12s",effect:"Higher success rate; slower UX on long tail."}],recommended:8e3,recommended_why:"Good balance: allows normal TMDB latency while avoiding long hangs.",recommended_safe:12e3,recommended_safe_why:"More tolerant of slow responses.",recommended_aggressive:5e3,recommended_aggressive_why:"Snappier UX and stricter budgets.",impacts:{ux:"search responsiveness",ops:"budget control",cost:"timeout waste"},related:["ops.frontend.function_timeout_ms"]},"integrations.tmdb_proxy.max_per_minute":{title:"TMDB max per minute",details:"Rate limit for TMDB proxy calls per minute. Prevents hitting TMDB limits and controls cost.",examples:[{scenario:"Set to 60",effect:"More conservative; less likely to hit external limits."},{scenario:"Set to 300",effect:"More throughput; higher risk of 429s if TMDB is strict."}],recommended:120,recommended_why:"Reasonable throughput for normal usage and background tasks.",recommended_safe:60,recommended_safe_why:"Safer if you’re frequently seeing 429s or have many clients.",recommended_aggressive:240,recommended_aggressive_why:"Higher throughput if your workload requires it and TMDB limits allow.",impacts:{ops:"rate-limit stability",cost:"external usage",safety:"abuse prevention"},related:["ops.rate_limits","integrations.tmdb_proxy.max_query_len"]},"assistant_settings.openrouter_base_url":{title:"OpenRouter base URL override",details:"Overrides which OpenRouter-compatible endpoint the assistant uses. Leave blank to use the deployed environment default. Use this when you run a local proxy / gateway, have multiple OpenRouter endpoints, or need to temporarily fail over.",examples:[{scenario:"Blank",effect:"Uses the env default (recommended for production)."},{scenario:"Custom gateway URL",effect:"All assistant calls route through your gateway (useful for logging / allowlists / caching)."}],recommended:null,recommended_why:"Safer: avoids accidental misrouting. Keep the production endpoint in env.",caution:"A wrong URL commonly causes 404/timeout errors for all assistant calls.",impacts:{ops:"routing & availability"},related:["assistant_settings.test_provider"]},"assistant_settings.model_fast":{title:"Fast model",details:"Primary model used for normal chat replies and tool-driven tasks where speed and cost matter most.",examples:[{scenario:"Smaller/cheaper model",effect:"Faster responses and lower cost, but can be less accurate."},{scenario:"Larger model",effect:"More reliable reasoning, but slower and higher cost."}],recommended_why:"Pick the most stable low-latency model you trust for everyday use. Validate with Provider test.",impacts:{cost:"token cost",ux:"latency"},related:["assistant_settings.fallback_models","assistant_settings.test_provider"]},"assistant_settings.model_creative":{title:"Creative model",details:"Used for creative writing / brainstorming style tasks when you want richer language.",examples:[{scenario:"Same as fast model",effect:"Simpler ops; less variety between roles."},{scenario:"More capable model",effect:"Better style and nuance; higher cost."}],impacts:{cost:"token cost"},related:["assistant_settings.model_fast"]},"assistant_settings.model_planner":{title:"Planner model",details:"Used for planning / decomposition / structured reasoning.",examples:[{scenario:"More capable model",effect:"Better plans and fewer mistakes."},{scenario:"Cheap model",effect:"Faster but can miss edge cases."}],impacts:{ux:"answer quality",cost:"token cost"},related:["assistant_settings.model_fast"]},"assistant_settings.model_maker":{title:"Maker model",details:"Used for content generation where the assistant must produce longer, polished output.",impacts:{cost:"token cost",ux:"output quality"},related:["assistant_settings.params.max_output_tokens"]},"assistant_settings.model_critic":{title:"Critic model",details:"Used for self-check / review steps (when enabled by behavior config).",impacts:{cost:"token cost",safety:"review quality"},related:["assistant_settings.model_fast"]},"assistant_settings.fallback_models":{title:"Fallback models",details:"Ordered list of models tried when the primary model fails (timeouts, rate limits, provider errors). This is the biggest reliability lever.",examples:[{scenario:"No fallbacks",effect:"Any provider issue becomes a user-visible failure."},{scenario:"2–5 diverse fallbacks",effect:"Higher success rate during provider incidents."}],recommended_why:"Include a few stable alternatives with different providers/hosts (when possible).",impacts:{ops:"reliability",ux:"fewer failures"},related:["assistant_settings.model_fast","assistant_settings.test_provider"]},"assistant_settings.model_catalog":{title:"Model catalog",details:"The list of models shown in the dashboard dropdowns and used to populate fallback checkboxes.",examples:[{scenario:"Small curated list",effect:"Less confusion; safer changes."},{scenario:"Huge list",effect:"More flexibility, but easier to pick a wrong/unstable model."}],recommended_why:"Keep it curated: only models you actively support and test.",impacts:{ops:"change safety"},related:["assistant_settings.fallback_models"]},"assistant_settings.params.timeout_ms":{title:"Provider timeout (ms)",details:"Hard timeout for the OpenRouter request. If exceeded, the assistant will return a timeout-style error. Lower values fail faster; higher values increase success rate on slow models.",examples:[{scenario:"8–12s",effect:"Good balance for most chat replies."},{scenario:"20–60s",effect:"Higher success on slow models but worse UX and more hung requests."}],recommended:12e3,recommended_why:"Balanced default for chat UX; long enough for typical model latency.",recommended_safe:2e4,recommended_safe_why:"More tolerant during transient slowness.",recommended_aggressive:8e3,recommended_aggressive_why:"Snappier UX if you mostly use fast models.",impacts:{ux:"perceived latency",ops:"timeout rate"},related:["assistant_settings.model_fast","assistant_settings.fallback_models"]},"assistant_settings.params.stream_passthrough":{title:"Stream passthrough (SSE)",details:"When the client requests streaming, MoviNesta will forward user-visible text deltas from OpenRouter’s streaming endpoint (server-sent events). Tool-call deltas are ignored so you don’t leak JSON arguments to the UI. This is automatically bypassed for chunk mode and native tool calling.",examples:[{scenario:"On",effect:"Replies appear token-by-token (better perceived speed)."},{scenario:"Off",effect:"Server waits for the full reply, then streams it as safe text chunks."}],recommended:!1,recommended_why:"Safer default. Keeps streaming stable across providers and preserves tool-loop behavior.",recommended_safe:!1,recommended_safe_why:"Best compatibility and least risk of mid-stream provider failures.",recommended_aggressive:!0,recommended_aggressive_why:"Enable if you want true token streaming for non-tool replies.",impacts:{ux:"perceived latency",ops:"SSE stability"},related:["assistant_settings.params.stream","assistant_settings.params.native_tool_calling","assistant_settings.params.timeout_ms","behavior.chunking.enabled"]},"assistant_settings.params.response_healing":{title:"Response healing (plugin)",details:"Enables OpenRouter’s Response Healing plugin to improve compliance with JSON schemas and structured outputs. It can reduce malformed JSON or schema violations when MoviNesta expects a strict agent response.",examples:[{scenario:"On",effect:"Fewer parse errors and more reliable tool-loop outputs."},{scenario:"Off",effect:"Lower overhead, but schema parsing may fail more often."}],recommended:!0,recommended_why:"Recommended when using the default schema-wrapped agent responses.",recommended_safe:!0,recommended_safe_why:"Improves reliability for structured outputs.",recommended_aggressive:!1,recommended_aggressive_why:"Turn off only if you are 100% plain-text and never parse JSON.",impacts:{quality:"schema compliance",ops:"fewer retries"},related:["assistant_settings.params.response_format","assistant_settings.params.plugins"]},"assistant_settings.params.web_search":{title:"Web search (plugin)",details:"Enables OpenRouter’s Web Search plugin. When enabled, MoviNesta can ask OpenRouter to fetch fresh web results for recency-sensitive questions (news, ‘latest’, current facts). Results are returned with URL citations/annotations.",examples:[{scenario:"On (auto)",effect:"Uses web search only when the user asks for recent/current info."},{scenario:"Off",effect:"No external web lookups; answers rely only on the model and your tools."}],recommended:!1,recommended_why:"Off by default to avoid extra cost and latency. Turn on if you want current web facts.",recommended_safe:!1,recommended_safe_why:"Keeps costs predictable.",recommended_aggressive:!0,recommended_aggressive_why:"Enable if your assistant frequently needs ‘latest’ facts.",impacts:{quality:"freshness",ops:"latency/cost"},related:["assistant_settings.params.web_search_mode","assistant_settings.params.web_max_results","assistant_settings.params.web_engine","assistant_settings.params.web_search_prompt","assistant_settings.params.plugins"]},"assistant_settings.params.web_search_mode":{title:"Web search mode",details:"Controls when the web-search plugin is used. Supported values: off, auto, always. Auto only triggers for recency-sensitive prompts (e.g., ‘latest’, ‘today’).",examples:[{scenario:"off",effect:"Never use web search."},{scenario:"auto",effect:"Only use web search when the user asks for current/recent info."},{scenario:"always",effect:"Always allow web search (highest cost/latency)."}],recommended:"off",recommended_why:"Default to off; enable auto when you need fresh facts.",recommended_safe:"off",recommended_safe_why:"Most predictable behavior.",recommended_aggressive:"auto",recommended_aggressive_why:"Balanced: better freshness when needed, without always searching.",impacts:{quality:"freshness",ops:"cost"},related:["assistant_settings.params.web_search","assistant_settings.params.web_max_results"]},"assistant_settings.params.web_max_results":{title:"Web search max results",details:"How many results OpenRouter should fetch for web search (1–10). Higher values can improve coverage but increase latency and token usage.",examples:[{scenario:"3",effect:"Good balance for most ‘what’s new’ questions."},{scenario:"8–10",effect:"More coverage, higher latency and cost."}],recommended:3,recommended_why:"Balanced default.",recommended_safe:2,recommended_safe_why:"Lower latency and cost.",recommended_aggressive:6,recommended_aggressive_why:"More coverage when you rely heavily on web search.",impacts:{ux:"latency",ops:"token usage"},related:["assistant_settings.params.web_engine","assistant_settings.params.web_search_prompt"]},"assistant_settings.params.web_engine":{title:"Web search engine",details:"Selects the web search engine/provider for the plugin. Typical values include ‘native’ or ‘exa’ (depending on your OpenRouter plan/availability). Leave blank to use the default.",examples:[{scenario:"(blank)",effect:"Use OpenRouter’s default web search behavior."},{scenario:"native",effect:"Prefer native OpenRouter web search."},{scenario:"exa",effect:"Prefer Exa-backed search (if enabled)."}],recommended:"",recommended_why:"Leave blank unless you have a reason to pin a provider.",recommended_safe:"",recommended_safe_why:"Avoids breaking changes if providers vary.",recommended_aggressive:"native",recommended_aggressive_why:"Pin to reduce variance if you trust one provider.",impacts:{quality:"result relevance",ops:"stability"},related:["assistant_settings.params.web_search","assistant_settings.params.web_max_results"]},"assistant_settings.params.web_search_prompt":{title:"Web search prompt",details:"Optional instruction that guides how the web search is performed (e.g., prefer authoritative sources, official docs, etc.).",examples:[{scenario:"Prefer official sources",effect:"Search focuses on docs and authoritative sites when possible."}],recommended:"",recommended_why:"Keep blank unless you want consistent search behavior.",recommended_safe:"",recommended_safe_why:"Avoids over-constraining search.",recommended_aggressive:"Prefer official sources and cite URLs.",recommended_aggressive_why:"Improves trustworthiness when web search is on.",impacts:{quality:"source selection",ops:"none"},related:["assistant_settings.params.web_search","assistant_settings.params.web_engine"]},"assistant_settings.params.native_tool_calling":{title:"Native tool calling",details:"Enables OpenRouter Responses API native tool calling (function_call / function_call_output). When ON, the assistant will ask the model for tool calls directly instead of using MoviNesta’s JSON-schema agent wrapper.",examples:[{scenario:"OFF (default)",effect:"Uses MoviNesta JSON-schema agent loop (more predictable JSON, fewer provider quirks)."},{scenario:"ON",effect:"Uses OpenRouter function calling (better for tool-native models, supports parallel tool calls)."}],recommended:!1,recommended_why:"Enable after you’ve tested your chosen model(s) with your toolset and confirmed stable behavior.",caution:"Some models/providers may emit malformed arguments or call tools excessively. Use the max loops/calls limits.",impacts:{ux:"tool responsiveness",ops:"reliability"},related:["assistant_settings.params.tool_choice","assistant_settings.params.parallel_tool_calls","assistant_settings.params.native_tool_max_loops","assistant_settings.params.native_tool_max_calls_per_loop"]},"assistant_settings.params.native_tool_max_loops":{title:"Native tool max loops",details:"Maximum number of model→tool→model rounds when native tool calling is enabled. Higher values can solve harder tasks but increase latency and cost.",examples:[{scenario:"1–2",effect:"Fast, safe. Good for simple lookups and single-step actions."},{scenario:"3–6",effect:"More capable multi-step tasks but more tokens and time."}],recommended:3,recommended_why:"A balanced default that supports multi-step tasks without runaway loops.",impacts:{cost:"token cost",ux:"latency",ops:"timeout risk"},related:["assistant_settings.params.native_tool_calling","assistant_settings.params.timeout_ms"]},"assistant_settings.params.native_tool_max_calls_per_loop":{title:"Native tool max calls per loop",details:"Caps how many tool calls the assistant will execute per model response when native tool calling is enabled.",examples:[{scenario:"1–2",effect:"Safer. Prevents tool spam and keeps latency low."},{scenario:"4+",effect:"Allows parallelized multi-fetch tasks but increases load and cost."}],recommended:4,recommended_why:"Enough for common multi-fetch tasks (e.g., lookup + compare) without overloading.",impacts:{ops:"DB load",cost:"tool overhead",ux:"latency"},related:["assistant_settings.params.native_tool_calling","assistant_settings.params.parallel_tool_calls"]},"assistant_settings.params.verbosity":{title:"Verbosity",details:"Controls how detailed the model should be (Responses API parameter). This affects response length and sometimes style. Typical values are low / medium / high.",examples:[{scenario:"low",effect:"Short answers, fewer explanations."},{scenario:"high",effect:"More detailed answers (more tokens)."}],recommended:"medium",recommended_why:"Good default for a consumer app: helpful but not overly long.",impacts:{cost:"token cost",ux:"response length"},related:["assistant_settings.params.max_output_tokens"]},"assistant_settings.params.reasoning":{title:"Reasoning",details:'Advanced Responses API parameter used by some models to control reasoning behavior (for example, effort: low/medium/high). Provide a JSON object, e.g. { "effort": "medium" }.',examples:[{scenario:'{ "effort": "low" }',effect:"Faster, cheaper reasoning; may miss edge cases."},{scenario:'{ "effort": "high" }',effect:"More thorough reasoning; slower and higher cost."}],recommended_why:"Leave unset unless your selected model explicitly supports it and you’ve tested the tradeoffs.",caution:"If a model/provider doesn’t support this param, routing may fail unless your fallback/variants strip it.",impacts:{cost:"token cost",ux:"latency",ops:"compatibility"},related:["assistant_settings.params.verbosity","assistant_settings.params.timeout_ms"]},"assistant_settings.test_provider":{title:"Provider test",details:"Runs a tiny request using the current assistant settings and returns a structured diagnostic envelope (code, culprit variable, request IDs). Use this first when you see 'couldn’t reach the AI provider'.",examples:[{scenario:"401/403",effect:"Usually API key / auth issue (env.OPENROUTER_API_KEY)."},{scenario:"timeout",effect:"Model too slow or network issue; adjust timeout or fallbacks."},{scenario:"model_not_found",effect:"Selected model name is wrong or unavailable."}],impacts:{ops:"debug speed"},related:["assistant_settings.openrouter_base_url","assistant_settings.model_fast","assistant_settings.params.timeout_ms"]},"behavior.diagnostics.user_error_detail":{title:"User-facing error detail mode",details:"Controls how much diagnostic information is shown to end users when an AI call fails. Use 'friendly' for production, 'code' for supportable errors, and 'technical' for internal testing.",examples:[{scenario:"Friendly",effect:"Shows a generic message (safe for users)."},{scenario:"Code",effect:"Shows an error code like AI_TIMEOUT / AI_AUTH."},{scenario:"Technical",effect:"Shows cause + culprit variable and IDs (best for admin/dev)."}],recommended:"friendly",recommended_why:"Best default for production UX and security.",impacts:{ux:"error clarity",safety:"info exposure"},related:["behavior.diagnostics.user_error_show_culprit_var","behavior.diagnostics.user_error_show_culprit_value","behavior.diagnostics.user_error_show_status_model","behavior.diagnostics.user_error_show_trace_ids"]},"behavior.diagnostics.user_error_show_culprit_var":{title:"Show culprit variable",details:"When enabled, the user message includes the config variable most likely responsible (e.g., assistant_settings.model_fast).",recommended_why:"Keep off for public users; enable for admins/support environments.",impacts:{ops:"faster fixes",safety:"info exposure"},related:["behavior.diagnostics.user_error_detail"]},"behavior.diagnostics.user_error_show_culprit_value":{title:"Show culprit value preview",details:"When enabled, the user message may include a short preview of the bad value (e.g., an invalid base URL).",caution:"Do not enable for public users if previews might reveal secrets or internal endpoints.",impacts:{ops:"faster fixes",safety:"info exposure"},related:["behavior.diagnostics.user_error_show_culprit_var"]},"behavior.diagnostics.user_error_show_status_model":{title:"Show status + model",details:"When enabled, the message can include HTTP status code and the model that was attempted. Helps debug 401/429/5xx quickly.",impacts:{ops:"faster triage",safety:"info exposure"},related:["behavior.diagnostics.user_error_detail"]},"behavior.diagnostics.user_error_show_trace_ids":{title:"Show trace IDs",details:"When enabled, includes requestId / upstreamRequestId so you can correlate logs between MoviNesta and OpenRouter/provider.",impacts:{ops:"log correlation"},related:["behavior.diagnostics.user_error_detail"]},"behavior.router.zdr.enabled":{title:"ZDR routing toggle",details:"When enabled, privacy-sensitive assistant requests are routed to OpenRouter endpoints flagged as Zero Data Retention (ZDR).",examples:[{scenario:"Disabled",effect:"Uses the standard OpenRouter base URL."},{scenario:"Enabled",effect:"Routes sensitive traffic to ZDR endpoints when available."}],recommended_why:"Enable for privacy-sensitive workloads when ZDR endpoints are configured.",impacts:{safety:"data retention"},related:["behavior.router.zdr.mode","behavior.router.zdr.allow_fallback","behavior.router.zdr.base_url"]},"behavior.router.zdr.mode":{title:"ZDR routing mode",details:"Controls whether ZDR routing applies only to privacy-sensitive requests or to all assistant calls.",examples:[{scenario:"Sensitive only",effect:"Only user-personal requests try ZDR endpoints."},{scenario:"All",effect:"Every request attempts ZDR routing."}],recommended:"sensitive_only",recommended_why:"Limits ZDR use to the most sensitive traffic.",impacts:{safety:"data retention",cost:"endpoint selection"},related:["behavior.router.zdr.enabled","behavior.router.zdr.allow_fallback"]},"behavior.router.zdr.allow_fallback":{title:"Allow ZDR fallback",details:"When enabled, the assistant falls back to the default OpenRouter base URL if no ZDR endpoint is discovered.",examples:[{scenario:"True",effect:"Ensures the assistant still responds even without ZDR coverage."},{scenario:"False",effect:"Hard-requires ZDR endpoints; requests may fail if none are available."}],recommended:!0,recommended_why:"Keeps the assistant available while you validate ZDR coverage.",impacts:{ops:"availability",safety:"data retention"},related:["behavior.router.zdr.enabled","behavior.router.zdr.mode"]},"behavior.router.policy.provider":{title:"Provider routing policy (OpenRouter)",details:"Controls how OpenRouter selects a provider for a request. Use this to prefer specific providers, exclude providers, enforce parameter support, or bias toward lower latency/price/throughput. These settings map to OpenRouter's `provider` object on requests.",recommended:"Leave empty unless you have a clear reason (e.g., exclude an unstable provider, enforce ZDR, or require tools/JSON schema support). Start small: set `ignore` or `only` first, then add `order` if needed.",examples:[{scenario:"Force only OpenAI and Anthropic",effect:"only=[openai, anthropic]"},{scenario:"Avoid a flaky provider",effect:"ignore=[together]"},{scenario:"Use tools/response_format",effect:"require_parameters=true (only providers that support requested params)"}]},"behavior.router.policy.provider.only":{title:"Provider allowlist (only)",details:"If set, OpenRouter will only route to these provider slugs.",recommended:"Use sparingly. Prefer `ignore` unless you need hard restrictions.",examples:[{scenario:"Only OpenAI and Anthropic",effect:"only=[openai, anthropic]"}]},"behavior.router.policy.provider.ignore":{title:"Provider blocklist (ignore)",details:"Providers in this list will not be used for routing.",recommended:"Good first step when one provider is unstable or undesired.",examples:[{scenario:"Avoid a flaky provider",effect:"ignore=[together]"}]},"behavior.router.policy.provider.order":{title:"Provider order",details:"If set, OpenRouter tries providers in this order (before load balancing).",recommended:"Use when you want a preferred provider but allow fallbacks.",examples:[{scenario:"Prefer a specific routing order",effect:"order=[openai, anthropic, mistral]"}]},"behavior.router.policy.provider.require_parameters":{title:"Require parameter support",details:"If true, OpenRouter will only pick providers that support all parameters used in the request (tools, response_format, plugins, etc.).",recommended:"Turn ON if you use tools/JSON schema/web search plugins frequently.",examples:[{scenario:"Require full param support",effect:"require_parameters=true"}]},"behavior.router.policy.provider.zdr":{title:"ZDR routing (provider.zdr)",details:"If true, OpenRouter will only route to providers that support ZDR (Zero Data Retention).",recommended:"Enable if you need strict data handling and you have compatible providers/models.",examples:[{scenario:"Force ZDR-capable providers",effect:"zdr=true"}]},"behavior.router.policy.provider.data_collection":{title:"Data collection filter",details:"If set to deny, OpenRouter filters out providers that collect data. If allow, no filtering is applied (default).",recommended:"Set to deny only if it aligns with your compliance needs and supported providers exist.",examples:[{scenario:"Filter to providers that do not collect data",effect:"data_collection=deny"}]},"behavior.router.zdr.base_url":{title:"ZDR base URL override",details:"Optional override for a dedicated ZDR endpoint. Leave blank to use discovered ZDR endpoints from the OpenRouter endpoints cache.",examples:[{scenario:"Blank",effect:"Uses the first discovered ZDR endpoint."},{scenario:"Custom URL",effect:"Routes ZDR traffic to the specified endpoint."}],recommended_why:"Leave blank unless you operate a dedicated ZDR proxy.",impacts:{ops:"routing control",safety:"data retention"},related:["behavior.router.zdr.enabled","behavior.router.zdr.mode"]}};function D(t){const s=t.split(".");return(s[s.length-1]??t).replace(/_/g," ").replace(/([a-z])([A-Z])/g,"$1 $2").replace(/^\w/,i=>i.toUpperCase())}function v(t,s,a){return typeof s=="number"&&(t=Math.max(s,t)),typeof a=="number"&&(t=Math.min(a,t)),t}function O(t){return t.endsWith("_ms")||t.includes(".ttl_ms")||t.includes(".timeout_ms")||t.includes(".interval_ms")||t.includes(".heartbeat_ms")||t.includes(".debounce_ms")||t.includes(".recompute_ms")||t.includes("_minutes")||t.includes("_seconds")||t.includes("_ttl")||t.includes("_timeout")}function x(t,s){return Number.isFinite(s)?t.endsWith("_ms")||t.includes("_ms")?s>=6e4?`${Math.round(s/1e3/60)}m`:s>=1e3?`${Math.round(s/100)/10}s`:`${Math.round(s)}ms`:t.endsWith("_seconds")||t.includes("_seconds")?`${Math.round(s)}s`:t.endsWith("_minutes")||t.includes("_minutes")?`${Math.round(s)}m`:String(s):String(s)}function U(t){const s={},a=t.toLowerCase();return a.startsWith("ux.")&&(s.ux="user experience"),a.startsWith("assistant.")&&(s.ux=s.ux??"assistant behavior",s.cost=s.cost??"model usage"),a.startsWith("ops.")&&(s.ops="operations"),a.startsWith("integrations.")&&(s.ops=s.ops??"integrations"),a.startsWith("admin.")&&(s.ops=s.ops??"admin UX/ops"),a.startsWith("ml.")&&(s.performance="model selection"),(a.includes("timeout")||a.includes("ttl")||a.includes("debounce")||a.includes("interval"))&&(s.performance=s.performance??"latency/load",s.cost=s.cost??"network/model usage"),(a.includes("max_")||a.includes("limit")||a.includes("topk"))&&(s.performance=s.performance??"compute cost",s.cost=s.cost??"usage"),(a.includes("rate")||a.includes("per_minute")||a.includes("cooldown")||a.includes("429"))&&(s.ops=s.ops??"rate limiting",s.safety=s.safety??"stability"),s}function A(t,s){const a=s==null?void 0:s.meta,i=U(t),w=((s==null?void 0:s.description)??"").trim(),l=s==null?void 0:s.default;let r=w||"Matches the app's current default behavior (safe starting point).";const n=[];(a==null?void 0:a.kind)==="number"&&(typeof a.min=="number"||typeof a.max=="number")&&n.push("Stay within the validated range to avoid rejected updates."),(a==null?void 0:a.kind)==="json"&&n.push("Invalid JSON will be rejected by server validation.");const d=t.toLowerCase();if(!a)return{examples:[{scenario:"Leave default",effect:"Keeps the app behavior unchanged."}],recommended:l,recommended_why:r||"Use the default unless you have a clear reason to change it.",caution:n.length?n.join(" "):void 0,impacts:i};if(a.kind==="boolean")return{examples:[{scenario:"Set to true",effect:"Enables the behavior controlled by this setting."},{scenario:"Set to false",effect:"Disables the behavior controlled by this setting."}],recommended:l,recommended_why:r||"Default is usually the safest option.",recommended_safe:!1,recommended_safe_why:"Safer operationally if you’re unsure; may reduce features/UX.",recommended_aggressive:!0,recommended_aggressive_why:"Enables the feature; ensure it doesn’t increase cost/ops load unexpectedly.",caution:n.length?n.join(" "):void 0,impacts:i};if(a.kind==="enum"){const c=a.values.slice(0,3).map(m=>({scenario:`Set to '${m}'`,effect:"Switches behavior to this mode."}));return{examples:c.length?c:[{scenario:"Pick a mode",effect:"Changes behavior according to the selected mode."}],recommended:l,recommended_why:r||"Use the default mode unless you’re deliberately changing behavior.",caution:n.length?n.join(" "):void 0,impacts:i}}if(a.kind==="string")return d.includes("provider")||d.includes("model")?{examples:[{scenario:"Cheaper/faster model",effect:"Lower latency/cost; may reduce answer quality."},{scenario:"Higher-quality model",effect:"Better answers; higher latency/cost."}],recommended:l,recommended_why:r||"Default is tuned for typical quality/cost tradeoffs.",caution:n.length?n.join(" "):void 0,impacts:i}:{examples:[{scenario:"Short / simple value",effect:"Works best for labels and quick UX copy."},{scenario:"Long / detailed value",effect:"Can improve clarity but may clutter the UI."}],recommended:l,recommended_why:r||"Default is usually a sensible copy/label.",caution:n.length?n.join(" "):void 0,impacts:i};if(a.kind==="number"){const c=typeof(s==null?void 0:s.default)=="number"?s.default:typeof a.min=="number"?a.min:0,m=a.min,f=a.max;if(O(d)){const p=v(c*1.5,m,f),u=v(c*.6,m,f),k=x(t,p),h=x(t,u),S=x(t,c);return{examples:[{scenario:`Lower (${h})`,effect:"More responsive/fresher behavior, but can increase load/cost."},{scenario:`Default (${S})`,effect:"Balanced behavior for most users."},{scenario:`Higher (${k})`,effect:"Less load/cost, but can feel slower or show stale data."}],recommended:c,recommended_why:r||"Default is tuned to balance responsiveness and load.",recommended_safe:p,recommended_safe_why:"Safer for stability/cost if you see load spikes; may reduce responsiveness.",recommended_aggressive:u,recommended_aggressive_why:"Feels faster, but may increase load/cost (watch logs and rate limits).",caution:n.length?n.join(" "):void 0,impacts:i}}if(d.includes("max_")||d.includes("limit")||d.includes("topk")||d.includes("rows")||d.includes("page")){const p=v(Math.max(1,Math.round(c*.7)),m,f),u=v(Math.max(1,Math.round(c*1.4)),m,f);return{examples:[{scenario:`Lower (${p})`,effect:"Faster/cheaper, but may reduce coverage/results."},{scenario:`Higher (${u})`,effect:"More coverage, but can increase latency/cost."}],recommended:c,recommended_why:r||"Default balances speed/cost with usefulness.",recommended_safe:p,recommended_safe_why:"Safer for performance/cost if you’re tuning for scale.",recommended_aggressive:u,recommended_aggressive_why:"More results/coverage; watch latency/cost.",caution:n.length?n.join(" "):void 0,impacts:i}}if(d.includes("cooldown")||d.includes("backoff")||d.includes("stuck")||d.includes("retry")||d.includes("attempt")){const p=v(c*1.3,m,f),u=v(c*.8,m,f);return{examples:[{scenario:`Lower (${x(t,u)})`,effect:"Retries sooner; can increase pressure on providers."},{scenario:`Higher (${x(t,p)})`,effect:"Backs off more; slower recovery but more stable under rate limits."}],recommended:c,recommended_why:r||"Default is a good balance between recovery speed and stability.",recommended_safe:p,recommended_safe_why:"Prefer this if you hit rate limits or see repeated retries.",recommended_aggressive:u,recommended_aggressive_why:"Faster recovery, but monitor error rates and provider limits.",caution:n.length?n.join(" "):void 0,impacts:i}}const g=typeof m=="number"?m:"(low)",b=typeof f=="number"?f:"(high)";return{examples:[{scenario:`Lower (${g})`,effect:"Usually reduces cost/load but may reduce quality/responsiveness."},{scenario:`Higher (${b})`,effect:"Usually improves quality/responsiveness but may increase cost/load."}],recommended:c,recommended_why:r||"Default is typically safest unless you’re tuning a specific issue.",caution:n.length?n.join(" "):void 0,impacts:i}}return{examples:[{scenario:"Smaller JSON payload",effect:"Reduces response size and risk of token/payload blowups."},{scenario:"Larger JSON payload",effect:"More flexibility, but can increase latency/cost."}],recommended:l,recommended_why:r||"Default is the safest starting point.",caution:n.length?n.join(" "):void 0,impacts:i}}function F(t,s){const a=q[t];if(a)return a;const i=D(t),w=((s==null?void 0:s.description)??"").trim()||"Controls this setting's behavior.",l=A(t,s);return{title:i,details:w,examples:l.examples,recommended:l.recommended,recommended_why:l.recommended_why,recommended_safe:l.recommended_safe,recommended_safe_why:l.recommended_safe_why,recommended_aggressive:l.recommended_aggressive,recommended_aggressive_why:l.recommended_aggressive_why,caution:l.caution,impacts:l.impacts}}export{I as H,L as S,q as a,F as g};
